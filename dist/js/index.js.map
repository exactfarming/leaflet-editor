{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/event-names.js","webpack:///./src/js/marker-icons.js","webpack:///./src/js/modes/edit/marker-group.js","webpack:///./src/js/utils/mobile.js","webpack:///./src/js/options.js","webpack:///./src/js/map.js","webpack:///./src/js/base.js","webpack:///./src/js/modes/draw/events.js","webpack:///./src/js/utils/precision.js","webpack:///./src/js/extended/BaseMarkerGroup.js","webpack:///./src/js/modes/edit/marker.js","webpack:///./src/js/hooks/controls.js","webpack:///./src/js/extended/MsgHelper.js","webpack:///./src/js/utils/array.js","webpack:///./src/js/view/group.js","webpack:///./src/js/modes/draw/group.js","webpack:///./src/js/modes/edit/polygon.js","webpack:///./src/js/extended/Polygon.js","webpack:///./src/js/modes/draw/dashed-line.js","webpack:///./src/js/modes/edit/holesGroup.js","webpack:///./src/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","start_add_new_polygon","start_add_new_hole","marker_group_clear","join_path","hole_created","polygon_created","polygon_selected","delete_marker","delete_polygon","map_cleared","last_marker_dblclick_mouseover","hole_deleted","polygon_deleted","first_marker_mouseover","selected_middle_marker_mouseover","selected_marker_mouseover","not_selected_marker_mouseover","marker_mouseout","drag_marker","dragend_marker","marker_dragstart","edit_polygon_mousemove","edit_polygon_mouseover","edit_polygon_mouseout","delete_hole","before_add_marker","add_marker","marker_group_select","view_polygon_mousemove","view_polygon_mouseout","_mobile","size","navigator","userAgent","toLowerCase","isMobileBrowser","firstIcon","L","divIcon","className","iconSize","icon","dragIcon","middleIcon","icons","MarkerGroup","BaseMGroup","extend","_isHole","_position","options","mIcon","mHoverIcon","initialize","layers","LayerGroup","this","_markers","onAdd","map","_map","_updateDELine","latlng","deLine","getDELine","_firstMarker","update","dashedEditLineGroup","addTo","hasMinimalMarkersLength","getLayers","filter","item","_icon","classList","contains","length","setSelected","marker","hasFirstMarker","setSelectedMarker","getLast","_oldSelectedMarker","_selectedMarker","getFirst","_hasFirstIcon","restore","layer","setAll","_latlngs","setAllHoles","_holes","_add","position","_this","arguments","undefined","isMode","addMarker","addLatLng","on","e","clear","_mGroup","_lastMarker","fire","EVENTS","setMiddleMarker","setMiddleMarkers","set","latlngs","_this2","forEach","holes","_this3","hole","lastHGroup","getEHMarkersGroup","addHoleGroup","_each","_bindLineEvents","window","a","vendor","opera","check","test","substr","forceToDraw","notifyClickMarkerDeletePolygon","translations","removePolygon","removePoint","style","view","opacity","fillOpacity","dashArray","clickable","fill","stroke","color","weight","draw","startDraw","drawLine","fillColor","markerIcon","markerHoverIcon","errorLineStyle","smoothFactor","previewErrorLineStyle","text","acceptDeletion","clickToEdit","clickToAddNewEdges","clickToDrawInnerEdges","clickToJoinEdges","clickToRemoveAllSelectedEdges","clickToSelectEdges","dblclickToJoinEdges","clickToStartDrawPolygonOnMap","deleteSelectedEdges","rejectChanges","jsonWasLoaded","checkJson","loadJson","forgetToSave","zoom","worldCopyJump","geoJSONArea","Map","setLayers","viewGroup","ViewGroup","editGroup","DrawGroup","editPolygon","EditPolygon","editMarkersGroup","DashedEditLineGroup","editHoleMarkersGroup","HolesGroup","removeLayers","removeLayer","id","_extends","opts","controls","zoomControl","whenReady","removeControl","msgHelper","getVGroup","getEGroup","getEPolygon","getEMarkersGroup","getSelectedMGroup","_selectedMGroup","getCurrentGeoJSON","coords","eachLayer","_getSelectedVLayer","push","toGeoJSON","geometry","coordinates","eCoordinates","GeoJSON","getFeature","type","include","BaseMap","addInitHook","ControlsHook","_precision","hasSelectedVLayer","_selectedVLayer","_modeType","_activeEditLayer","_errorTimeout","_setModeType","_clearEvents","_setMode","console","error","__mode_draw","_bindDrawEvents","_clearMap","setTimeout","saveState","isEmpty","_setEPolygon_To_VGroup","_addEPolygon_To_VGroup","geojson","geoJSON","areaFunc","turf","area","warn","sum","_props$precLatLng","precLatLng","vLayer","ePolygonLayer","selectedLayer","eArea","precisionGeoJSON","vArea","hArea","precision","getSelectedMarker","clearSelectedMarker","Error","polygon","clearLayers","createEditPolygon","json","geoJson","vGroup","_l","addLayer","_fitVBounds","_setSelectedVLayer","_clearSelectedVLayer","_hideSelectedVLayer","bringToBack","_showSelectedVLayer","_path","visibility","ePolygon","getHoles","getLatLngs","Array","isArray","concat","selectedVLayer","redraw","_convertToEdit","group","pointsArray","isMiddle","getLatLng","setLatLngs","setStyle","_container","remove","add","fitBounds","getBounds","padding","selectedMGroup","_unBindDrawEvents","_moveEPolygonOnTop","element","parentElement","insertAdjacentElement","DrawEvents","_markerIcons","_eventNames","originalEvent","clientX","clientY","target","Marker","eMarkersGroup","_addMarker","startDrawStyle","firstMarker","ehMarkersGroup","lastHole","getLastHole","resetSelection","mGroup","resetLastHole","select","onClick","msg","layerPoint","_ref","off","_openPopup","number","prec","arrayStrings","split","rslt","_prec","toPrecision","Number","_json$geometry","JSON","parse","stringify","outlet","edge","Class","includes","Mixin","Events","_selected","_positionHash","_lastPosition","onRemove","move","removeMarker","splice","cb","markerAt","lastMarker","markers","b","prevMarker","_prev","nextMarker","_next","nextnextMarker","removeMarkerAt","_changePos","_marker","hasStartMarker","some","_recalcPositions","_getMiddleLatLng","_recalcRelations","ids","_ids","_deleteEvents","_leaflet_events","viewreset_idx","zoomanim_idx","marker1","marker2","p1","project","p2","unproject","_divideBy","_this4","changePos","_this5","_layers","sort","setLastHole","dragging","enable","selectIconInGroup","isSelected","disable","unSelectIconInGroup","indexOf","_draggable","_oldLatLngState","draggable","_isFirst","next","prev","changePrevNextPos","prevLatLng","nextLatLng","setLatLng","_resetIcon","ic","setIcon","_addIconClass","DomUtil","addClass","_removeIconClass","removeClass","hasClass","_setDragIcon","isPlain","_onceClick","once","isAcceptedToDelete","isSelectedInGroup","needAcceptToDelete","_disallowToExecuteEvent","_bindEvents","_latlng","__dragging","__wasDragged","hide","_enabled","stopPropagation","selectedMarker","selectedMarkerDragging","_onDrag","_onDragEnd","resetStyle","resetIcon","_selectIconInGroup","touchZoom","doubleClickZoom","boxZoom","keyboard","MsgHelper","defaultMsg","data","addControl","Control","_onResizeEvent","_titleContainer","Util","setOptions","corner","container","_controlCorners","_controlContainer","appendChild","_setContainer","control","_unBindEvents","document","body","removeChild","_titlePosContainer","controlCorner","children","child","width","clientWidth","left","removeEventListener","addEventListener","innerHTML","getOffset","el","_x","_y","isFullscreen","isNaN","offsetLeft","offsetTop","offsetParent","y","x","point","offset","Point","layerPointToContainerPoint","latLngToContainerPoint","top","getBtnContainer","getBtnAt","pos","disableBtn","enableBtn","from","to","func","MultiPolygon","mViewStyle","FeatureGroup","EditPloygon","ExtendedPolygon","_oldE","_k","Polygon","_update","_removeHole","holePosition","_leaflet_id","repos","Polyline","addHole","hasHoles","latLngs","clearHoles","_options","_latlngToMove","latLng","lat","lng","_addLine","line","isLastMarker","_markerGroup","_lastHole","_lastHoleToDraw","getLength","LeafletEditor"],"mappings":"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","file":"dist/js/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","export default {\n  start_add_new_polygon: 'editor:start_add_new_polygon',\n  start_add_new_hole: 'editor:start_add_new_hole',\n  marker_group_clear: 'editor:marker_group_clear',\n  join_path: 'editor:__join_path',\n  hole_created: 'editor:polygon:hole_created',\n  polygon_created: 'editor:polygon:created',\n  polygon_selected: 'editor:polygon:selected',\n  delete_marker: 'editor:delete_marker',\n  delete_polygon: 'editor:delete_polygon',\n\n  map_cleared: 'editor:map_cleared',\n\n  last_marker_dblclick_mouseover: 'editor:last_marker_dblclick_mouseover',\n\n  hole_deleted: 'editor:polygon:hole_deleted',\n  polygon_deleted: 'editor:polygon:deleted',\n\n  first_marker_mouseover: 'editor:first_marker_mouseover',\n\n  selected_middle_marker_mouseover: 'editor:selected_middle_marker_mouseover',\n\n  selected_marker_mouseover: 'editor:selected_marker_mouseover',\n  not_selected_marker_mouseover: 'editor:not_selected_marker_mouseover',\n\n  marker_mouseout: 'editor:marker_mouseout',\n\n  drag_marker: 'editor:drag_marker',\n\n  dragend_marker: 'editor:dragend_marker',\n  marker_dragstart: 'editor:marker_dragstart',\n\n  edit_polygon_mousemove: 'editor:edit_polygon_mousemove',\n  edit_polygon_mouseover: 'editor:edit_polygon_mouseover',\n  edit_polygon_mouseout: 'editor:edit_polygon_mouseout',\n\n  delete_hole: 'editor:delete_hole',\n\n  before_add_marker: 'editor:before_add_marker',\n  add_marker: 'editor:add_marker',\n  marker_group_select: 'editor:marker_group_select',\n\n  view_polygon_mousemove: 'editor:view_polygon_mousemove',\n\n  view_polygon_mouseout: 'editor:view_polygon_mouseout'\n}\n","import m from './utils/mobile.js';\n\nvar size = 1;\nvar userAgent = navigator.userAgent.toLowerCase();\n\nif (m.isMobileBrowser()) {\n  size = 2;\n}\n\nexport const firstIcon = L.divIcon({\n  className: \"m-editor-div-icon-first\",\n  iconSize: [10 * size, 10 * size]\n});\n\nexport const icon = L.divIcon({\n  className: \"m-editor-div-icon\",\n  iconSize: [10 * size, 10 * size]\n});\n\nexport const dragIcon = L.divIcon({\n  className: \"m-editor-div-icon-drag\",\n  iconSize: [10 * size * 3, 10 * size * 3]\n});\n\nexport const middleIcon = L.divIcon({\n  className: \"m-editor-middle-div-icon\",\n  iconSize: [10 * size, 10 * size]\n});\n","import BaseMGroup from '../../extended/BaseMarkerGroup.js';\n\nimport EVENTS from '../../event-names.js';\n\nimport * as icons from '../../marker-icons.js';\n\nL.MarkerGroup = BaseMGroup.extend({\n  _isHole: false,\n  _position: null,\n  options: {\n    mIcon: null,\n    mHoverIcon: null\n  },\n  initialize (layers) {\n    L.LayerGroup.prototype.initialize.call(this, layers);\n\n    this._markers = [];\n  },\n  onAdd (map) {\n    this._map = map;\n  },\n  _updateDELine (latlng) {\n    const deLine = this.getDELine();\n    if (this._firstMarker) {\n      deLine.update(latlng);\n    }\n    return deLine;\n  },\n  getDELine () {\n    if (!this._map) {\n      this._map.dashedEditLineGroup.addTo(this._map);\n    }\n    return this._map.dashedEditLineGroup;\n  },\n  hasMinimalMarkersLength() {\n    return this.getLayers().filter((item) => {\n      return item._icon.classList.contains('m-editor-div-icon') && !item._icon.classList.contains('m-editor-middle-div-icon');\n    }).length <= 3;\n  },\n  setSelected (marker) {\n    var map = this._map;\n\n    if (this.hasFirstMarker()) {\n      map.setSelectedMarker(this.getLast());\n      map._oldSelectedMarker = map._selectedMarker;\n      return;\n    }\n\n    map._oldSelectedMarker = map._selectedMarker;\n    map.setSelectedMarker(marker);\n  },\n  getFirst () {\n    return this._firstMarker;\n  },\n  getLast () {\n    if (this.hasFirstMarker()) {\n      var layers = this.getLayers();\n      return layers[layers.length - 1];\n    }\n  },\n  hasFirstMarker () {\n    return !!(this.getFirst() && this.getFirst()._hasFirstIcon());\n  },\n  restore (layer) {\n    this.setAll(layer._latlngs);\n    this.setAllHoles(layer._holes);\n  },\n  _add(latlng, position, options = {}) {\n\n    if (this._map.isMode('draw')) {\n      if (!this._firstMarker) {\n        options.icon = icons.firstIcon;\n      }\n    }\n\n    var marker = this.addMarker(latlng, position, options);\n\n    this.getDELine().addLatLng(latlng);\n\n    if (this.getFirst()._hasFirstIcon()) {\n      this._map.on('mousemove', (e) => {\n        this._updateDELine(e.latlng);\n      });\n    } else {\n      this.getDELine().clear();\n    }\n\n    if (marker._mGroup.getLayers().length > 2) {\n      if (marker._mGroup._firstMarker._hasFirstIcon() && marker === marker._mGroup._lastMarker) {\n        this._map.fire(EVENTS.last_marker_dblclick_mouseover, {marker: marker});\n      }\n    }\n\n    return marker;\n  },\n  setMiddleMarker (position) {\n    this.addMarker(position, null, {icon: icons.middleIcon});\n  },\n  setMiddleMarkers (position) {\n    this.setMiddleMarker(position);\n    this.setMiddleMarker(position + 2);\n  },\n  set (latlng, position, options) {\n    return this._add(latlng, position, options);\n  },\n  setAll (latlngs) {\n    latlngs.forEach((latlng, position) => {\n      this.set(latlng, position);\n    });\n\n    this.getFirst().fire('click');\n  },\n  setAllHoles (holes) {\n    holes.forEach((hole) => {\n      var lastHGroup = this._map.getEHMarkersGroup().addHoleGroup();\n\n      hole._each((latlng, position) => {\n        lastHGroup.set(latlng, position);\n      });\n\n      lastHGroup.getFirst().fire('click');\n    });\n  },\n  _bindLineEvents: undefined\n});\n\nconst MarkerGroup = L.MarkerGroup;\nexport default MarkerGroup;\n","export default {\n  isMobileBrowser (navigator = window.navigator) {\n    const a = navigator.userAgent || navigator.vendor || window.opera;\n    var check = false;\n\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) {\n      check = true;\n    }\n\n    return check;\n  }\n};\n","const viewColor = '#0aaec9';\nconst drawColor = '#00cd00';\nconst weight = 3;\n\nexport default {\n  forceToDraw: true,\n  notifyClickMarkerDeletePolygon: false,\n  translations: {\n    removePolygon: 'remove polygon',\n    removePoint: 'remove point'\n  },\n  style: {\n    view: {\n      opacity: 0.5,\n      fillOpacity: 0.2,\n      dashArray: null,\n      clickable: false,\n      fill: true,\n      stroke: true,\n      color: viewColor,\n      weight: weight\n    },\n    draw: {\n      opacity: 0.5,\n      fillOpacity: 0.2,\n      dashArray: '5, 10',\n      clickable: true,\n      fill: true,\n      stroke: true,\n      color: drawColor,\n      weight: weight\n    },\n    startDraw: {},\n    drawLine: {\n      opacity: 0.7,\n      fill: false,\n      fillColor: drawColor,\n      color: drawColor,\n      weight: weight,\n      dashArray: '5, 10',\n      stroke: true,\n      clickable: false\n    }\n  },\n  markerIcon: undefined,\n  markerHoverIcon: undefined,\n  errorLineStyle: {\n    color: 'red',\n    weight: 3,\n    opacity: 1,\n    smoothFactor: 1\n  },\n  previewErrorLineStyle: {\n    color: 'red',\n    weight: 3,\n    opacity: 1,\n    smoothFactor: 1,\n    dashArray: '5, 10'\n  },\n  text: {\n    removePolygon: 'Remove polygon',\n    acceptDeletion: 'Click again to remove polygon',\n    clickToEdit: 'click to edit',\n    clickToAddNewEdges: '<div>click&nbsp;&nbsp;<div class=\\'m-editor-middle-div-icon static group-selected\\'></div>&nbsp;&nbsp;to add new edges</div>',\n    clickToDrawInnerEdges: 'click to draw inner edges',\n    clickToJoinEdges: 'click to join edges',\n    clickToRemoveAllSelectedEdges: '<div>click&nbsp;&nbsp;&nbsp;&nbsp;<div class=\\'m-editor-div-icon static group-selected\\'></div>&nbsp;&nbsp;to remove edge&nbsp;&nbsp;or<br>click&nbsp;&nbsp;<i class=\\'fa fa-trash\\'></i>&nbsp;&nbsp;to remove all selected edges</div>',\n    clickToSelectEdges: '<div>click&nbsp;&nbsp;&nbsp;&nbsp;<div class=\\'m-editor-div-icon static\\'></div>&nbsp;/&nbsp;<div class=\\'m-editor-middle-div-icon static\\'></div>&nbsp;&nbsp;to select edges</div>',\n    dblclickToJoinEdges: 'double click to join edges',\n    clickToStartDrawPolygonOnMap: 'click to start draw polygon on map',\n    deleteSelectedEdges: 'deleted selected edges',\n    rejectChanges: 'reject changes',\n    jsonWasLoaded: 'JSON was loaded',\n    checkJson: 'check JSON',\n    loadJson: 'load GeoJSON',\n    forgetToSave: 'Save changes by pressing outside of polygon',\n    zoom: 'Zoom'\n  },\n  worldCopyJump: true,\n  geoJSONArea: null\n};\n","import BaseMap from './base.js';\nimport ControlsHook from './hooks/controls.js';\n\nimport opts from './options.js';\n\nimport './utils/array.js';\nimport ViewGroup from './view/group.js';\nimport DrawGroup from './modes/draw/group.js';\nimport EditPolygon from './modes/edit/polygon.js';\nimport MarkerGroup from './modes/edit/marker-group.js';\nimport DashedEditLineGroup from './modes/draw/dashed-line.js';\nimport HolesGroup from './modes/edit/holesGroup.js';\n\nlet Map = L.Map.extend({\n  setLayers() {\n    this.viewGroup = new ViewGroup([]);\n    this.editGroup = new DrawGroup([]);\n    this.editPolygon = new EditPolygon([]);\n    this.editMarkersGroup = new MarkerGroup([]);\n    this.dashedEditLineGroup = new DashedEditLineGroup([]);\n    this.editHoleMarkersGroup = new HolesGroup([]);\n\n    this.viewGroup.addTo(this);\n    this.editGroup.addTo(this);\n    this.editPolygon.addTo(this);\n    this.editMarkersGroup.addTo(this);\n    this.dashedEditLineGroup.addTo(this);\n    this.editHoleMarkersGroup.addTo(this);\n  },\n\n  removeLayers() {\n    this.removeLayer(this.viewGroup);\n    this.removeLayer(this.editGroup);\n    this.removeLayer(this.editPolygon);\n    this.removeLayer(this.editMarkersGroup);\n    this.removeLayer(this.dashedEditLineGroup);\n    this.removeLayer(this.editHoleMarkersGroup);\n  },\n\n  initialize(id, options) {\n    this.viewGroup = null;\n\n    this.editGroup = null;\n\n    this.editPolygon = null;\n\n    this.editMarkersGroup = null;\n\n    this.dashedEditLineGroup = null;\n\n    this.editHoleMarkersGroup = null;\n\n    if (options.text) {\n      Object.assign(opts.text, options.text);\n      delete options.text;\n    }\n\n    let controls = options.controls;\n    if (controls) {\n      if (controls.zoom === false) {\n        options.zoomControl = false;\n      }\n    }\n\n    if (options.style) {\n      if (options.style.draw) {\n        Object.assign(opts.style.draw, options.style.draw);\n      }\n      if (options.style.view) {\n        Object.assign(opts.style.view, options.style.view);\n      }\n      if (options.style.startDraw) {\n        Object.assign(opts.style.startDraw, options.style.startDraw);\n      }\n      if (options.style.drawLine) {\n        Object.assign(opts.style.drawLine, options.style.drawLine);\n      }\n      delete options.style;\n    }\n\n    Object.assign(this.options, opts, options);\n\n    L.Map.prototype.initialize.call(this, id, options);\n\n    this.whenReady(() => {\n      this.setLayers();\n    });\n\n    if (this.options.forceToDraw) {\n      this.mode('draw');\n    }\n\n    this.on('unload', () => {\n      this.removeControl(this.msgHelper);\n      this.removeLayers();\n    });\n  },\n\n  getVGroup() {\n    return this.viewGroup;\n  },\n\n  getEGroup() {\n    return this.editGroup;\n  },\n\n  getEPolygon() {\n    return this.editPolygon;\n  },\n\n  getEMarkersGroup() {\n    return this.editMarkersGroup;\n  },\n\n  getDELine() {\n    return this.dashedEditLineGroup;\n  },\n\n  getEHMarkersGroup() {\n    return this.editHoleMarkersGroup;\n  },\n\n  getSelectedMGroup() {\n    return this._selectedMGroup;\n  },\n\n  getCurrentGeoJSON() {\n    const coords = [];\n\n    this.getVGroup().eachLayer(layer => {\n      if (layer !== this._getSelectedVLayer()) {\n        coords.push(layer.toGeoJSON().geometry.coordinates);\n      }\n    });\n\n    const eCoordinates = this.getEPolygon().toGeoJSON().geometry.coordinates;\n\n    if (eCoordinates.length) {\n      coords.push(eCoordinates);\n    }\n\n    return L.GeoJSON.getFeature(this, {\n      type: 'MultiPolygon',\n      coordinates: coords\n    });\n  }\n});\n\nMap.include(BaseMap);\nMap.addInitHook(ControlsHook);\n\nexport default Map;\n\n","import DrawEvents from './modes/draw/events.js';\n\nimport {\n  precision,\n  precisionGeoJSON\n} from './utils/precision.js';\n\nimport EVENTS from './event-names.js';\n\nimport MarkerGroup from './modes/edit/marker-group.js';\n\nexport default Object.assign({\n\n  hasSelectedVLayer() {\n    return this._getSelectedVLayer() !== undefined;\n  },\n\n  _selectedMarker: undefined,\n  _selectedVLayer: undefined,\n  _oldSelectedMarker: undefined,\n  _modeType: 'draw',\n  _activeEditLayer: undefined,\n  _errorTimeout: null,\n\n  mode(type) {\n    if (this[`__mode_${type}`]) {\n      this._setModeType(type);\n\n      this._clearEvents();\n\n\n      type = this[`__mode_${type}`]() || type;\n\n      this._setMode(type);\n    } else {\n      console.error(`Mode \"${type}\" is not defined`);\n    }\n  },\n  isMode(type) {\n    return type === this._modeType;\n  },\n  __mode_draw() {\n    this._bindDrawEvents();\n  },\n  clear() {\n    this._clearEvents();\n    this._clearMap();\n    setTimeout(() => {\n      this.fire(EVENTS.map_cleared);\n    }, 0);\n  },\n  /**\n   *\n   * The main idea is to save EPolygon to VGroup when:\n   * 1) user add new polygon\n   * 2) when user edit polygon\n   *\n   * */\n  saveState() {\n\n    let ePolygon = this.getEPolygon();\n\n    if (!ePolygon.isEmpty()) {\n      if (this._getSelectedVLayer()) {\n        this._setEPolygon_To_VGroup();\n      } else {\n        this._addEPolygon_To_VGroup();\n      }\n    }\n\n    this.clear();\n    this.mode('draw');\n\n    let geojson = this.getVGroup().toGeoJSON();\n    if (geojson.geometry) {\n      return geojson.geometry;\n    }\n    return {};\n  },\n  geoJSONArea(geoJSON) {\n    let areaFunc = this.options.geoJSONArea || window.turf && window.turf.area;\n\n    if (!areaFunc) {\n      console.warn('Warning: Implement \"geoJSONArea\" function ( leaflet-editor )');\n    }\n\n    return (areaFunc) ? areaFunc(geoJSON) : 0;\n  },\n  /**\n   * Get editable area with precision of lat, lng\n   * Default precision is 6 (precLatLng)\n   *\n   * */\n  area(props = {}) {\n\n    let {precLatLng = 6} = props;\n    let vLayer = this.getVGroup();\n    let ePolygonLayer = this.getEPolygon();\n    let selectedLayer = this._getSelectedVLayer();\n\n    let sum = 0;\n\n    let eArea = (!ePolygonLayer.isEmpty()) ? this.geoJSONArea(precisionGeoJSON(ePolygonLayer.toGeoJSON(), precLatLng)) : 0;\n    let vArea = this.geoJSONArea(precisionGeoJSON(vLayer.toGeoJSON(), precLatLng));\n\n    let hArea = (selectedLayer) ? this.geoJSONArea(precisionGeoJSON(selectedLayer.toGeoJSON(), precLatLng)) : 0;\n\n    if (this.hasSelectedVLayer() && eArea > 0) {\n      vArea -= hArea;\n    }\n\n    sum = (eArea > 0) ? (vArea + eArea) : vArea;\n\n    return precision(sum, precLatLng);\n  },\n  getSelectedMarker() {\n    return this._selectedMarker;\n  },\n  clearSelectedMarker() {\n    this._selectedMarker = null;\n  },\n  setSelectedMarker(marker) {\n    if (!marker || !marker._icon) {\n      throw new Error('Error in method \"setSelectedMarker\". Check marker instance');\n    }\n    this._selectedMarker = marker;\n  },\n  removePolygon(polygon) {\n    this.getEMarkersGroup().clearLayers();\n    this.getEHMarkersGroup().clearLayers();\n\n    polygon.clear();\n\n    this.clearSelectedMarker();\n    this._setEPolygon_To_VGroup();\n  },\n  createEditPolygon(json) {\n    let geoJson = L.geoJson(json);\n\n    //avoid to lose changes\n    if (this._getSelectedVLayer()) {\n      this._setEPolygon_To_VGroup();\n    } else {\n      this._addEPolygon_To_VGroup();\n    }\n\n    this.clear();\n\n    let layer = geoJson.getLayers()[0];\n\n    if (layer) {\n      let layers = layer.getLayers();\n      let vGroup = this.getVGroup();\n      for (let i = 0; i < layers.length; i++) {\n        let _l = layers[i];\n        vGroup.addLayer(_l);\n      }\n    }\n\n    this.mode('draw');\n\n    this._fitVBounds();\n\n    return geoJson;\n  },\n\n  _getSelectedVLayer() {\n    return this._selectedVLayer;\n  },\n  _setSelectedVLayer(layer) {\n    this._selectedVLayer = layer;\n  },\n  _clearSelectedVLayer() {\n    this._selectedVLayer = undefined;\n  },\n  _hideSelectedVLayer(layer) {\n    layer.bringToBack();\n\n    if (!layer) {\n      return;\n    }\n    //show last layer\n    this._showSelectedVLayer(this._getSelectedVLayer());\n    //hide\n    this._setSelectedVLayer(layer);\n    layer._path.style.visibility = 'hidden';\n  },\n  _showSelectedVLayer(layer = this._selectedVLayer) {\n    if (!layer) {\n      return;\n    }\n    layer._path.style.visibility = '';\n  },\n  _addEPolygon_To_VGroup() {\n    let vGroup = this.getVGroup();\n    let ePolygon = this.getEPolygon();\n\n    let holes = ePolygon.getHoles();\n    let latlngs = ePolygon.getLatLngs();\n\n    if (latlngs.length <= 2) {\n      return;\n    }\n\n    if (Array.isArray(holes)) {\n      if (holes) {\n        latlngs = [latlngs].concat(holes);\n      }\n    }\n    vGroup.addLayer(L.polygon(latlngs));\n  },\n  _setEPolygon_To_VGroup() {\n    let ePolygon = this.getEPolygon();\n    let selectedVLayer = this._getSelectedVLayer();\n\n    if (!selectedVLayer) {\n      return;\n    }\n\n    selectedVLayer._latlngs = ePolygon.getLatLngs();\n    selectedVLayer._holes = ePolygon.getHoles();\n    selectedVLayer.redraw();\n  },\n\n  _convertToEdit(group) {\n    if (group instanceof MarkerGroup) {\n      let ePolygon = this.getEPolygon();\n      let layers = group.getLayers();\n      layers = layers.filter((layer) => !layer.isMiddle());\n      let pointsArray = layers.map((layer) => layer.getLatLng());\n\n      let holes = ePolygon.getHoles();\n\n      if (holes) {\n        pointsArray = [pointsArray].concat(holes);\n      }\n\n      ePolygon.setLatLngs(pointsArray);\n      ePolygon.redraw();\n\n      return ePolygon;\n    }\n  },\n  _setMode(type) {\n    let options = this.options;\n    this.getEPolygon().setStyle(options.style[type]);\n  },\n\n  _setModeType(type) {\n    try {\n      this._container.classList.remove(`map-${this._modeType}`);\n      this._container.classList.add(`map-${this._modeType}`);\n\n      this._modeType = type;\n    } catch (e) {\n      console.error('Check \"_setModeType\"');\n    }\n  },\n  _fitVBounds() {\n    if (this.getVGroup().getLayers().length !== 0) {\n      this.fitBounds(this.getVGroup().getBounds(), {padding: [30, 30]});\n    }\n  },\n  _clearMap() {\n    this.getEGroup().clearLayers();\n    this.getEPolygon().clear();\n    this.getEMarkersGroup().clear();\n    let selectedMGroup = this.getSelectedMGroup();\n\n    if (selectedMGroup) {\n      selectedMGroup.getDELine().clear();\n    }\n\n    this.getEHMarkersGroup().clearLayers();\n\n    this._activeEditLayer = undefined;\n\n    this._showSelectedVLayer();\n    this._clearSelectedVLayer();\n    this.clearSelectedMarker();\n  },\n  _clearEvents() {\n    this._unBindDrawEvents();\n  },\n  _moveEPolygonOnTop() {\n    const ePolygon = this.getEPolygon();\n    const element = ePolygon._container;\n\n    if (element) {\n      element.parentElement.insertAdjacentElement('beforeend', element);\n    }\n  }\n}, DrawEvents);\n","import { firstIcon, middleIcon } from '../../marker-icons.js';\nimport EVENTS from '../../event-names.js';\n\nexport default {\n  _bindDrawEvents () {\n    this._unBindDrawEvents();\n\n    // click on map\n    this.on('click', (e) => {\n      // bug fix\n      if (e.originalEvent && e.originalEvent.clientX === 0 && e.originalEvent.clientY === 0) {\n        return;\n      }\n\n      if (e.target instanceof L.Marker) {\n        return;\n      }\n\n      var eMarkersGroup = e.target.getEMarkersGroup();\n\n      // start add new polygon\n      if (eMarkersGroup.isEmpty()) {\n        this._addMarker(e);\n\n        this.fire(EVENTS.start_add_new_polygon);\n        var startDrawStyle = this.options.style['startDraw'];\n\n        if (startDrawStyle) {\n          this.getEPolygon().setStyle(startDrawStyle);\n        }\n\n        this._clearSelectedVLayer();\n\n        this._selectedMGroup = eMarkersGroup;\n        return false;\n      }\n\n      // continue with new polygon\n      var firstMarker = eMarkersGroup.getFirst();\n\n      if (firstMarker && firstMarker._hasFirstIcon()) {\n        if (!(e.target instanceof L.Marker)) {\n          this._addMarker(e);\n        }\n        return false;\n      }\n\n      // start draw new hole polygon\n      var ehMarkersGroup = this.getEHMarkersGroup();\n      var lastHole = ehMarkersGroup.getLastHole();\n      if (firstMarker && !firstMarker._hasFirstIcon()) {\n        if ((e.target.getEPolygon()._path === e.originalEvent.target)) {\n          if (!lastHole || !lastHole.getFirst() || !lastHole.getFirst()._hasFirstIcon()) {\n            this.clearSelectedMarker();\n\n            var lastHGroup = ehMarkersGroup.addHoleGroup();\n            lastHGroup.set(e.latlng, null, { icon: firstIcon });\n\n            this._selectedMGroup = lastHGroup;\n            this.fire(EVENTS.start_add_new_hole);\n\n            this.getEHMarkersGroup().resetSelection();\n            this.getEMarkersGroup().resetSelection();\n\n            return false;\n          }\n        }\n      }\n\n      // continue with new hole polygon\n      if (lastHole && !lastHole.isEmpty() && lastHole.hasFirstMarker()) {\n        ehMarkersGroup.getLastHole().set(e.latlng);\n\n        return false;\n      }\n\n      // reset\n\n      if (this._getSelectedVLayer()) {\n        this._setEPolygon_To_VGroup();\n      } else {\n        this._addEPolygon_To_VGroup();\n      }\n      this.clear();\n      this.mode('draw');\n\n      this.fire(EVENTS.marker_group_clear);\n    });\n\n    this.on(EVENTS.join_path, (e) => {\n      var eMarkersGroup = e.mGroup;\n\n      if (!eMarkersGroup) {\n        return;\n      }\n\n      if (eMarkersGroup._isHole) {\n        this.getEHMarkersGroup().resetLastHole();\n      }\n      //1. set middle markers\n      var layers = eMarkersGroup.getLayers();\n\n      var position = -1;\n      layers.forEach(() => {\n        var marker = eMarkersGroup.addMarker(position, null, { icon: middleIcon });\n        position = marker.position + 2;\n      });\n\n      //2. clear line\n      eMarkersGroup.getDELine().clear();\n\n      eMarkersGroup.select();\n\n      //reset style if 'startDraw' was used\n      this.getEPolygon().setStyle(this.options.style.draw);\n\n\n      if (eMarkersGroup._isHole) {\n        this.fire(EVENTS.hole_created);\n      } else {\n        this.fire(EVENTS.polygon_created);\n      }\n    });\n\n    const vGroup = this.getVGroup();\n\n    vGroup.on('click', (e) => {\n      const selectedMGroup = this.getSelectedMGroup();\n\n      if (!selectedMGroup || !selectedMGroup.hasFirstMarker()) {\n\n        vGroup.onClick(e);\n\n        this.msgHelper.msg(this.options.text.clickToDrawInnerEdges, null, e.layerPoint);\n        this.fire(EVENTS.polygon_selected);\n      }\n    });\n\n    this.on(EVENTS.delete_marker, () => {\n      this._convertToEdit(this.getEMarkersGroup());\n    });\n    this.on(EVENTS.delete_polygon, () => {\n      this.getEHMarkersGroup().remove();\n    });\n  },\n  _addMarker ({ latlng }) {\n\n    var eMarkersGroup = this.getEMarkersGroup();\n\n    var marker = eMarkersGroup.set(latlng);\n\n    this._convertToEdit(eMarkersGroup);\n\n    this.fire(EVENTS.add_marker, { marker });\n\n    return marker;\n  },\n  _unBindDrawEvents () {\n    this.off('click');\n    this.getVGroup().off('click');\n\n    this.off('dblclick');\n\n    this.getDELine().clear();\n\n    this.off(EVENTS.join_path);\n\n    if (this._openPopup) {\n      delete this._openPopup;\n    }\n  }\n}\n","export const precision = function(number, prec) {\n  let arrayStrings = (`${number}`).split('.');\n  prec = prec || 0;\n\n  if (!number || arrayStrings.length === 1) {\n    return number;\n  }\n\n  let isFloat = arrayStrings[1].length > 0;\n\n  let rslt = 0;\n\n  if (isFloat) {\n    let _prec = (arrayStrings[1].length < prec) ? arrayStrings[1].length : prec;\n    rslt = number.toPrecision(arrayStrings[0].length + _prec);\n  }\n\n  return Number(rslt);\n};\n\nexport const precisionGeoJSON = function(geoJSON, prec = 0) {\n  let json;\n  if (geoJSON === null || geoJSON === undefined) {\n    throw new Error('Please, make sure that first arguments is geoJSON');\n  }\n\n  json = JSON.parse(JSON.stringify(geoJSON));\n\n  let { geometry: { type, coordinates } } = json;\n\n  if (!Array.isArray(coordinates)) {\n    throw new Error('Please, make sure that geoJSON has correct structure');\n  }\n\n  if (type === 'Polygon') {\n    if (prec > 0) {\n      coordinates.forEach(outlet => {\n        outlet.forEach(edge => {\n          edge[0] = precision(edge[0], prec);\n          edge[1] = precision(edge[1], prec);\n        });\n      });\n    }\n  }\n\n  if (type === 'MultiPolygon') {\n    if (prec > 0) {\n      coordinates.forEach(polygon => {\n        polygon.forEach(outlet => {\n          outlet.forEach(edge => {\n            edge[0] = precision(edge[0], prec);\n            edge[1] = precision(edge[1], prec);\n          });\n        });\n      });\n    }\n  }\n\n\n  return json;\n};","import Marker from '../modes/edit/marker.js';\nimport * as icons from '../marker-icons.js';\n\nimport EVENTS from '../event-names.js';\n\nexport default L.Class.extend({\n  includes: L.Mixin.Events,\n\n  _selected: false,\n  _lastMarker: undefined,\n  _firstMarker: undefined,\n  _positionHash: undefined,\n  _lastPosition: 0,\n  _markers: [],\n  onRemove () {\n    this.clearLayers();\n  },\n  clearLayers () {\n    this._markers.forEach((marker) => {\n      this._map.removeLayer(marker);\n    });\n    this._markers = [];\n  },\n  addTo (map) {\n    map.addLayer(this);\n  },\n  addLayer (marker) {\n    this._map.addLayer(marker);\n    this._markers.push(marker);\n    if (marker.position != null) {\n      this._markers.move(this._markers.length - 1, marker.position);\n    }\n    marker.position = (marker.position != null) ? marker.position : this._markers.length - 1;\n  },\n  remove () {\n    var markers = this.getLayers();\n    markers._each((marker) => {\n      while (this.getLayers().length) {\n        this.removeMarker(marker);\n      }\n    });\n\n    var map = this._map;\n\n    if (this._isHole) {\n      map.fire(EVENTS.hole_deleted);\n    } else {\n      map.getVGroup().removeLayer(map._getSelectedVLayer());\n      map.fire(EVENTS.polygon_deleted);\n\n    }\n  },\n  removeLayer (marker) {\n    var position = marker.position;\n    this._map.removeLayer(marker);\n    this._markers.splice(position, 1);\n  },\n  getLayers () {\n    return this._markers;\n  },\n  eachLayer (cb) {\n    this._markers.forEach(cb);\n  },\n  markerAt (position) {\n    var rslt = this._markers[position];\n\n    if (position < 0) {\n      return this.firstMarker();\n    }\n\n    if (rslt === undefined) {\n      rslt = this.lastMarker();\n    }\n\n    return rslt;\n  },\n  firstMarker () {\n    return this._markers[0];\n  },\n  lastMarker () {\n    var markers = this._markers;\n    return markers[markers.length - 1];\n  },\n  removeMarker (marker) {\n    var b = !marker.isMiddle();\n\n    var prevMarker = marker._prev;\n    var nextMarker = marker._next;\n    var nextnextMarker = marker._next._next;\n    this.removeMarkerAt(marker.position);\n    this.removeMarkerAt(prevMarker.position);\n    this.removeMarkerAt(nextMarker.position);\n\n    var map = this._map;\n\n    if (this.getLayers().length > 0) {\n      this.setMiddleMarker(nextnextMarker.position);\n\n      if (b) {\n        map.fire(EVENTS.delete_marker, { marker: marker });\n      }\n    } else {\n      if (this._isHole) {\n        map.removeLayer(this);\n        map.fire(EVENTS.delete_hole, { marker: marker });\n      } else {\n        map.fire(EVENTS.delete_polygon);\n\n        map.removePolygon(map.getEPolygon());\n      }\n      map.fire(EVENTS.marker_group_clear);\n    }\n  },\n  removeMarkerAt (position) {\n    if (this.getLayers().length === 0) {\n      return;\n    }\n\n    var marker;\n    if (typeof position === 'number') {\n      marker = this.markerAt(position);\n    } else {\n      return;\n    }\n\n    var _changePos = false;\n    var markers = this._markers;\n    markers.forEach((_marker) => {\n      if (_changePos) {\n        _marker.position = (_marker.position === 0) ? 0 : _marker.position - 1;\n      }\n      if (_marker === marker) {\n        marker._prev._next = marker._next;\n        marker._next._prev = marker._prev;\n        _changePos = true;\n      }\n    });\n\n    this.removeLayer(marker);\n\n    if (markers.length < 5) {\n      this.clear();\n      if (!this._isHole) {\n        var map = this._map;\n        map.getEPolygon().clear();\n        map.getVGroup().removeLayer(map._getSelectedVLayer());\n      }\n    }\n  },\n  hasStartMarker() {\n    return !!this.getLayers().some(marker => marker._icon.classList.contains(icons.firstIcon.options.className));\n  },\n  addMarker (latlng, position, options) {\n    // 1. recalculate positions\n    if (typeof latlng === 'number') {\n      position = this.markerAt(latlng).position;\n      this._recalcPositions(position);\n\n      var prevMarker = (position - 1) < 0 ? this.lastMarker() : this.markerAt(position - 1);\n      var nextMarker = this.markerAt((position == -1) ? 1 : position);\n      latlng = this._getMiddleLatLng(prevMarker, nextMarker);\n    }\n\n    var marker = new Marker(this, latlng, options);\n    if (!this._firstMarker) {\n      this._firstMarker = marker;\n      this._lastMarker = marker;\n    }\n\n    if (position !== undefined) {\n      marker.position = position;\n    }\n\n    this.addLayer(marker);\n\n    {\n      marker.position = (marker.position !== undefined ) ? marker.position : this._lastPosition++;\n      marker._prev = this._lastMarker;\n      this._firstMarker._prev = marker;\n      if (marker._prev) {\n        this._lastMarker._next = marker;\n        marker._next = this._firstMarker;\n      }\n    }\n\n    if (position === undefined) {\n      this._lastMarker = marker;\n    }\n\n    // 2. recalculate relations\n    if (position !== undefined) {\n      this._recalcRelations(marker);\n    }\n    // 3. trigger event\n    if (!marker.isMiddle()) {\n      this._map.fire(EVENTS.before_add_marker, { marker: marker });\n    }\n\n    return marker;\n  },\n  clear () {\n    var ids = this._ids();\n\n    this.clearLayers();\n\n    ids.forEach((id) => {\n      this._deleteEvents(id);\n    });\n\n    this._lastPosition = 0;\n\n    this._firstMarker = undefined;\n  },\n  _deleteEvents (id) {\n    delete this._map._leaflet_events.viewreset_idx[id];\n    delete this._map._leaflet_events.zoomanim_idx[id];\n  },\n  _getMiddleLatLng (marker1, marker2) {\n    var map = this._map,\n      p1 = map.project(marker1.getLatLng()),\n      p2 = map.project(marker2.getLatLng());\n\n    return map.unproject(p1._add(p2)._divideBy(2));\n  },\n  _recalcPositions (position) {\n    var markers = this._markers;\n\n    var changePos = false;\n    markers.forEach((marker, _position) => {\n      if (position === _position) {\n        changePos = true;\n      }\n      if (changePos) {\n        this._markers[_position].position += 1;\n      }\n    });\n  },\n  _recalcRelations () {\n    var markers = this._markers;\n\n    markers.forEach((marker, position) => {\n\n      marker._prev = this.markerAt(position - 1);\n      marker._next = this.markerAt(position + 1);\n\n      // first\n      if (position === 0) {\n        marker._prev = this.lastMarker();\n        marker._next = this.markerAt(1);\n      }\n\n      // last\n      if (position === markers.length - 1) {\n        marker._prev = this.markerAt(position - 1);\n        marker._next = this.markerAt(0);\n      }\n    });\n  },\n  _ids () {\n    var rslt = [];\n\n    for (let id in this._layers) {\n      rslt.push(id);\n    }\n\n    rslt.sort((a, b) => a - b);\n\n    return rslt;\n  },\n  select () {\n    if (this.isEmpty()) {\n      this._map._selectedMGroup = null;\n    } else {\n      const map = this._map;\n\n      if (this._isHole) {\n        map.getEHMarkersGroup().resetSelection();\n        map.getEMarkersGroup().resetSelection();\n        map.getEHMarkersGroup().setLastHole(this);\n      } else {\n        map.getEHMarkersGroup().resetSelection();\n        map.getEHMarkersGroup().resetLastHole();\n      }\n\n      this.getLayers()._each((marker) => {\n        marker.dragging.enable();\n        marker.selectIconInGroup();\n      });\n      this._selected = true;\n\n      this._map._selectedMGroup = this;\n      this._map.fire(EVENTS.marker_group_select);\n    }\n  },\n  isSelected() {\n    return this._selected;\n  },\n  isEmpty () {\n    return this.getLayers().length === 0;\n  },\n  resetSelection () {\n    this.getLayers()._each((marker) => {\n      marker.dragging.disable();\n      marker.unSelectIconInGroup();\n    });\n    this._selected = false;\n  }\n})\n","import {firstIcon, icon, dragIcon, middleIcon} from '../../marker-icons.js';\n\nimport EVENTS from '../../event-names.js';\n\nvar size = 1;\nvar userAgent = navigator.userAgent.toLowerCase();\n\nif (userAgent.indexOf('ipad') !== -1 || userAgent.indexOf('iphone') !== -1) {\n  size = 2;\n}\n\nexport default L.Marker.extend({\n  _draggable: undefined, // an instance of L.Draggable\n  _oldLatLngState: undefined,\n  initialize(group, latlng, options = {}) {\n\n    options = Object.assign({\n      icon: icon,\n      draggable: false\n    }, options);\n\n    L.Marker.prototype.initialize.call(this, latlng, options);\n\n    this._mGroup = group;\n\n    this._isFirst = group.getLayers().length === 0;\n  },\n\n  group() {\n    return this._mGroup;\n  },\n\n  next() {\n    var next = this._next._next;\n    if (!this._next.isMiddle()) {\n      next = this._next;\n    }\n    return next;\n  },\n  prev() {\n    var prev = this._prev._prev;\n    if (!this._prev.isMiddle()) {\n      prev = this._prev;\n    }\n    return prev;\n  },\n  changePrevNextPos() {\n    if (this._prev.isMiddle()) {\n\n      var prevLatLng = this.group()._getMiddleLatLng(this.prev(), this);\n      var nextLatLng = this.group()._getMiddleLatLng(this, this.next());\n\n      this._prev.setLatLng(prevLatLng);\n      this._next.setLatLng(nextLatLng);\n    }\n  },\n  _resetIcon(_icon) {\n    if (this._hasFirstIcon()) {\n      return;\n    }\n    var ic = _icon || icon;\n\n    this.setIcon(ic);\n    this.prev().setIcon(ic);\n    this.next().setIcon(ic);\n  },\n\n  _addIconClass(className) {\n    L.DomUtil.addClass(this._icon, className);\n  },\n  _removeIconClass(className) {\n    L.DomUtil.removeClass(this._icon, className);\n  },\n  _hasFirstIcon() {\n    return this._icon && L.DomUtil.hasClass(this._icon, 'm-editor-div-icon-first');\n  },\n  isMiddle() {\n    return this._icon && L.DomUtil.hasClass(this._icon, 'm-editor-middle-div-icon')\n      && !L.DomUtil.hasClass(this._icon, 'leaflet-drag-target');\n  },\n  _setDragIcon() {\n    this._removeIconClass('m-editor-div-icon');\n    this.setIcon(dragIcon);\n  },\n  isPlain() {\n    return L.DomUtil.hasClass(this._icon, 'm-editor-div-icon');\n  },\n  _onceClick() {\n    if (this._isFirst) {\n      this.once('click', (e) => {\n        if (!this._hasFirstIcon()) {\n          return;\n        }\n        const map = this._map;\n        const mGroup = this.group();\n\n        if (mGroup._markers.length < 3) {\n          this._onceClick();\n          return;\n        }\n\n        this._isFirst = false;\n        this.setIcon(icon);\n        map.fire(EVENTS.join_path, {mGroup: mGroup});\n      });\n    }\n  },\n  isAcceptedToDelete() {\n    return this._map.options.notifyClickMarkerDeletePolygon &&\n      !this.isMiddle() &&\n      this.isSelectedInGroup() &&\n      this._map.getSelectedMarker() === this &&\n      this.group().hasMinimalMarkersLength();\n  },\n  needAcceptToDelete() {\n    return this._map.options.notifyClickMarkerDeletePolygon &&\n      !this.isMiddle() &&\n      this.isSelectedInGroup() &&\n      this._map.getSelectedMarker() !== this &&\n      this.group().hasMinimalMarkersLength();\n  },\n  _disallowToExecuteEvent() {\n    const map = this._map;\n    const selectedMGroup = map.getSelectedMGroup();\n\n    return selectedMGroup && selectedMGroup.hasFirstMarker() && selectedMGroup !== this.group();\n  },\n  _bindEvents() {\n\n    this.on('dragstart', e => {\n      this.group().setSelected(this);\n      this._oldLatLngState = e.target._latlng;\n\n      if (this._prev.isPlain()) {\n        this.group().setMiddleMarkers(this.position);\n      }\n\n      this._map.fire(EVENTS.marker_dragstart);\n\n      this.__dragging = true;\n    });\n\n    this.on('click', () => {\n      const mGroup = this.group();\n      const map = this._map;\n\n      if (this._disallowToExecuteEvent()) {\n        return;\n      }\n\n      if (this.needAcceptToDelete()) {\n        mGroup.setSelected(this);\n        map.msgHelper.msg(map.options.text.acceptDeletion, 'error', this);\n        return;\n      }\n\n      if (mGroup.hasFirstMarker() && this !== mGroup.getFirst()) {\n        return;\n      }\n\n      if (this._hasFirstIcon()) {\n        return;\n      }\n\n      mGroup.setSelected(this);\n      if (this._hasFirstIcon()) {\n        return;\n      }\n\n      if (mGroup.getFirst()._hasFirstIcon()) {\n        return;\n      }\n\n      if (!this.isSelectedInGroup()) {\n        mGroup.select();\n\n        if (this.isMiddle()) {\n          map.msgHelper.msg(map.options.text.clickToAddNewEdges, null, this);\n        } else {\n          map.msgHelper.msg(map.options.text.clickToRemoveAllSelectedEdges, null, this);\n        }\n\n        if (this.isAcceptedToDelete()) {\n          map.msgHelper.msg(map.options.text.acceptDeletion, 'error', this);\n        }\n\n        return;\n      }\n\n      if (this.isMiddle()) { //add vertex\n        mGroup.setMiddleMarkers(this.position);\n        this._resetIcon(icon);\n        mGroup.select();\n        map.msgHelper.msg(map.options.text.clickToRemoveAllSelectedEdges, null, this);\n\n        map.clearSelectedMarker();\n\n      } else { //remove vertex\n        if (!mGroup.getFirst()._hasFirstIcon() && !this.__wasDragged) {\n          map.msgHelper.hide();\n\n          mGroup.removeMarker(this);\n\n          if (mGroup.isEmpty()) {\n            if (mGroup._isHole) {\n              map.fire(EVENTS.hole_deleted);\n            } else {\n              map.fire(EVENTS.polygon_deleted);\n            }\n            map.msgHelper.hide();\n          }\n          mGroup.select();\n        }\n      }\n\n      this.__wasDragged = false;\n    });\n\n    this.on('mousedown', () => {\n      if (!this.dragging._enabled) {\n        return false;\n      }\n    });\n\n    this.on('mouseover', (e) => {\n      e.originalEvent.stopPropagation();\n\n      const selectedMarker = this._map.getSelectedMarker();\n      const selectedMarkerDragging = !!(selectedMarker && selectedMarker.__dragging);\n\n      if (this._disallowToExecuteEvent() || selectedMarkerDragging) {\n        return;\n      }\n\n      const map = this._map;\n      if (this.group().getFirst()._hasFirstIcon()) {\n        if (this.group().getLayers().length > 2) {\n          if (this._hasFirstIcon()) {\n            map.fire(EVENTS.first_marker_mouseover, {marker: this});\n          } else if (this === this.group()._lastMarker) {\n            map.fire(EVENTS.last_marker_dblclick_mouseover, {marker: this});\n          }\n        }\n      } else {\n        if (this.isSelectedInGroup()) {\n          if (this.isMiddle()) {\n            map.fire(EVENTS.selected_middle_marker_mouseover, {marker: this});\n          } else {\n            map.fire(EVENTS.selected_marker_mouseover, {marker: this});\n          }\n        } else {\n          map.fire(EVENTS.not_selected_marker_mouseover, {marker: this});\n        }\n      }\n      if (this.isAcceptedToDelete()) {\n        map.msgHelper.msg(map.options.text.acceptDeletion, 'error', this);\n      }\n    });\n    this.on('mouseout', (e) => {\n      e.originalEvent.stopPropagation();\n\n      const selectedMarker = this._map.getSelectedMarker();\n      const selectedMarkerDragging = !!(selectedMarker && selectedMarker.__dragging);\n\n      if (this._disallowToExecuteEvent() || selectedMarkerDragging) {\n        return;\n      }\n\n      this._map.fire(EVENTS.marker_mouseout);\n    });\n\n    this._onceClick();\n\n    this.on('dblclick', () => {\n      if (this._disallowToExecuteEvent()) {\n        return;\n      }\n\n      var mGroup = this.group();\n      if (mGroup && mGroup.getFirst() && mGroup.getFirst()._hasFirstIcon()) {\n        if (this === mGroup._lastMarker) {\n          mGroup.getFirst().fire('click');\n        }\n      }\n    });\n\n    this.on('drag', (e) => {\n      this._onDrag(e);\n    });\n\n    this.on('dragend', (e) => {\n\n      this.__wasDragged = true;\n      this.__dragging = false;\n      this._onDragEnd(e);\n    });\n  },\n\n  onAdd(map) {\n    L.Marker.prototype.onAdd.call(this, map);\n\n    this._bindEvents(map);\n  },\n  _onDrag(e) {\n    var marker = e.target;\n\n    marker.changePrevNextPos();\n\n    var map = this._map;\n    map._convertToEdit(map.getEMarkersGroup());\n\n    this._setDragIcon();\n\n    map.fire(EVENTS.drag_marker, {marker: this});\n  },\n  _onDragEnd() {\n\n    this.group().select();\n    this._map.fire(EVENTS.dragend_marker, {marker: this});\n\n    this._map.fire(EVENTS.selected_marker_mouseover, {marker: this});\n\n    this.resetStyle();\n  },\n  resetIcon() {\n    this._removeIconClass('m-editor-div-icon-drag');\n  },\n  unSelectIconInGroup() {\n    this._removeIconClass('group-selected');\n  },\n  _selectIconInGroup() {\n    if (!this.isMiddle()) {\n      this._addIconClass('m-editor-div-icon');\n    }\n    this._addIconClass('group-selected');\n  },\n  selectIconInGroup() {\n    if (this._prev) {\n      this._prev._selectIconInGroup();\n    }\n    this._selectIconInGroup();\n    if (this._next) {\n      this._next._selectIconInGroup();\n    }\n  },\n  isSelectedInGroup() {\n    return L.DomUtil.hasClass(this._icon, 'group-selected');\n  },\n  onRemove(map) {\n    this.off('mouseout');\n\n    L.Marker.prototype.onRemove.call(this, map);\n  },\n\n  resetStyle() {\n    this.resetIcon();\n    this.selectIconInGroup();\n  }\n});\n","import MsgHelper from '../extended/MsgHelper.js';\nimport m from '../utils/mobile.js';\n\nimport EVENTS from '../event-names.js';\n\nexport default function () {\n\n  this.touchZoom.disable();\n  this.doubleClickZoom.disable();\n\n  this.boxZoom.disable();\n  this.keyboard.disable();\n\n  var msgHelper = this.msgHelper = new MsgHelper({\n    defaultMsg: this.options.text.clickToStartDrawPolygonOnMap,\n  });\n\n  this.on('msgHelperAdded', () => {\n    var text = this.options.text;\n\n    this.on(EVENTS.marker_group_select, () => {\n\n      this.off(EVENTS.not_selected_marker_mouseover);\n      this.on(EVENTS.not_selected_marker_mouseover, (data) => {\n        msgHelper.msg(text.clickToSelectEdges, null, data.marker);\n      });\n\n      this.off(EVENTS.selected_marker_mouseover);\n      this.on(EVENTS.selected_marker_mouseover, (data) => {\n        msgHelper.msg(text.clickToRemoveAllSelectedEdges, null, data.marker);\n      });\n\n      this.off(EVENTS.selected_middle_marker_mouseover);\n      this.on(EVENTS.selected_middle_marker_mouseover, (data) => {\n        msgHelper.msg(text.clickToAddNewEdges, null, data.marker);\n      });\n\n      // on edit polygon\n      this.off(EVENTS.edit_polygon_mousemove);\n      this.on(EVENTS.edit_polygon_mousemove, (data) => {\n        msgHelper.msg(text.clickToDrawInnerEdges, null, data.layerPoint);\n      });\n\n      this.off(EVENTS.edit_polygon_mouseout);\n      this.on(EVENTS.edit_polygon_mouseout, () => {\n        msgHelper.hide();\n      });\n\n      // on view polygon\n      this.off(EVENTS.view_polygon_mousemove);\n      this.on(EVENTS.view_polygon_mousemove, (data) => {\n        msgHelper.msg(text.clickToEdit, null, data.layerPoint);\n      });\n\n      this.off(EVENTS.view_polygon_mouseout);\n      this.on(EVENTS.view_polygon_mouseout, () => {\n        msgHelper.hide();\n      });\n    });\n\n    // hide msg\n    this.off(EVENTS.marker_mouseout);\n    this.on(EVENTS.marker_mouseout, () => {\n      msgHelper.hide();\n    });\n\n    this.on(EVENTS.marker_dragstart, () => {\n      msgHelper.hide();\n    });\n\n    // on start draw polygon\n    this.off(EVENTS.first_marker_mouseover);\n    this.on(EVENTS.first_marker_mouseover, (data) => {\n      msgHelper.msg(text.clickToJoinEdges, null, data.marker);\n    });\n\n    // dblclick to join\n    this.off(EVENTS.last_marker_dblclick_mouseover);\n    this.on(EVENTS.last_marker_dblclick_mouseover, (data) => {\n      msgHelper.msg(text.dblclickToJoinEdges, null, data.marker);\n    });\n\n    this.on(EVENTS.join_path, (data) => {\n      if (data.marker) {\n        msgHelper.msg(this.options.text.clickToRemoveAllSelectedEdges, null, data.marker);\n      }\n    });\n  });\n\n  if (!m.isMobileBrowser()) {\n    this.addControl(msgHelper);\n  }\n}\n","export default L.Control.extend({\n  options: {\n    position: 'msgcenter',\n    defaultMsg: null\n  },\n  _onResizeEvent: null,\n  _titleContainer: null,\n\n  initialize (options) {\n    L.Util.setOptions(this, options);\n  },\n\n  onAdd (map) {\n    var corner = L.DomUtil.create('div', 'leaflet-bottom');\n    var container = L.DomUtil.create('div', 'leaflet-msg-editor');\n\n    map._controlCorners['msgcenter'] = corner;\n    map._controlContainer.appendChild(corner);\n\n    this._setContainer(container, map);\n    map.fire('msgHelperAdded', { control: this });\n\n    this._changePos();\n\n    this._bindEvents(map);\n\n    return container;\n  },\n  onRemove() {\n    this._unBindEvents(map);\n    document.body.removeChild(this._titlePosContainer);\n  },\n  _changePos () {\n    let controlCorner = this._map._controlCorners['msgcenter'];\n    if (controlCorner && controlCorner.children.length) {\n      let child = controlCorner.children[0].children[0];\n\n      if (!child) {\n        return;\n      }\n\n      let width = child.clientWidth;\n      if (width) {\n        controlCorner.style.left = (this._map._container.clientWidth - width) / 2 + 'px';\n      }\n    }\n  },\n  _unBindEvents() {\n    window.removeEventListener('resize', this._onResizeEvent);\n  },\n  _bindEvents () {\n    this._onResizeEvent = this._changePos.bind(this);\n    window.addEventListener('resize', this._onResizeEvent);\n    this._onResizeEvent = null;\n  },\n  _setContainer (container) {\n    this._titleContainer = L.DomUtil.create('div', 'leaflet-msg-container title-hidden');\n    this._titlePosContainer = L.DomUtil.create('div', 'leaflet-msg-container title-hidden');\n    container.appendChild(this._titleContainer);\n    document.body.appendChild(this._titlePosContainer);\n\n    if (this.options.defaultMsg !== null) {\n      L.DomUtil.removeClass(this._titleContainer, 'title-hidden');\n      this._titleContainer.innerHTML = this.options.defaultMsg;\n    }\n  },\n  getOffset (el) {\n    var _x = 0;\n    var _y = 0;\n    if (!this._map.isFullscreen || !this._map.isFullscreen()) {\n      while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\n        _x += el.offsetLeft;\n        _y += el.offsetTop;\n        el = el.offsetParent;\n      }\n    }\n    return { y: _y, x: _x };\n  },\n  msg (text, type, object) {\n    if (!text || !this._titlePosContainer) {\n      return;\n    }\n\n    if (object) {\n      L.DomUtil.removeClass(this._titlePosContainer, 'title-hidden');\n      L.DomUtil.removeClass(this._titlePosContainer, 'title-error');\n      L.DomUtil.removeClass(this._titlePosContainer, 'title-success');\n\n      this._titlePosContainer.innerHTML = text;\n\n      var point;\n\n      var offset = this.getOffset(this._map._container);\n\n      if (object instanceof L.Point) {\n        point = object;\n        point = this._map.layerPointToContainerPoint(point);\n      } else {\n        point = this._map.latLngToContainerPoint(object.getLatLng());\n      }\n\n      point.x += offset.x;\n      point.y += offset.y;\n\n      this._titlePosContainer.style.top = (point.y - 8) + \"px\";\n      this._titlePosContainer.style.left = (point.x + 10) + \"px\";\n\n      if (type) {\n        L.DomUtil.addClass(this._titlePosContainer, 'title-' + type);\n      }\n    } else {\n      L.DomUtil.removeClass(this._titleContainer, 'title-hidden');\n      L.DomUtil.removeClass(this._titleContainer, 'title-error');\n      L.DomUtil.removeClass(this._titleContainer, 'title-success');\n\n      this._titleContainer.innerHTML = text;\n\n      if (type) {\n        L.DomUtil.addClass(this._titleContainer, 'title-' + type);\n      }\n      this._changePos();\n    }\n  },\n  hide () {\n    if (this._titleContainer) {\n      L.DomUtil.addClass(this._titleContainer, 'title-hidden');\n    }\n\n    if (this._titlePosContainer) {\n      L.DomUtil.addClass(this._titlePosContainer, 'title-hidden');\n    }\n  },\n  getBtnContainer () {\n    return this._map._controlCorners['msgcenter'];\n  },\n  getBtnAt (pos) {\n    return this.getBtnContainer().child[pos];\n  },\n  disableBtn (pos) {\n    L.DomUtil.addClass(this.getBtnAt(pos), 'disabled');\n  },\n  enableBtn (pos) {\n    L.DomUtil.removeClass(this.getBtnAt(pos), 'disabled');\n  }\n});\n","Array.prototype.move = function(from, to) {\n  this.splice(to, 0, this.splice(from, 1)[0]);\n};\nArray.prototype._each = function(func) {\n  var length = this.length;\n  var i = 0;\n  for (; i < length; i++) {\n    func.call(this, this[i], i);\n  }\n};\nexport default Array;\n","import EVENTS from '../event-names.js';\n\nexport default L.MultiPolygon.extend({\n  initialize (latlngs, options) {\n    L.MultiPolygon.prototype.initialize.call(this, latlngs, options);\n\n    this.on('layeradd', (e) => {\n      var mViewStyle = this._map.options.style.view;\n      e.target.setStyle(Object.assign({\n        opacity: 0.7,\n        fillOpacity: 0.35,\n        color: '#00ABFF'\n      }, mViewStyle));\n\n      this._map._moveEPolygonOnTop();\n    });\n  },\n  isEmpty() {\n    return this.getLayers().length === 0;\n  },\n  onAdd (map) {\n    L.MultiPolygon.prototype.onAdd.call(this, map);\n\n    this.on('mousemove', (e) => {\n      map.fire(EVENTS.view_polygon_mousemove, { layerPoint: e.layerPoint });\n    });\n    this.on('mouseout', () => {\n      map.fire(EVENTS.view_polygon_mouseout);\n    });\n  },\n  onClick (e) {\n    const map = this._map;\n    const selectedMGroup = map.getSelectedMGroup();\n    const eMarkersGroup = map.getEMarkersGroup();\n    if ((selectedMGroup && selectedMGroup.getFirst() && selectedMGroup.getFirst()._hasFirstIcon() && !selectedMGroup.isEmpty())) {\n      const eMarkersGroup = map.getEMarkersGroup();\n      eMarkersGroup.set(e.latlng);\n      map._convertToEdit(eMarkersGroup);\n    } else {\n      // reset\n      if (map._getSelectedVLayer()) {\n        map._setEPolygon_To_VGroup();\n      } else {\n        map._addEPolygon_To_VGroup();\n      }\n      map.clear();\n      map.mode('draw');\n\n      map._hideSelectedVLayer(e.layer);\n\n      eMarkersGroup.restore(e.layer);\n      map._convertToEdit(eMarkersGroup);\n\n      eMarkersGroup.select();\n    }\n  },\n  onRemove (map) {\n    this.off('mouseover');\n    this.off('mouseout');\n\n    map.off(EVENTS.view_polygon_mousemove);\n    map.off(EVENTS.view_polygon_mouseout);\n  }\n});\n","export default L.FeatureGroup.extend({});\n","import ExtendedPolygon from '../../extended/Polygon.js';\n\nimport EVENTS from '../../event-names.js';\n\nexport default L.EditPloygon = ExtendedPolygon.extend({\n  _oldE: undefined, // to reuse event object after \"bad hole\" removing to build new hole\n  _k: 1, // to decrease 'diff' value which helps build a hole\n  _holes: [],\n  initialize (latlngs, options) {\n    L.Polygon.prototype.initialize.call(this, latlngs, options);\n\n    this.options.className = \"leaflet-clickable editable-polygon\";\n  },\n  _update (e) {\n    var marker = e.marker;\n\n    if (marker._mGroup._isHole) {\n      var markers = marker._mGroup._markers;\n      markers = markers.filter((marker) => !marker.isMiddle());\n      this._holes[marker._mGroup.position] = markers.map((marker) => marker.getLatLng());\n\n    }\n    this.redraw();\n  },\n  _removeHole (e) {\n    var holePosition = e.marker._mGroup.position;\n    this._holes.splice(holePosition, 1);\n\n    this._map.getEHMarkersGroup().removeLayer(e.marker._mGroup._leaflet_id);\n    this._map.getEHMarkersGroup().repos(e.marker._mGroup.position);\n\n    this.redraw();\n  },\n  onAdd (map) {\n    L.Polyline.prototype.onAdd.call(this, map);\n\n    map.off(EVENTS.before_add_marker);\n    map.on(EVENTS.before_add_marker, (e) => this._update(e));\n    map.off(EVENTS.drag_marker);\n    map.on(EVENTS.drag_marker, (e) => this._update(e));\n    map.off(EVENTS.delete_marker);\n    map.on(EVENTS.delete_marker, (e) => this._update(e));\n    map.off(EVENTS.delete_hole);\n    map.on(EVENTS.delete_hole, (e) => this._removeHole(e));\n\n    this.on('mousemove', (e) => {\n      map.fire(EVENTS.edit_polygon_mousemove, { layerPoint: e.layerPoint });\n    });\n\n    this.on('mouseout', () => map.fire(EVENTS.edit_polygon_mouseout));\n  },\n  onRemove (map) {\n    this.off('mousemove');\n    this.off('mouseout');\n\n    map.off(EVENTS.edit_polygon_mouseover);\n    map.off(EVENTS.edit_polygon_mouseout);\n\n    L.Polyline.prototype.onRemove.call(this, map);\n  },\n  addHole (hole) {\n    this._holes = this._holes || [];\n    this._holes.push(hole);\n\n    this.redraw();\n  },\n  hasHoles() {\n    return this._holes.length > 0;\n  }\n});\n","export default L.Polygon.extend({\n  isEmpty () {\n    var latLngs = this.getLatLngs();\n    return latLngs === null || latLngs === undefined || (latLngs && latLngs.length === 0);\n  },\n  getHoles () {\n    return this._holes;\n  },\n  clearHoles () {\n    this._holes = [];\n    this.redraw();\n  },\n  clear () {\n    this.clearHoles();\n\n    if (Array.isArray(this._latlngs) && this._latlngs[0] !== undefined) {\n      this.setLatLngs([[0,0],[0,0]]);\n    }\n  }\n})\n","import opts from '../../options.js';\n\nexport default L.Polyline.extend({\n  options: Object.assign(opts.style.drawLine, {\n    className: 'dash-line'\n  }),\n  _latlngToMove: undefined,\n  onAdd: function (map) {\n    L.Polyline.prototype.onAdd.call(this, map);\n    this.setStyle(map.options.style.drawLine);\n  },\n  addLatLng (latlng) {\n    if (this._latlngToMove) {\n      this._latlngToMove = undefined;\n    }\n\n    if (this._latlngs.length > 1) {\n      this._latlngs.splice(-1);\n    }\n\n    this._latlngs.push(L.latLng(latlng));\n\n    return this.redraw();\n  },\n  update (pos) {\n\n    if (!this._latlngToMove && this._latlngs.length) {\n      this._latlngToMove = L.latLng(pos);\n      this._latlngs.push(this._latlngToMove);\n    }\n    if (this._latlngToMove) {\n      this._latlngToMove.lat = pos.lat;\n      this._latlngToMove.lng = pos.lng;\n\n      this.redraw();\n    }\n    return this;\n  },\n  _addLine (line, group, isLastMarker) {\n    if (!isLastMarker) {\n      line.addTo(group);\n    }\n  },\n  clear () {\n    this.setLatLngs([]);\n  }\n});\n","import MarkerGroup from '../../modes/edit/marker-group.js';\n\nexport default L.FeatureGroup.extend({\n  _selected: false,\n  _lastHole: undefined,\n  _lastHoleToDraw: undefined,\n  addHoleGroup () {\n    this._lastHole = new MarkerGroup();\n    this._lastHole._isHole = true;\n    this._lastHole.addTo(this);\n\n    this._lastHole.position = this.getLength() - 1;\n\n    this._lastHoleToDraw = this._lastHole;\n\n    return this._lastHole;\n  },\n  getLength () {\n    return this.getLayers().length;\n  },\n  resetLastHole () {\n    this._lastHole = undefined;\n  },\n  setLastHole (layer) {\n    this._lastHole = layer;\n  },\n  getLastHole () {\n    return this._lastHole;\n  },\n  remove () {\n    this.eachLayer((hole) => {\n      while (hole.getLayers().length) {\n        hole.removeMarkerAt(0);\n      }\n    });\n  },\n  repos (position) {\n    this.eachLayer((layer) => {\n      if (layer.position >= position) {\n        layer.position -= 1;\n      }\n    });\n  },\n  resetSelection () {\n    this.eachLayer((layer) => {\n      layer.resetSelection();\n    });\n    this._selected = false;\n  }\n});\n","import Map from './map.js';\n\nwindow.LeafletEditor = Map;\n"],"sourceRoot":""}