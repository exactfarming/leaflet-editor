{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/event-names.js","webpack:///./src/js/marker-icons.js","webpack:///./src/js/modes/edit/marker-group.js","webpack:///./src/js/utils/mobile.js","webpack:///./src/js/options.js","webpack:///./src/js/map.js","webpack:///./src/js/base.js","webpack:///./src/js/modes/draw/events.js","webpack:///./src/js/utils/precision.js","webpack:///./src/js/extended/BaseMarkerGroup.js","webpack:///./src/js/modes/edit/marker.js","webpack:///./src/js/hooks/controls.js","webpack:///./src/js/extended/MsgHelper.js","webpack:///./src/js/utils/array.js","webpack:///./src/js/view/group.js","webpack:///./src/js/modes/draw/group.js","webpack:///./src/js/modes/edit/polygon.js","webpack:///./src/js/extended/Polygon.js","webpack:///./src/js/modes/draw/dashed-line.js","webpack:///./src/js/modes/edit/holesGroup.js","webpack:///./src/js/index.mapbox.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","start_add_new_polygon","start_add_new_hole","marker_group_clear","join_path","hole_created","polygon_created","polygon_selected","delete_marker","delete_polygon","map_cleared","last_marker_dblclick_mouseover","hole_deleted","polygon_deleted","first_marker_mouseover","selected_middle_marker_mouseover","selected_marker_mouseover","not_selected_marker_mouseover","marker_mouseout","drag_marker","dragend_marker","marker_dragstart","edit_polygon_mousemove","edit_polygon_mouseover","edit_polygon_mouseout","delete_hole","add_marker","marker_group_select","view_polygon_mousemove","view_polygon_mouseout","_mobile","size","navigator","userAgent","toLowerCase","_mobile2","default","isMobileBrowser","firstIcon","L","divIcon","className","iconSize","icon","dragIcon","middleIcon","icons","MarkerGroup","_BaseMarkerGroup2","extend","_isHole","_position","options","mIcon","mHoverIcon","initialize","layers","LayerGroup","this","_markers","onAdd","map","_map","_updateDELine","latlng","deLine","getDELine","_firstMarker","update","dashedEditLineGroup","addTo","hasMinimalMarkersLength","getLayers","filter","item","_icon","classList","contains","length","setSelected","marker","hasFirstMarker","setSelectedMarker","getLast","_oldSelectedMarker","_selectedMarker","getFirst","_hasFirstIcon","restore","layer","setAll","_latlngs","setAllHoles","_holes","_add","position","_this","arguments","undefined","isMode","addMarker","addLatLng","on","e","clear","_mGroup","_lastMarker","fire","_eventNames2","setMiddleMarker","setMiddleMarkers","set","latlngs","_this2","forEach","holes","_this3","hole","lastHGroup","getEHMarkersGroup","addHoleGroup","_each","_bindLineEvents","window","a","vendor","opera","check","test","substr","forceToDraw","notifyClickMarkerDeletePolygon","translations","removePolygon","removePoint","style","view","opacity","fillOpacity","dashArray","clickable","fill","stroke","color","weight","draw","startDraw","drawLine","fillColor","markerIcon","markerHoverIcon","errorLineStyle","smoothFactor","previewErrorLineStyle","text","acceptDeletion","clickToEdit","clickToAddNewEdges","clickToDrawInnerEdges","clickToJoinEdges","clickToRemoveAllSelectedEdges","clickToSelectEdges","dblclickToJoinEdges","clickToStartDrawPolygonOnMap","deleteSelectedEdges","rejectChanges","jsonWasLoaded","checkJson","loadJson","forgetToSave","zoom","worldCopyJump","geoJSONArea","Map","setLayers","viewGroup","_group2","editGroup","_group4","editPolygon","_polygon2","editMarkersGroup","_markerGroup2","_dashedLine2","editHoleMarkersGroup","_holesGroup2","removeLayers","removeLayer","id","_extends","_options2","controls","zoomControl","whenReady","removeControl","msgHelper","getVGroup","getEGroup","getEPolygon","getEMarkersGroup","getSelectedMGroup","_selectedMGroup","include","_base2","addInitHook","_controls2","_precision","hasSelectedVLayer","_getSelectedVLayer","_selectedVLayer","_modeType","_activeEditLayer","_errorTimeout","type","_setModeType","_clearEvents","_setMode","console","error","__mode_draw","_bindDrawEvents","_clearMap","setTimeout","saveState","isEmpty","_setEPolygon_To_VGroup","_addEPolygon_To_VGroup","geojson","toGeoJSON","geometry","geoJSON","areaFunc","turf","area","warn","sum","_props$precLatLng","precLatLng","vLayer","ePolygonLayer","selectedLayer","eArea","precisionGeoJSON","vArea","hArea","precision","getSelectedMarker","clearSelectedMarker","Error","polygon","clearLayers","createEditPolygon","json","geoJson","vGroup","_l","addLayer","_fitVBounds","_setSelectedVLayer","_clearSelectedVLayer","_hideSelectedVLayer","bringToBack","_showSelectedVLayer","_path","visibility","ePolygon","getHoles","getLatLngs","Array","isArray","concat","selectedVLayer","redraw","_convertToEdit","group","pointsArray","isMiddle","getLatLng","setLatLngs","setStyle","_container","remove","add","fitBounds","getBounds","padding","selectedMGroup","_unBindDrawEvents","_moveEPolygonOnTop","element","parentElement","insertAdjacentElement","_events2","_markerIcons","_eventNames","originalEvent","clientX","clientY","target","Marker","eMarkersGroup","_addMarker","startDrawStyle","firstMarker","ehMarkersGroup","lastHole","getLastHole","resetSelection","mGroup","resetLastHole","dragging","enable","select","onClick","msg","layerPoint","_ref","off","_openPopup","number","prec","arrayStrings","split","rslt","_prec","toPrecision","Number","_json$geometry","JSON","parse","stringify","coordinates","outlet","edge","Class","includes","Mixin","Events","_selected","_positionHash","_lastPosition","onRemove","push","move","removeMarker","splice","eachLayer","cb","markerAt","lastMarker","markers","b","prevMarker","_prev","nextMarker","_next","nextnextMarker","removeMarkerAt","_changePos","_marker","hasStartMarker","some","_recalcPositions","_getMiddleLatLng","draggable","_marker3","_recalcRelations","ids","_ids","_deleteEvents","_leaflet_events","viewreset_idx","zoomanim_idx","marker1","marker2","p1","project","p2","unproject","_divideBy","_this4","changePos","_this5","_layers","sort","setLastHole","selectIconInGroup","isSelected","unSelectIconInGroup","indexOf","_draggable","_oldLatLngState","_isFirst","next","prev","changePrevNextPos","prevLatLng","nextLatLng","setLatLng","_resetIcon","ic","setIcon","_addIconClass","DomUtil","addClass","_removeIconClass","removeClass","hasClass","_setDragIcon","isPlain","_onceClick","once","isAcceptedToDelete","isSelectedInGroup","needAcceptionToDelete","_bindEvents","_latlng","__wasDragged","hide","_enabled","_onDrag","_onDragEnd","resetStyle","resetIcon","_selectIconInGroup","touchZoom","disable","doubleClickZoom","boxZoom","keyboard","_MsgHelper2","defaultMsg","data","addControl","Control","_onResizeEvent","_titleContainer","Util","setOptions","corner","container","_controlCorners","_controlContainer","appendChild","_setContainer","control","_unBindEvents","document","body","removeChild","_titlePosContainer","controlCorner","children","child","width","clientWidth","left","removeEventListener","addEventListener","innerHTML","getOffset","el","_x","_y","isFullscreen","isNaN","offsetLeft","offsetTop","offsetParent","y","x","point","offset","Point","layerPointToContainerPoint","latLngToContainerPoint","top","getBtnContainer","getBtnAt","pos","disableBtn","enableBtn","from","to","func","MultiPolygon","mViewStyle","FeatureGroup","EditPloygon","_Polygon2","_oldE","_k","Polyline","_initWithHoles","_update","_removeHole","holePosition","_leaflet_id","repos","addHole","hasHoles","Polygon","latLngs","clearHoles","_options","_latlngToMove","latLng","lat","lng","_addLine","line","isLastMarker","_markerGroup","_lastHole","_lastHoleToDraw","getLength","LeafletEditor","_map2"],"mappings":"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","file":"js/index.mapbox.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","export default {\n  start_add_new_polygon: 'editor:start_add_new_polygon',\n  start_add_new_hole: 'editor:start_add_new_hole',\n  marker_group_clear: 'editor:marker_group_clear',\n  join_path: 'editor:__join_path',\n  hole_created: 'editor:polygon:hole_created',\n  polygon_created: 'editor:polygon:created',\n  polygon_selected: 'editor:polygon:selected',\n  delete_marker: 'editor:delete_marker',\n  delete_polygon: 'editor:delete_polygon',\n\n  map_cleared: 'editor:map_cleared',\n\n  last_marker_dblclick_mouseover: 'editor:last_marker_dblclick_mouseover',\n\n  hole_deleted: 'editor:polygon:hole_deleted',\n  polygon_deleted: 'editor:polygon:deleted',\n\n  first_marker_mouseover: 'editor:first_marker_mouseover',\n\n  selected_middle_marker_mouseover: 'editor:selected_middle_marker_mouseover',\n\n  selected_marker_mouseover: 'editor:selected_marker_mouseover',\n  not_selected_marker_mouseover: 'editor:not_selected_marker_mouseover',\n\n  marker_mouseout: 'editor:marker_mouseout',\n\n  drag_marker: 'editor:drag_marker',\n\n  dragend_marker: 'editor:dragend_marker',\n  marker_dragstart: 'editor:marker_dragstart',\n\n  edit_polygon_mousemove: 'editor:edit_polygon_mousemove',\n  edit_polygon_mouseover: 'editor:edit_polygon_mouseover',\n  edit_polygon_mouseout: 'editor:edit_polygon_mouseout',\n\n  delete_hole: 'editor:delete_hole',\n\n  add_marker: 'editor:add_marker',\n  marker_group_select: 'editor:marker_group_select',\n\n  view_polygon_mousemove: 'editor:view_polygon_mousemove',\n\n  view_polygon_mouseout: 'editor:view_polygon_mouseout'\n}\n","import m from './utils/mobile.js';\n\nvar size = 1;\nvar userAgent = navigator.userAgent.toLowerCase();\n\nif (m.isMobileBrowser()) {\n  size = 2;\n}\n\nexport var firstIcon = L.divIcon({\n  className: \"m-editor-div-icon-first\",\n  iconSize: [10 * size, 10 * size]\n});\n\nexport var icon = L.divIcon({\n  className: \"m-editor-div-icon\",\n  iconSize: [10 * size, 10 * size]\n});\n\nexport var dragIcon = L.divIcon({\n  className: \"m-editor-div-icon-drag\",\n  iconSize: [10 * size * 3, 10 * size * 3]\n});\n\nexport var middleIcon = L.divIcon({\n  className: \"m-editor-middle-div-icon\",\n  iconSize: [10 * size, 10 * size]\n\n});\n","import BaseMGroup from '../../extended/BaseMarkerGroup.js';\n\nimport EVENTS from '../../event-names.js';\n\nimport * as icons from '../../marker-icons.js';\n\nL.MarkerGroup = BaseMGroup.extend({\n  _isHole: false,\n  _position: null,\n  options: {\n    mIcon: null,\n    mHoverIcon: null\n  },\n  initialize (layers) {\n    L.LayerGroup.prototype.initialize.call(this, layers);\n\n    this._markers = [];\n  },\n  onAdd (map) {\n    this._map = map;\n  },\n  _updateDELine (latlng) {\n    const deLine = this.getDELine();\n    if (this._firstMarker) {\n      deLine.update(latlng);\n    }\n    return deLine;\n  },\n  getDELine () {\n    if (!this._map) {\n      this._map.dashedEditLineGroup.addTo(this._map);\n    }\n    return this._map.dashedEditLineGroup;\n  },\n  hasMinimalMarkersLength() {\n    return this.getLayers().filter((item) => {\n      return item._icon.classList.contains('m-editor-div-icon') && !item._icon.classList.contains('m-editor-middle-div-icon');\n    }).length <= 3;\n  },\n  setSelected (marker) {\n    var map = this._map;\n\n    if (this.hasFirstMarker()) {\n      map.setSelectedMarker(this.getLast());\n      map._oldSelectedMarker = map._selectedMarker;\n      return;\n    }\n\n    map._oldSelectedMarker = map._selectedMarker;\n    map.setSelectedMarker(marker);\n  },\n  getFirst () {\n    return this._firstMarker;\n  },\n  getLast () {\n    if (this.hasFirstMarker()) {\n      var layers = this.getLayers();\n      return layers[layers.length - 1];\n    }\n  },\n  hasFirstMarker () {\n    return this.getFirst() && this.getFirst()._hasFirstIcon();\n  },\n  restore (layer) {\n    this.setAll(layer._latlngs);\n    this.setAllHoles(layer._holes);\n  },\n  _add(latlng, position, options = {}) {\n\n    if (this._map.isMode('draw')) {\n      if (!this._firstMarker) {\n        options.icon = icons.firstIcon;\n      }\n    }\n\n    var marker = this.addMarker(latlng, position, options);\n\n    this.getDELine().addLatLng(latlng);\n\n    if (this.getFirst()._hasFirstIcon()) {\n      this._map.on('mousemove', (e) => {\n        this._updateDELine(e.latlng);\n      });\n    } else {\n      this.getDELine().clear();\n    }\n\n    if (marker._mGroup.getLayers().length > 2) {\n      if (marker._mGroup._firstMarker._hasFirstIcon() && marker === marker._mGroup._lastMarker) {\n        this._map.fire(EVENTS.last_marker_dblclick_mouseover, {marker: marker});\n      }\n    }\n\n    return marker;\n  },\n  setMiddleMarker (position) {\n    this.addMarker(position, null, {icon: icons.middleIcon});\n  },\n  setMiddleMarkers (position) {\n    this.setMiddleMarker(position);\n    this.setMiddleMarker(position + 2);\n  },\n  set (latlng, position, options) {\n    return this._add(latlng, position, options);\n  },\n  setAll (latlngs) {\n    latlngs.forEach((latlng, position) => {\n      this.set(latlng, position);\n    });\n\n    this.getFirst().fire('click');\n  },\n  setAllHoles (holes) {\n    holes.forEach((hole) => {\n      var lastHGroup = this._map.getEHMarkersGroup().addHoleGroup();\n\n      hole._each((latlng, position) => {\n        lastHGroup.set(latlng, position);\n      });\n\n      lastHGroup.getFirst().fire('click');\n    });\n  },\n  _bindLineEvents: undefined\n});\n\nconst MarkerGroup = L.MarkerGroup;\nexport default MarkerGroup;\n","export default {\n  isMobileBrowser (navigator = window.navigator) {\n    const a = navigator.userAgent || navigator.vendor || window.opera;\n    var check = false;\n\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) {\n      check = true;\n    }\n\n    return check;\n  }\n};\n","const viewColor = '#0aaec9';\nconst drawColor = '#00cd00';\nconst weight = 3;\n\nexport default {\n  forceToDraw: true,\n  notifyClickMarkerDeletePolygon: false,\n  translations: {\n    removePolygon: 'remove polygon',\n    removePoint: 'remove point'\n  },\n  style: {\n    view: {\n      opacity: 0.5,\n      fillOpacity: 0.2,\n      dashArray: null,\n      clickable: false,\n      fill: true,\n      stroke: true,\n      color: viewColor,\n      weight: weight\n    },\n    draw: {\n      opacity: 0.5,\n      fillOpacity: 0.2,\n      dashArray: '5, 10',\n      clickable: true,\n      fill: true,\n      stroke: true,\n      color: drawColor,\n      weight: weight\n    },\n    startDraw: {},\n    drawLine: {\n      opacity: 0.7,\n      fill: false,\n      fillColor: drawColor,\n      color: drawColor,\n      weight: weight,\n      dashArray: '5, 10',\n      stroke: true,\n      clickable: false\n    }\n  },\n  markerIcon: undefined,\n  markerHoverIcon: undefined,\n  errorLineStyle: {\n    color: 'red',\n    weight: 3,\n    opacity: 1,\n    smoothFactor: 1\n  },\n  previewErrorLineStyle: {\n    color: 'red',\n    weight: 3,\n    opacity: 1,\n    smoothFactor: 1,\n    dashArray: '5, 10'\n  },\n  text: {\n    removePolygon: 'Remove polygon',\n    acceptDeletion: 'Click again to remove polygon',\n    clickToEdit: 'click to edit',\n    clickToAddNewEdges: '<div>click&nbsp;&nbsp;<div class=\\'m-editor-middle-div-icon static group-selected\\'></div>&nbsp;&nbsp;to add new edges</div>',\n    clickToDrawInnerEdges: 'click to draw inner edges',\n    clickToJoinEdges: 'click to join edges',\n    clickToRemoveAllSelectedEdges: '<div>click&nbsp;&nbsp;&nbsp;&nbsp;<div class=\\'m-editor-div-icon static group-selected\\'></div>&nbsp;&nbsp;to remove edge&nbsp;&nbsp;or<br>click&nbsp;&nbsp;<i class=\\'fa fa-trash\\'></i>&nbsp;&nbsp;to remove all selected edges</div>',\n    clickToSelectEdges: '<div>click&nbsp;&nbsp;&nbsp;&nbsp;<div class=\\'m-editor-div-icon static\\'></div>&nbsp;/&nbsp;<div class=\\'m-editor-middle-div-icon static\\'></div>&nbsp;&nbsp;to select edges</div>',\n    dblclickToJoinEdges: 'double click to join edges',\n    clickToStartDrawPolygonOnMap: 'click to start draw polygon on map',\n    deleteSelectedEdges: 'deleted selected edges',\n    rejectChanges: 'reject changes',\n    jsonWasLoaded: 'JSON was loaded',\n    checkJson: 'check JSON',\n    loadJson: 'load GeoJSON',\n    forgetToSave: 'Save changes by pressing outside of polygon',\n    zoom: 'Zoom'\n  },\n  worldCopyJump: true,\n  geoJSONArea: null\n};\n","import BaseMap from './base.js';\nimport ControlsHook from './hooks/controls.js';\n\nimport opts from './options.js';\n\nimport './utils/array.js';\nimport ViewGroup from './view/group.js';\nimport DrawGroup from './modes/draw/group.js';\nimport EditPolygon from './modes/edit/polygon.js';\nimport MarkerGroup from './modes/edit/marker-group.js';\nimport DashedEditLineGroup from './modes/draw/dashed-line.js';\nimport HolesGroup from './modes/edit/holesGroup.js';\n\n// function Map(type) {\n//   // let Instance;\n//   //\n//   // try {\n//   //   Instance = (type === 'mapbox') ? L.mapbox.Map : L.Map;\n//   // } catch (e) {\n//   //   console.error('\"L.mapbox\" in undefined. Load mapbox script.');\n//   //   console.warn('Fallback to leaflet');\n//\n//     // Instance = L.Map;\n//   // }\n//\n//   Instance = L.Map;\n//\n//   let map = Instance.extend(Object.assign(Base, {\n//     viewGroup: null,\n//     editGroup: null,\n//     editPolygon: null,\n//     editMarkersGroup: null,\n//     dashedEditLineGroup: null,\n//     editHoleMarkersGroup: null,\n//     setLayers() {\n//       this.viewGroup = new ViewGroup([]);\n//       this.editGroup = new DrawGroup([]);\n//       this.editPolygon = new EditPolygon([]);\n//       this.editMarkersGroup = new MarkerGroup([]);\n//       this.dashedEditLineGroup = new DashedEditLineGroup([]);\n//       this.editHoleMarkersGroup = new HolesGroup([]);\n//\n//       this.viewGroup.addTo(this);\n//       this.editGroup.addTo(this);\n//       this.editPolygon.addTo(this);\n//       this.editMarkersGroup.addTo(this);\n//       this.dashedEditLineGroup.addTo(this);\n//       this.editHoleMarkersGroup.addTo(this);\n//     },\n//     removeLayers() {\n//       this.removeLayer(this.viewGroup);\n//       this.removeLayer(this.editGroup);\n//       this.removeLayer(this.editPolygon);\n//       this.removeLayer(this.editMarkersGroup);\n//       this.removeLayer(this.dashedEditLineGroup);\n//       this.removeLayer(this.editHoleMarkersGroup);\n//     },\n//     initialize(id, options) {\n//       if (options.text) {\n//         Object.assign(opts.text, options.text);\n//         delete options.text;\n//       }\n//\n//       let controls = options.controls;\n//       if (controls) {\n//         if (controls.zoom === false) {\n//           options.zoomControl = false;\n//         }\n//       }\n//\n//       if (options.style) {\n//         if (options.style.draw) {\n//           Object.assign(opts.style.draw, options.style.draw);\n//         }\n//         //delete options.style.draw;\n//         if (options.style.view) {\n//           Object.assign(opts.style.view, options.style.view);\n//         }\n//         if (options.style.startDraw) {\n//           Object.assign(opts.style.startDraw, options.style.startDraw);\n//         }\n//         if (options.style.drawLine) {\n//           Object.assign(opts.style.drawLine, options.style.drawLine);\n//         }\n//         delete options.style;\n//       }\n//\n//       Object.assign(this.options, opts, options);\n//       //L.Util.setOptions(this, opts);\n//\n//       if (type === 'mapbox') {\n//         L.mapbox.Map.prototype.initialize.call(this, id, this.options.mapboxId, this.options);\n//       } else {\n//         L.Map.prototype.initialize.call(this, id, this.options);\n//       }\n//\n//       this.whenReady(() => {\n//         this.setLayers();\n//       });\n//\n//       if (this.options.forceToDraw) {\n//         this.mode('draw');\n//       }\n//\n//       this.on('unload', () => {\n//         this.removeControl(this.msgHelper);\n//         this.removeLayers();\n//       });\n//     },\n//     getVGroup() {\n//       return this.viewGroup;\n//     },\n//     getEGroup() {\n//       return this.editGroup;\n//     },\n//     getEPolygon() {\n//       return this.editPolygon;\n//     },\n//     getEMarkersGroup() {\n//       return this.editMarkersGroup;\n//     },\n//     getDELine() {\n//       return this.dashedEditLineGroup;\n//     },\n//     getEHMarkersGroup() {\n//       return this.editHoleMarkersGroup;\n//     },\n//     getSelectedMGroup() {\n//       return this._selectedMGroup;\n//     }\n//   }));\n//\n//   map.addInitHook(ControlsHook);\n//\n//   return map;\n// }\n\n// class BaseMap extends L.Map {}\n\nlet Map = L.Map.extend({\n  setLayers() {\n    this.viewGroup = new ViewGroup([]);\n    this.editGroup = new DrawGroup([]);\n    this.editPolygon = new EditPolygon([]);\n    this.editMarkersGroup = new MarkerGroup([]);\n    this.dashedEditLineGroup = new DashedEditLineGroup([]);\n    this.editHoleMarkersGroup = new HolesGroup([]);\n\n    this.viewGroup.addTo(this);\n    this.editGroup.addTo(this);\n    this.editPolygon.addTo(this);\n    this.editMarkersGroup.addTo(this);\n    this.dashedEditLineGroup.addTo(this);\n    this.editHoleMarkersGroup.addTo(this);\n  },\n\n  removeLayers() {\n    this.removeLayer(this.viewGroup);\n    this.removeLayer(this.editGroup);\n    this.removeLayer(this.editPolygon);\n    this.removeLayer(this.editMarkersGroup);\n    this.removeLayer(this.dashedEditLineGroup);\n    this.removeLayer(this.editHoleMarkersGroup);\n  },\n\n  initialize(id, options) {\n    this.viewGroup = null;\n\n    this.editGroup = null;\n\n    this.editPolygon = null;\n\n    this.editMarkersGroup = null;\n\n    this.dashedEditLineGroup = null;\n\n    this.editHoleMarkersGroup = null;\n\n    if (options.text) {\n      Object.assign(opts.text, options.text);\n      delete options.text;\n    }\n\n    let controls = options.controls;\n    if (controls) {\n      if (controls.zoom === false) {\n        options.zoomControl = false;\n      }\n    }\n\n    if (options.style) {\n      if (options.style.draw) {\n        Object.assign(opts.style.draw, options.style.draw);\n      }\n      //delete options.style.draw;\n      if (options.style.view) {\n        Object.assign(opts.style.view, options.style.view);\n      }\n      if (options.style.startDraw) {\n        Object.assign(opts.style.startDraw, options.style.startDraw);\n      }\n      if (options.style.drawLine) {\n        Object.assign(opts.style.drawLine, options.style.drawLine);\n      }\n      delete options.style;\n    }\n\n    Object.assign(this.options, opts, options);\n\n    L.Map.prototype.initialize.call(this, id, options);\n\n    this.whenReady(() => {\n      this.setLayers();\n    });\n\n    if (this.options.forceToDraw) {\n      this.mode('draw');\n    }\n\n    this.on('unload', () => {\n      this.removeControl(this.msgHelper);\n      this.removeLayers();\n    });\n  },\n\n  getVGroup() {\n    return this.viewGroup;\n  },\n\n  getEGroup() {\n    return this.editGroup;\n  },\n\n  getEPolygon() {\n    return this.editPolygon;\n  },\n\n  getEMarkersGroup() {\n    return this.editMarkersGroup;\n  },\n\n  getDELine() {\n    return this.dashedEditLineGroup;\n  },\n\n  getEHMarkersGroup() {\n    return this.editHoleMarkersGroup;\n  },\n\n  getSelectedMGroup() {\n    return this._selectedMGroup;\n  }\n});\n\nMap.include(BaseMap);\nMap.addInitHook(ControlsHook);\n\nexport default Map;\n\n","import DrawEvents from './modes/draw/events.js';\n\nimport {\n  precision,\n  precisionGeoJSON\n} from './utils/precision.js';\n\nimport EVENTS from './event-names.js';\n\nimport MarkerGroup from './modes/edit/marker-group.js';\n\nexport default Object.assign({\n\n  hasSelectedVLayer() {\n    return this._getSelectedVLayer() !== undefined;\n  },\n\n  _selectedMarker: undefined,\n  _selectedVLayer: undefined,\n  _oldSelectedMarker: undefined,\n  _modeType: 'draw',\n  _activeEditLayer: undefined,\n  _errorTimeout: null,\n\n  mode(type) {\n    if (this[`__mode_${type}`]) {\n      this._setModeType(type);\n\n      this._clearEvents();\n\n\n      type = this[`__mode_${type}`]() || type;\n\n      this._setMode(type);\n    } else {\n      console.error(`Mode \"${type}\" is not defined`);\n    }\n  },\n  isMode(type) {\n    return type === this._modeType;\n  },\n  __mode_draw() {\n    this._bindDrawEvents();\n  },\n  clear() {\n    this._clearEvents();\n    this._clearMap();\n    setTimeout(() => {\n      this.fire(EVENTS.map_cleared);\n    }, 0);\n  },\n  /**\n   *\n   * The main idea is to save EPolygon to VGroup when:\n   * 1) user add new polygon\n   * 2) when user edit polygon\n   *\n   * */\n  saveState() {\n\n    let ePolygon = this.getEPolygon();\n\n    if (!ePolygon.isEmpty()) {\n      if (this._getSelectedVLayer()) {\n        this._setEPolygon_To_VGroup();\n      } else {\n        this._addEPolygon_To_VGroup();\n      }\n    }\n\n    this.clear();\n    this.mode('draw');\n\n    let geojson = this.getVGroup().toGeoJSON();\n    if (geojson.geometry) {\n      return geojson.geometry;\n    }\n    return {};\n  },\n  geoJSONArea(geoJSON) {\n    let areaFunc = this.options.geoJSONArea || window.turf && window.turf.area;\n\n    if (!areaFunc) {\n      console.warn('Warning: Implement \"geoJSONArea\" function ( leaflet-editor )');\n    }\n\n    return (areaFunc) ? areaFunc(geoJSON) : 0;\n  },\n  /**\n   * Get editable area with precision of lat, lng\n   * Default precision is 6 (precLatLng)\n   *\n   * */\n  area(props = {}) {\n\n    let {precLatLng = 6} = props;\n    let vLayer = this.getVGroup();\n    let ePolygonLayer = this.getEPolygon();\n    let selectedLayer = this._getSelectedVLayer();\n\n    let sum = 0;\n\n    let eArea = (!ePolygonLayer.isEmpty()) ? this.geoJSONArea(precisionGeoJSON(ePolygonLayer.toGeoJSON(), precLatLng)) : 0;\n    let vArea = this.geoJSONArea(precisionGeoJSON(vLayer.toGeoJSON(), precLatLng));\n\n    let hArea = (selectedLayer) ? this.geoJSONArea(precisionGeoJSON(selectedLayer.toGeoJSON(), precLatLng)) : 0;\n\n    if (this.hasSelectedVLayer() && eArea > 0) {\n      vArea -= hArea;\n    }\n\n    sum = (eArea > 0) ? (vArea + eArea) : vArea;\n\n    return precision(sum, precLatLng);\n  },\n  getSelectedMarker() {\n    return this._selectedMarker;\n  },\n  clearSelectedMarker() {\n    this._selectedMarker = null;\n  },\n  setSelectedMarker(marker) {\n    if (!marker || !marker._icon) {\n      throw new Error('Error in method \"setSelectedMarker\". Check marker instance');\n    }\n    this._selectedMarker = marker;\n  },\n  removePolygon(polygon) {\n    this.getEMarkersGroup().clearLayers();\n    this.getEHMarkersGroup().clearLayers();\n\n    polygon.clear();\n\n    this.clearSelectedMarker();\n    this._setEPolygon_To_VGroup();\n  },\n  createEditPolygon(json) {\n    let geoJson = L.geoJson(json);\n\n    //avoid to lose changes\n    if (this._getSelectedVLayer()) {\n      this._setEPolygon_To_VGroup();\n    } else {\n      this._addEPolygon_To_VGroup();\n    }\n\n    this.clear();\n\n    let layer = geoJson.getLayers()[0];\n\n    if (layer) {\n      let layers = layer.getLayers();\n      let vGroup = this.getVGroup();\n      for (let i = 0; i < layers.length; i++) {\n        let _l = layers[i];\n        vGroup.addLayer(_l);\n      }\n    }\n\n    this.mode('draw');\n\n    this._fitVBounds();\n\n    return geoJson;\n  },\n\n  _getSelectedVLayer() {\n    return this._selectedVLayer;\n  },\n  _setSelectedVLayer(layer) {\n    this._selectedVLayer = layer;\n  },\n  _clearSelectedVLayer() {\n    this._selectedVLayer = undefined;\n  },\n  _hideSelectedVLayer(layer) {\n    layer.bringToBack();\n\n    if (!layer) {\n      return;\n    }\n    //show last layer\n    this._showSelectedVLayer(this._getSelectedVLayer());\n    //hide\n    this._setSelectedVLayer(layer);\n    layer._path.style.visibility = 'hidden';\n  },\n  _showSelectedVLayer(layer = this._selectedVLayer) {\n    if (!layer) {\n      return;\n    }\n    layer._path.style.visibility = '';\n  },\n  _addEPolygon_To_VGroup() {\n    let vGroup = this.getVGroup();\n    let ePolygon = this.getEPolygon();\n\n    let holes = ePolygon.getHoles();\n    let latlngs = ePolygon.getLatLngs();\n\n    if (latlngs.length <= 2) {\n      return;\n    }\n\n    if (Array.isArray(holes)) {\n      if (holes) {\n        latlngs = [latlngs].concat(holes);\n      }\n    }\n    vGroup.addLayer(L.polygon(latlngs));\n  },\n  _setEPolygon_To_VGroup() {\n    let ePolygon = this.getEPolygon();\n    let selectedVLayer = this._getSelectedVLayer();\n\n    if (!selectedVLayer) {\n      return;\n    }\n\n    selectedVLayer._latlngs = ePolygon.getLatLngs();\n    selectedVLayer._holes = ePolygon.getHoles();\n    selectedVLayer.redraw();\n  },\n\n  _convertToEdit(group) {\n    if (group instanceof MarkerGroup) {\n      let ePolygon = this.getEPolygon();\n      let layers = group.getLayers();\n      layers = layers.filter((layer) => !layer.isMiddle());\n      let pointsArray = layers.map((layer) => layer.getLatLng());\n\n      let holes = ePolygon.getHoles();\n\n      if (holes) {\n        pointsArray = [pointsArray].concat(holes);\n      }\n\n      ePolygon.setLatLngs(pointsArray);\n      ePolygon.redraw();\n\n      return ePolygon;\n    }\n  },\n  _setMode(type) {\n    let options = this.options;\n    this.getEPolygon().setStyle(options.style[type]);\n  },\n\n  _setModeType(type) {\n    try {\n      this._container.classList.remove(`map-${this._modeType}`);\n      this._container.classList.add(`map-${this._modeType}`);\n\n      this._modeType = type;\n    } catch (e) {\n      console.error('Check \"_setModeType\"');\n    }\n  },\n  _fitVBounds() {\n    if (this.getVGroup().getLayers().length !== 0) {\n      this.fitBounds(this.getVGroup().getBounds(), {padding: [30, 30]});\n    }\n  },\n  _clearMap() {\n    this.getEGroup().clearLayers();\n    this.getEPolygon().clear();\n    this.getEMarkersGroup().clear();\n    let selectedMGroup = this.getSelectedMGroup();\n\n    if (selectedMGroup) {\n      selectedMGroup.getDELine().clear();\n    }\n\n    this.getEHMarkersGroup().clearLayers();\n\n    this._activeEditLayer = undefined;\n\n    this._showSelectedVLayer();\n    this._clearSelectedVLayer();\n    this.clearSelectedMarker();\n  },\n  _clearEvents() {\n    this._unBindDrawEvents();\n  },\n  _moveEPolygonOnTop() {\n    const ePolygon = this.getEPolygon();\n    const element = ePolygon._container;\n\n    if (element) {\n      element.parentElement.insertAdjacentElement('beforeend', element);\n    }\n  }\n}, DrawEvents);\n","import { firstIcon, middleIcon } from '../../marker-icons.js';\nimport EVENTS from '../../event-names.js';\n\nexport default {\n  _bindDrawEvents () {\n    this._unBindDrawEvents();\n\n    // click on map\n    this.on('click', (e) => {\n      // bug fix\n      if (e.originalEvent && e.originalEvent.clientX === 0 && e.originalEvent.clientY === 0) {\n        return;\n      }\n\n      if (e.target instanceof L.Marker) {\n        return;\n      }\n\n      var eMarkersGroup = e.target.getEMarkersGroup();\n\n      // start add new polygon\n      if (eMarkersGroup.isEmpty()) {\n        this._addMarker(e);\n\n        this.fire(EVENTS.start_add_new_polygon);\n        var startDrawStyle = this.options.style['startDraw'];\n\n        if (startDrawStyle) {\n          this.getEPolygon().setStyle(startDrawStyle);\n        }\n\n        this._clearSelectedVLayer();\n\n        this._selectedMGroup = eMarkersGroup;\n        return false;\n      }\n\n      // continue with new polygon\n      var firstMarker = eMarkersGroup.getFirst();\n\n      if (firstMarker && firstMarker._hasFirstIcon()) {\n        if (!(e.target instanceof L.Marker)) {\n          this._addMarker(e);\n        }\n        return false;\n      }\n\n      // start draw new hole polygon\n      var ehMarkersGroup = this.getEHMarkersGroup();\n      var lastHole = ehMarkersGroup.getLastHole();\n      if (firstMarker && !firstMarker._hasFirstIcon()) {\n        if ((e.target.getEPolygon()._path === e.originalEvent.target)) {\n          if (!lastHole || !lastHole.getFirst() || !lastHole.getFirst()._hasFirstIcon()) {\n            this.clearSelectedMarker();\n\n            var lastHGroup = ehMarkersGroup.addHoleGroup();\n            lastHGroup.set(e.latlng, null, { icon: firstIcon });\n\n            this._selectedMGroup = lastHGroup;\n            this.fire(EVENTS.start_add_new_hole);\n\n            this.getEHMarkersGroup().resetSelection();\n            this.getEMarkersGroup().resetSelection();\n\n            return false;\n          }\n        }\n      }\n\n      // continue with new hole polygon\n      if (lastHole && !lastHole.isEmpty() && lastHole.hasFirstMarker()) {\n        ehMarkersGroup.getLastHole().set(e.latlng);\n\n        return false;\n      }\n\n      // reset\n\n      if (this._getSelectedVLayer()) {\n        this._setEPolygon_To_VGroup();\n      } else {\n        this._addEPolygon_To_VGroup();\n      }\n      this.clear();\n      this.mode('draw');\n\n      this.fire(EVENTS.marker_group_clear);\n    });\n\n    this.on(EVENTS.join_path, (e) => {\n      var eMarkersGroup = e.mGroup;\n\n      if (!eMarkersGroup) {\n        return;\n      }\n\n      if (eMarkersGroup._isHole) {\n        this.getEHMarkersGroup().resetLastHole();\n      }\n      //1. set middle markers\n      var layers = eMarkersGroup.getLayers();\n\n      var position = -1;\n      layers.forEach(() => {\n        var marker = eMarkersGroup.addMarker(position, null, { icon: middleIcon });\n        position = marker.position + 2;\n      });\n\n      //2. clear line\n      eMarkersGroup.getDELine().clear();\n\n      eMarkersGroup.getLayers()._each((marker) => {\n        marker.dragging.enable();\n      });\n\n      eMarkersGroup.select();\n\n      //reset style if 'startDraw' was used\n      this.getEPolygon().setStyle(this.options.style.draw);\n\n\n      if (eMarkersGroup._isHole) {\n        this.fire(EVENTS.hole_created);\n      } else {\n        this.fire(EVENTS.polygon_created);\n      }\n    });\n\n    var vGroup = this.getVGroup();\n\n    vGroup.on('click', (e) => {\n      vGroup.onClick(e);\n\n      this.msgHelper.msg(this.options.text.clickToDrawInnerEdges, null, e.layerPoint);\n      this.fire(EVENTS.polygon_selected);\n    });\n\n    this.on(EVENTS.delete_marker, () => {\n      this._convertToEdit(this.getEMarkersGroup());\n    });\n    this.on(EVENTS.delete_polygon, () => {\n      this.getEHMarkersGroup().remove();\n    });\n  },\n  _addMarker ({ latlng }) {\n\n    var eMarkersGroup = this.getEMarkersGroup();\n\n    var marker = eMarkersGroup.set(latlng);\n\n    this._convertToEdit(eMarkersGroup);\n\n    return marker;\n  },\n  _unBindDrawEvents () {\n    this.off('click');\n    this.getVGroup().off('click');\n\n    this.off('dblclick');\n\n    this.getDELine().clear();\n\n    this.off(EVENTS.join_path);\n\n    if (this._openPopup) {\n      delete this._openPopup;\n    }\n  }\n}\n","export const precision = function(number, prec) {\n  let arrayStrings = (`${number}`).split('.');\n  prec = prec || 0;\n\n  if (!number || arrayStrings.length === 1) {\n    return number;\n  }\n\n  let isFloat = arrayStrings[1].length > 0;\n\n  let rslt = 0;\n\n  if (isFloat) {\n    let _prec = (arrayStrings[1].length < prec) ? arrayStrings[1].length : prec;\n    rslt = number.toPrecision(arrayStrings[0].length + _prec);\n  }\n\n  return Number(rslt);\n};\n\nexport const precisionGeoJSON = function(geoJSON, prec = 0) {\n  let json;\n  if (geoJSON === null || geoJSON === undefined) {\n    throw new Error('Please, make sure that first arguments is geoJSON');\n  }\n\n  json = JSON.parse(JSON.stringify(geoJSON));\n\n  let { geometry: { type, coordinates } } = json;\n\n  if (!Array.isArray(coordinates)) {\n    throw new Error('Please, make sure that geoJSON has correct structure');\n  }\n\n  if (type === 'Polygon') {\n    if (prec > 0) {\n      coordinates.forEach(outlet => {\n        outlet.forEach(edge => {\n          edge[0] = precision(edge[0], prec);\n          edge[1] = precision(edge[1], prec);\n        });\n      });\n    }\n  }\n\n  if (type === 'MultiPolygon') {\n    if (prec > 0) {\n      coordinates.forEach(polygon => {\n        polygon.forEach(outlet => {\n          outlet.forEach(edge => {\n            edge[0] = precision(edge[0], prec);\n            edge[1] = precision(edge[1], prec);\n          });\n        });\n      });\n    }\n  }\n\n\n  return json;\n};","import Marker from '../modes/edit/marker.js';\nimport * as icons from '../marker-icons.js';\n\nimport EVENTS from '../event-names.js';\n\nexport default L.Class.extend({\n  includes: L.Mixin.Events,\n\n  _selected: false,\n  _lastMarker: undefined,\n  _firstMarker: undefined,\n  _positionHash: undefined,\n  _lastPosition: 0,\n  _markers: [],\n  onRemove () {\n    this.clearLayers();\n  },\n  clearLayers () {\n    this._markers.forEach((marker) => {\n      this._map.removeLayer(marker);\n    });\n    this._markers = [];\n  },\n  addTo (map) {\n    map.addLayer(this);\n  },\n  addLayer (marker) {\n    this._map.addLayer(marker);\n    this._markers.push(marker);\n    if (marker.position != null) {\n      this._markers.move(this._markers.length - 1, marker.position);\n    }\n    marker.position = (marker.position != null) ? marker.position : this._markers.length - 1;\n  },\n  remove () {\n    var markers = this.getLayers();\n    markers._each((marker) => {\n      while (this.getLayers().length) {\n        this.removeMarker(marker);\n      }\n    });\n\n    var map = this._map;\n\n    if (this._isHole) {\n      map.fire(EVENTS.hole_deleted);\n    } else {\n      map.getVGroup().removeLayer(map._getSelectedVLayer());\n      map.fire(EVENTS.polygon_deleted);\n\n    }\n  },\n  removeLayer (marker) {\n    var position = marker.position;\n    this._map.removeLayer(marker);\n    this._markers.splice(position, 1);\n  },\n  getLayers () {\n    return this._markers;\n  },\n  eachLayer (cb) {\n    this._markers.forEach(cb);\n  },\n  markerAt (position) {\n    var rslt = this._markers[position];\n\n    if (position < 0) {\n      return this.firstMarker();\n    }\n\n    if (rslt === undefined) {\n      rslt = this.lastMarker();\n    }\n\n    return rslt;\n  },\n  firstMarker () {\n    return this._markers[0];\n  },\n  lastMarker () {\n    var markers = this._markers;\n    return markers[markers.length - 1];\n  },\n  removeMarker (marker) {\n    var b = !marker.isMiddle();\n\n    var prevMarker = marker._prev;\n    var nextMarker = marker._next;\n    var nextnextMarker = marker._next._next;\n    this.removeMarkerAt(marker.position);\n    this.removeMarkerAt(prevMarker.position);\n    this.removeMarkerAt(nextMarker.position);\n\n    var map = this._map;\n\n    if (this.getLayers().length > 0) {\n      this.setMiddleMarker(nextnextMarker.position);\n\n      if (b) {\n        map.fire(EVENTS.delete_marker, { marker: marker });\n      }\n    } else {\n      if (this._isHole) {\n        map.removeLayer(this);\n        map.fire(EVENTS.delete_hole, { marker: marker });\n      } else {\n        map.fire(EVENTS.delete_polygon);\n\n        map.removePolygon(map.getEPolygon());\n      }\n      map.fire(EVENTS.marker_group_clear);\n    }\n  },\n  removeMarkerAt (position) {\n    if (this.getLayers().length === 0) {\n      return;\n    }\n\n    var marker;\n    if (typeof position === 'number') {\n      marker = this.markerAt(position);\n    } else {\n      return;\n    }\n\n    var _changePos = false;\n    var markers = this._markers;\n    markers.forEach((_marker) => {\n      if (_changePos) {\n        _marker.position = (_marker.position === 0) ? 0 : _marker.position - 1;\n      }\n      if (_marker === marker) {\n        marker._prev._next = marker._next;\n        marker._next._prev = marker._prev;\n        _changePos = true;\n      }\n    });\n\n    this.removeLayer(marker);\n\n    if (markers.length < 5) {\n      this.clear();\n      if (!this._isHole) {\n        var map = this._map;\n        map.getEPolygon().clear();\n        map.getVGroup().removeLayer(map._getSelectedVLayer());\n      }\n    }\n  },\n  hasStartMarker() {\n    return !!this.getLayers().some(marker => marker._icon.classList.contains(icons.firstIcon.options.className));\n  },\n  addMarker (latlng, position, options) {\n    // 1. recalculate positions\n    if (typeof latlng === 'number') {\n      position = this.markerAt(latlng).position;\n      this._recalcPositions(position);\n\n      var prevMarker = (position - 1) < 0 ? this.lastMarker() : this.markerAt(position - 1);\n      var nextMarker = this.markerAt((position == -1) ? 1 : position);\n      latlng = this._getMiddleLatLng(prevMarker, nextMarker);\n    }\n\n    if (this.getLayers().length === 0) {\n      options.draggable = false;\n    }\n\n    if (this.getFirst()) {\n      options.draggable = !this.getFirst()._hasFirstIcon();\n    }\n\n    var marker = new Marker(this, latlng, options);\n    if (!this._firstMarker) {\n      this._firstMarker = marker;\n      this._lastMarker = marker;\n    }\n\n    if (position !== undefined) {\n      marker.position = position;\n    }\n\n    //if (this.getFirst()._hasFirstIcon()) {\n    //  marker.dragging.disable();\n    //} else {\n    //  marker.dragging.enable();\n    //}\n\n    this.addLayer(marker);\n\n    {\n      marker.position = (marker.position !== undefined ) ? marker.position : this._lastPosition++;\n      marker._prev = this._lastMarker;\n      this._firstMarker._prev = marker;\n      if (marker._prev) {\n        this._lastMarker._next = marker;\n        marker._next = this._firstMarker;\n      }\n    }\n\n    if (position === undefined) {\n      this._lastMarker = marker;\n    }\n\n    // 2. recalculate relations\n    if (position !== undefined) {\n      this._recalcRelations(marker);\n    }\n    // 3. trigger event\n    if (!marker.isMiddle()) {\n      this._map.fire(EVENTS.add_marker, { marker: marker });\n    }\n\n    return marker;\n  },\n  clear () {\n    var ids = this._ids();\n\n    this.clearLayers();\n\n    ids.forEach((id) => {\n      this._deleteEvents(id);\n    });\n\n    this._lastPosition = 0;\n\n    this._firstMarker = undefined;\n  },\n  _deleteEvents (id) {\n    delete this._map._leaflet_events.viewreset_idx[id];\n    delete this._map._leaflet_events.zoomanim_idx[id];\n  },\n  _getMiddleLatLng (marker1, marker2) {\n    var map = this._map,\n      p1 = map.project(marker1.getLatLng()),\n      p2 = map.project(marker2.getLatLng());\n\n    return map.unproject(p1._add(p2)._divideBy(2));\n  },\n  _recalcPositions (position) {\n    var markers = this._markers;\n\n    var changePos = false;\n    markers.forEach((marker, _position) => {\n      if (position === _position) {\n        changePos = true;\n      }\n      if (changePos) {\n        this._markers[_position].position += 1;\n      }\n    });\n  },\n  _recalcRelations () {\n    var markers = this._markers;\n\n    markers.forEach((marker, position) => {\n\n      marker._prev = this.markerAt(position - 1);\n      marker._next = this.markerAt(position + 1);\n\n      // first\n      if (position === 0) {\n        marker._prev = this.lastMarker();\n        marker._next = this.markerAt(1);\n      }\n\n      // last\n      if (position === markers.length - 1) {\n        marker._prev = this.markerAt(position - 1);\n        marker._next = this.markerAt(0);\n      }\n    });\n  },\n  _ids () {\n    var rslt = [];\n\n    for (let id in this._layers) {\n      rslt.push(id);\n    }\n\n    rslt.sort((a, b) => a - b);\n\n    return rslt;\n  },\n  select () {\n    if (this.isEmpty()) {\n      this._map._selectedMGroup = null;\n      return;\n    }\n\n    var map = this._map;\n    if (this._isHole) {\n      map.getEHMarkersGroup().resetSelection();\n      map.getEMarkersGroup().resetSelection();\n      map.getEHMarkersGroup().setLastHole(this);\n    } else {\n      map.getEHMarkersGroup().resetSelection();\n      map.getEHMarkersGroup().resetLastHole();\n    }\n\n    this.getLayers()._each((marker) => {\n      marker.selectIconInGroup();\n    });\n    this._selected = true;\n\n    this._map._selectedMGroup = this;\n    this._map.fire(EVENTS.marker_group_select);\n  },\n  isSelected() {\n    return this._selected;\n  },\n  isEmpty () {\n    return this.getLayers().length === 0;\n  },\n  resetSelection () {\n    this.getLayers()._each((marker) => {\n      marker.unSelectIconInGroup();\n    });\n    this._selected = false;\n  }\n})\n","import {firstIcon, icon, dragIcon, middleIcon} from '../../marker-icons.js';\n\nimport EVENTS from '../../event-names.js';\n\nvar size = 1;\nvar userAgent = navigator.userAgent.toLowerCase();\n\nif (userAgent.indexOf(\"ipad\") !== -1 || userAgent.indexOf(\"iphone\") !== -1) {\n  size = 2;\n}\n\nexport default L.Marker.extend({\n  _draggable: undefined, // an instance of L.Draggable\n  _oldLatLngState: undefined,\n  initialize(group, latlng, options = {}) {\n\n    options = Object.assign({\n      icon: icon,\n      draggable: false\n    }, options);\n\n    L.Marker.prototype.initialize.call(this, latlng, options);\n\n    this._mGroup = group;\n\n    this._isFirst = group.getLayers().length === 0;\n  },\n\n  group() {\n    return this._mGroup;\n  },\n\n  next() {\n    var next = this._next._next;\n    if (!this._next.isMiddle()) {\n      next = this._next;\n    }\n    return next;\n  },\n  prev() {\n    var prev = this._prev._prev;\n    if (!this._prev.isMiddle()) {\n      prev = this._prev;\n    }\n    return prev;\n  },\n  changePrevNextPos() {\n    if (this._prev.isMiddle()) {\n\n      var prevLatLng = this.group()._getMiddleLatLng(this.prev(), this);\n      var nextLatLng = this.group()._getMiddleLatLng(this, this.next());\n\n      this._prev.setLatLng(prevLatLng);\n      this._next.setLatLng(nextLatLng);\n    }\n  },\n  _resetIcon(_icon) {\n    if (this._hasFirstIcon()) {\n      return;\n    }\n    var ic = _icon || icon;\n\n    this.setIcon(ic);\n    this.prev().setIcon(ic);\n    this.next().setIcon(ic);\n  },\n\n  _addIconClass(className) {\n    L.DomUtil.addClass(this._icon, className);\n  },\n  _removeIconClass(className) {\n    L.DomUtil.removeClass(this._icon, className);\n  },\n  // _setFirstIcon() {\n  //   this._isFirst = true;\n  //   this.setIcon(firstIcon);\n  // },\n  _hasFirstIcon() {\n    return this._icon && L.DomUtil.hasClass(this._icon, 'm-editor-div-icon-first');\n  },\n  isMiddle() {\n    return this._icon && L.DomUtil.hasClass(this._icon, 'm-editor-middle-div-icon')\n      && !L.DomUtil.hasClass(this._icon, 'leaflet-drag-target');\n  },\n  _setDragIcon() {\n    this._removeIconClass('m-editor-div-icon');\n    this.setIcon(dragIcon);\n  },\n  isPlain() {\n    return L.DomUtil.hasClass(this._icon, 'm-editor-div-icon');\n  },\n  _onceClick() {\n    if (this._isFirst) {\n      this.once('click', (e) => {\n        if (!this._hasFirstIcon()) {\n          return;\n        }\n        const map = this._map;\n        const mGroup = this.group();\n\n        if (mGroup._markers.length < 3) {\n          this._onceClick();\n          return;\n        }\n\n        this._isFirst = false;\n        this.setIcon(icon);\n        map.fire(EVENTS.join_path, {mGroup: mGroup});\n      });\n    }\n  },\n  isAcceptedToDelete() {\n    return this._map.options.notifyClickMarkerDeletePolygon &&\n      !this.isMiddle() &&\n      this.isSelectedInGroup() &&\n      this._map.getSelectedMarker() === this &&\n      this.group().hasMinimalMarkersLength();\n  },\n  needAcceptionToDelete() {\n    return this._map.options.notifyClickMarkerDeletePolygon &&\n      !this.isMiddle() &&\n      this.isSelectedInGroup() &&\n      this._map.getSelectedMarker() !== this &&\n      this.group().hasMinimalMarkersLength();\n  },\n  _bindEvents() {\n\n    this.on('dragstart', (e) => {\n      this.group().setSelected(this);\n      this._oldLatLngState = e.target._latlng;\n\n      if (this._prev.isPlain()) {\n        this.group().setMiddleMarkers(this.position);\n      }\n\n      this._map.fire(EVENTS.marker_dragstart);\n    });\n\n    this.on('click', () => {\n      const mGroup = this.group();\n\n      if (this.group().hasFirstMarker()) {\n        return;\n      }\n\n      const map = this._map;\n\n      if (this.needAcceptionToDelete()) {\n        mGroup.setSelected(this);\n        map.msgHelper.msg(map.options.text.acceptDeletion, 'error', this);\n        return;\n      }\n\n      if (mGroup.hasFirstMarker() && this !== mGroup.getFirst()) {\n        return;\n      }\n\n      if (this._hasFirstIcon()) {\n        return;\n      }\n\n      mGroup.setSelected(this);\n      if (this._hasFirstIcon()) {\n        return;\n      }\n\n      if (mGroup.getFirst()._hasFirstIcon()) {\n        return;\n      }\n\n      if (!this.isSelectedInGroup()) {\n        mGroup.select();\n\n        if (this.isMiddle()) {\n          map.msgHelper.msg(map.options.text.clickToAddNewEdges, null, this);\n        } else {\n          map.msgHelper.msg(map.options.text.clickToRemoveAllSelectedEdges, null, this);\n        }\n\n        if (this.isAcceptedToDelete()) {\n          map.msgHelper.msg(map.options.text.acceptDeletion, 'error', this);\n        }\n\n        return;\n      }\n\n      if (this.isMiddle()) { //add edge\n        mGroup.setMiddleMarkers(this.position);\n        this._resetIcon(icon);\n        mGroup.select();\n        map.msgHelper.msg(map.options.text.clickToRemoveAllSelectedEdges, null, this);\n        // _markerToDeleteGroup = null;\n        map.clearSelectedMarker();\n\n      } else { //remove vertex\n        if (!mGroup.getFirst()._hasFirstIcon() && !this.__wasDragged) {\n          map.msgHelper.hide();\n\n          mGroup.removeMarker(this);\n\n          if (mGroup.isEmpty()) {\n            if (mGroup._isHole) {\n              map.fire(EVENTS.hole_deleted);\n            } else {\n              map.fire(EVENTS.polygon_deleted);\n            }\n            map.msgHelper.hide();\n          }\n          mGroup.select();\n        }\n      }\n\n      this.__wasDragged = false;\n    });\n\n    this.on('mousedown', () => {\n      if (!this.dragging._enabled) {\n        return false;\n      }\n    });\n\n    this.on('mouseover', () => {\n      var map = this._map;\n      if (this.group().getFirst()._hasFirstIcon()) {\n        if (this.group().getLayers().length > 2) {\n          if (this._hasFirstIcon()) {\n            map.fire(EVENTS.first_marker_mouseover, {marker: this});\n          } else if (this === this.group()._lastMarker) {\n            map.fire(EVENTS.last_marker_dblclick_mouseover, {marker: this});\n          }\n        }\n      } else {\n        if (this.isSelectedInGroup()) {\n          if (this.isMiddle()) {\n            map.fire(EVENTS.selected_middle_marker_mouseover, {marker: this});\n          } else {\n            map.fire(EVENTS.selected_marker_mouseover, {marker: this});\n          }\n        } else {\n          map.fire(EVENTS.not_selected_marker_mouseover, {marker: this});\n        }\n      }\n      if (this.isAcceptedToDelete()) {\n        map.msgHelper.msg(map.options.text.acceptDeletion, 'error', this);\n      }\n    });\n    this.on('mouseout', () => {\n      this._map.fire(EVENTS.marker_mouseout);\n    });\n\n    this._onceClick();\n\n    this.on('dblclick', () => {\n      var mGroup = this.group();\n      if (mGroup && mGroup.getFirst() && mGroup.getFirst()._hasFirstIcon()) {\n        if (this === mGroup._lastMarker) {\n          mGroup.getFirst().fire('click');\n        }\n      }\n    });\n\n    this.on('drag', (e) => {\n      this._onDrag(e);\n    });\n\n    this.on('dragend', (e) => {\n      this.__wasDragged = true;\n      this._onDragEnd(e);\n    });\n  },\n\n  onAdd(map) {\n    L.Marker.prototype.onAdd.call(this, map);\n\n    this._bindEvents(map);\n  },\n  _onDrag(e) {\n    var marker = e.target;\n\n    marker.changePrevNextPos();\n\n    var map = this._map;\n    map._convertToEdit(map.getEMarkersGroup());\n\n    this._setDragIcon();\n\n    map.fire(EVENTS.drag_marker, {marker: this});\n  },\n  _onDragEnd() {\n\n    this.group().select();\n    this._map.fire(EVENTS.dragend_marker, {marker: this});\n\n    this._map.fire(EVENTS.selected_marker_mouseover, {marker: this});\n\n    this.resetStyle();\n  },\n  resetIcon() {\n    this._removeIconClass('m-editor-div-icon-drag');\n  },\n  unSelectIconInGroup() {\n    this._removeIconClass('group-selected');\n  },\n  _selectIconInGroup() {\n    if (!this.isMiddle()) {\n      this._addIconClass('m-editor-div-icon');\n    }\n    this._addIconClass('group-selected');\n  },\n  selectIconInGroup() {\n    if (this._prev) {\n      this._prev._selectIconInGroup();\n    }\n    this._selectIconInGroup();\n    if (this._next) {\n      this._next._selectIconInGroup();\n    }\n  },\n  isSelectedInGroup() {\n    return L.DomUtil.hasClass(this._icon, 'group-selected');\n  },\n  onRemove(map) {\n    this.off('mouseout');\n\n    L.Marker.prototype.onRemove.call(this, map);\n  },\n\n  resetStyle() {\n    this.resetIcon();\n    this.selectIconInGroup();\n  }\n});\n","import MsgHelper from '../extended/MsgHelper.js';\nimport m from '../utils/mobile.js';\n\nimport EVENTS from '../event-names.js';\n\nexport default function () {\n\n  this.touchZoom.disable();\n  this.doubleClickZoom.disable();\n\n  this.boxZoom.disable();\n  this.keyboard.disable();\n\n  var msgHelper = this.msgHelper = new MsgHelper({\n    defaultMsg: this.options.text.clickToStartDrawPolygonOnMap,\n  });\n\n  this.on('msgHelperAdded', () => {\n    var text = this.options.text;\n\n    this.on(EVENTS.marker_group_select, () => {\n\n      this.off(EVENTS.not_selected_marker_mouseover);\n      this.on(EVENTS.not_selected_marker_mouseover, (data) => {\n        msgHelper.msg(text.clickToSelectEdges, null, data.marker);\n      });\n\n      this.off(EVENTS.selected_marker_mouseover);\n      this.on(EVENTS.selected_marker_mouseover, (data) => {\n        msgHelper.msg(text.clickToRemoveAllSelectedEdges, null, data.marker);\n      });\n\n      this.off(EVENTS.selected_middle_marker_mouseover);\n      this.on(EVENTS.selected_middle_marker_mouseover, (data) => {\n        msgHelper.msg(text.clickToAddNewEdges, null, data.marker);\n      });\n\n      // on edit polygon\n      this.off(EVENTS.edit_polygon_mousemove);\n      this.on(EVENTS.edit_polygon_mousemove, (data) => {\n        msgHelper.msg(text.clickToDrawInnerEdges, null, data.layerPoint);\n      });\n\n      this.off(EVENTS.edit_polygon_mouseout);\n      this.on(EVENTS.edit_polygon_mouseout, () => {\n        msgHelper.hide();\n      });\n\n      // on view polygon\n      this.off(EVENTS.view_polygon_mousemove);\n      this.on(EVENTS.view_polygon_mousemove, (data) => {\n        msgHelper.msg(text.clickToEdit, null, data.layerPoint);\n      });\n\n      this.off(EVENTS.view_polygon_mouseout);\n      this.on(EVENTS.view_polygon_mouseout, () => {\n        msgHelper.hide();\n      });\n    });\n\n    // hide msg\n    this.off(EVENTS.marker_mouseout);\n    this.on(EVENTS.marker_mouseout, () => {\n      msgHelper.hide();\n    });\n\n    this.on(EVENTS.marker_dragstart, () => {\n      msgHelper.hide();\n    });\n\n    // on start draw polygon\n    this.off(EVENTS.first_marker_mouseover);\n    this.on(EVENTS.first_marker_mouseover, (data) => {\n      msgHelper.msg(text.clickToJoinEdges, null, data.marker);\n    });\n\n    // dblclick to join\n    this.off(EVENTS.last_marker_dblclick_mouseover);\n    this.on(EVENTS.last_marker_dblclick_mouseover, (data) => {\n      msgHelper.msg(text.dblclickToJoinEdges, null, data.marker);\n    });\n\n    this.on(EVENTS.join_path, (data) => {\n      if (data.marker) {\n        msgHelper.msg(this.options.text.clickToRemoveAllSelectedEdges, null, data.marker);\n      }\n    });\n  });\n\n  if (!m.isMobileBrowser()) {\n    this.addControl(msgHelper);\n  }\n}\n","export default L.Control.extend({\n  options: {\n    position: 'msgcenter',\n    defaultMsg: null\n  },\n  _onResizeEvent: null,\n  _titleContainer: null,\n\n  initialize (options) {\n    L.Util.setOptions(this, options);\n  },\n\n  onAdd (map) {\n    var corner = L.DomUtil.create('div', 'leaflet-bottom');\n    var container = L.DomUtil.create('div', 'leaflet-msg-editor');\n\n    map._controlCorners['msgcenter'] = corner;\n    map._controlContainer.appendChild(corner);\n\n    this._setContainer(container, map);\n    map.fire('msgHelperAdded', { control: this });\n\n    this._changePos();\n\n    this._bindEvents(map);\n\n    return container;\n  },\n  onRemove() {\n    this._unBindEvents(map);\n    document.body.removeChild(this._titlePosContainer);\n  },\n  _changePos () {\n    let controlCorner = this._map._controlCorners['msgcenter'];\n    if (controlCorner && controlCorner.children.length) {\n      let child = controlCorner.children[0].children[0];\n\n      if (!child) {\n        return;\n      }\n\n      let width = child.clientWidth;\n      if (width) {\n        controlCorner.style.left = (this._map._container.clientWidth - width) / 2 + 'px';\n      }\n    }\n  },\n  _unBindEvents() {\n    window.removeEventListener('resize', this._onResizeEvent);\n  },\n  _bindEvents () {\n    this._onResizeEvent = this._changePos.bind(this);\n    window.addEventListener('resize', this._onResizeEvent);\n    this._onResizeEvent = null;\n  },\n  _setContainer (container) {\n    this._titleContainer = L.DomUtil.create('div', 'leaflet-msg-container title-hidden');\n    this._titlePosContainer = L.DomUtil.create('div', 'leaflet-msg-container title-hidden');\n    container.appendChild(this._titleContainer);\n    document.body.appendChild(this._titlePosContainer);\n\n    if (this.options.defaultMsg !== null) {\n      L.DomUtil.removeClass(this._titleContainer, 'title-hidden');\n      this._titleContainer.innerHTML = this.options.defaultMsg;\n    }\n  },\n  getOffset (el) {\n    var _x = 0;\n    var _y = 0;\n    if (!this._map.isFullscreen || !this._map.isFullscreen()) {\n      while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\n        _x += el.offsetLeft;\n        _y += el.offsetTop;\n        el = el.offsetParent;\n      }\n    }\n    return { y: _y, x: _x };\n  },\n  msg (text, type, object) {\n    if (!text || !this._titlePosContainer) {\n      return;\n    }\n\n    if (object) {\n      L.DomUtil.removeClass(this._titlePosContainer, 'title-hidden');\n      L.DomUtil.removeClass(this._titlePosContainer, 'title-error');\n      L.DomUtil.removeClass(this._titlePosContainer, 'title-success');\n\n      this._titlePosContainer.innerHTML = text;\n\n      var point;\n\n      //var offset = this.getOffset(document.getElementById(this._map._container.getAttribute('id')));\n      var offset = this.getOffset(this._map._container);\n\n      if (object instanceof L.Point) {\n        point = object;\n        point = this._map.layerPointToContainerPoint(point);\n      } else {\n        point = this._map.latLngToContainerPoint(object.getLatLng());\n      }\n\n      point.x += offset.x;\n      point.y += offset.y;\n\n      this._titlePosContainer.style.top = (point.y - 8) + \"px\";\n      this._titlePosContainer.style.left = (point.x + 10) + \"px\";\n\n      if (type) {\n        L.DomUtil.addClass(this._titlePosContainer, 'title-' + type);\n      }\n    } else {\n      L.DomUtil.removeClass(this._titleContainer, 'title-hidden');\n      L.DomUtil.removeClass(this._titleContainer, 'title-error');\n      L.DomUtil.removeClass(this._titleContainer, 'title-success');\n\n      this._titleContainer.innerHTML = text;\n\n      if (type) {\n        L.DomUtil.addClass(this._titleContainer, 'title-' + type);\n      }\n      this._changePos();\n    }\n  },\n  hide () {\n    if (this._titleContainer) {\n      L.DomUtil.addClass(this._titleContainer, 'title-hidden');\n    }\n\n    if (this._titlePosContainer) {\n      L.DomUtil.addClass(this._titlePosContainer, 'title-hidden');\n    }\n  },\n  getBtnContainer () {\n    return this._map._controlCorners['msgcenter'];\n  },\n  getBtnAt (pos) {\n    return this.getBtnContainer().child[pos];\n  },\n  disableBtn (pos) {\n    L.DomUtil.addClass(this.getBtnAt(pos), 'disabled');\n  },\n  enableBtn (pos) {\n    L.DomUtil.removeClass(this.getBtnAt(pos), 'disabled');\n  }\n});\n","Array.prototype.move = function(from, to) {\n  this.splice(to, 0, this.splice(from, 1)[0]);\n};\nArray.prototype._each = function(func) {\n  var length = this.length;\n  var i = 0;\n  for (; i < length; i++) {\n    func.call(this, this[i], i);\n  }\n};\nexport default Array;\n","import EVENTS from '../event-names.js';\n\nexport default L.MultiPolygon.extend({\n  initialize (latlngs, options) {\n    L.MultiPolygon.prototype.initialize.call(this, latlngs, options);\n\n    this.on('layeradd', (e) => {\n      var mViewStyle = this._map.options.style.view;\n      e.target.setStyle(Object.assign({\n        opacity: 0.7,\n        fillOpacity: 0.35,\n        color: '#00ABFF'\n      }, mViewStyle));\n\n      this._map._moveEPolygonOnTop();\n    });\n  },\n  isEmpty() {\n    return this.getLayers().length === 0;\n  },\n  onAdd (map) {\n    L.MultiPolygon.prototype.onAdd.call(this, map);\n\n    this.on('mousemove', (e) => {\n      map.fire(EVENTS.view_polygon_mousemove, { layerPoint: e.layerPoint });\n    });\n    this.on('mouseout', () => {\n      map.fire(EVENTS.view_polygon_mouseout);\n    });\n  },\n  onClick (e) {\n    const map = this._map;\n    const selectedMGroup = map.getSelectedMGroup();\n    const eMarkersGroup = map.getEMarkersGroup();\n    if ((eMarkersGroup.getFirst() && eMarkersGroup.getFirst()._hasFirstIcon() && !eMarkersGroup.isEmpty()) ||\n      (selectedMGroup && selectedMGroup.getFirst() && selectedMGroup.getFirst()._hasFirstIcon() && !selectedMGroup.isEmpty())) {\n      const eMarkersGroup = map.getEMarkersGroup();\n      eMarkersGroup.set(e.latlng);\n      map._convertToEdit(eMarkersGroup);\n    } else {\n      // reset\n      if (map._getSelectedVLayer()) {\n        map._setEPolygon_To_VGroup();\n      } else {\n        map._addEPolygon_To_VGroup();\n      }\n      map.clear();\n      map.mode('draw');\n\n      map._hideSelectedVLayer(e.layer);\n\n      eMarkersGroup.restore(e.layer);\n      map._convertToEdit(eMarkersGroup);\n\n      eMarkersGroup.select();\n    }\n  },\n  onRemove (map) {\n    this.off('mouseover');\n    this.off('mouseout');\n\n    map.off(EVENTS.view_polygon_mousemove);\n    map.off(EVENTS.view_polygon_mouseout);\n  }\n});\n","export default L.FeatureGroup.extend({});\n","import ExtendedPolygon from '../../extended/Polygon.js';\n\nimport EVENTS from '../../event-names.js';\n\nexport default L.EditPloygon = ExtendedPolygon.extend({\n  _oldE: undefined, // to reuse event object after \"bad hole\" removing to build new hole\n  _k: 1, // to decrease 'diff' value which helps build a hole\n  _holes: [],\n  initialize (latlngs, options) {\n    L.Polyline.prototype.initialize.call(this, latlngs, options);\n    this._initWithHoles(latlngs);\n\n    this.options.className = \"leaflet-clickable editable-polygon\";\n  },\n  _update (e) {\n    var marker = e.marker;\n\n    if (marker._mGroup._isHole) {\n      var markers = marker._mGroup._markers;\n      markers = markers.filter((marker) => !marker.isMiddle());\n      this._holes[marker._mGroup.position] = markers.map((marker) => marker.getLatLng());\n\n    }\n    this.redraw();\n  },\n  _removeHole (e) {\n    var holePosition = e.marker._mGroup.position;\n    this._holes.splice(holePosition, 1);\n\n    this._map.getEHMarkersGroup().removeLayer(e.marker._mGroup._leaflet_id);\n    this._map.getEHMarkersGroup().repos(e.marker._mGroup.position);\n\n    this.redraw();\n  },\n  onAdd (map) {\n    L.Polyline.prototype.onAdd.call(this, map);\n\n    map.off(EVENTS.add_marker);\n    map.on(EVENTS.add_marker, (e) => this._update(e));\n    map.off(EVENTS.drag_marker);\n    map.on(EVENTS.drag_marker, (e) => this._update(e));\n    map.off(EVENTS.delete_marker);\n    map.on(EVENTS.delete_marker, (e) => this._update(e));\n    map.off(EVENTS.delete_hole);\n    map.on(EVENTS.delete_hole, (e) => this._removeHole(e));\n\n    this.on('mousemove', (e) => {\n      map.fire(EVENTS.edit_polygon_mousemove, { layerPoint: e.layerPoint });\n    });\n\n    this.on('mouseout', () => map.fire(EVENTS.edit_polygon_mouseout));\n  },\n  onRemove (map) {\n    this.off('mousemove');\n    this.off('mouseout');\n\n    map.off(EVENTS.edit_polygon_mouseover);\n    map.off(EVENTS.edit_polygon_mouseout);\n\n    L.Polyline.prototype.onRemove.call(this, map);\n  },\n  addHole (hole) {\n    this._holes = this._holes || [];\n    this._holes.push(hole);\n\n    this.redraw();\n  },\n  hasHoles() {\n    return this._holes.length > 0;\n  }\n});\n","export default L.Polygon.extend({\n  isEmpty () {\n    var latLngs = this.getLatLngs();\n    return latLngs === null || latLngs === undefined || (latLngs && latLngs.length === 0);\n  },\n  getHoles () {\n    return this._holes;\n  },\n  clearHoles () {\n    this._holes = [];\n    this.redraw();\n  },\n  clear () {\n    this.clearHoles();\n\n    if (Array.isArray(this._latlngs) && this._latlngs[0] !== undefined) {\n      this.setLatLngs([]);\n    }\n  }\n})\n","import opts from '../../options.js';\n\nexport default L.Polyline.extend({\n  options: Object.assign(opts.style.drawLine, {\n    className: 'dash-line'\n  }),\n  _latlngToMove: undefined,\n  onAdd: function (map) {\n    L.Polyline.prototype.onAdd.call(this, map);\n    this.setStyle(map.options.style.drawLine);\n  },\n  addLatLng (latlng) {\n    if (this._latlngToMove) {\n      this._latlngToMove = undefined;\n    }\n\n    if (this._latlngs.length > 1) {\n      this._latlngs.splice(-1);\n    }\n\n    this._latlngs.push(L.latLng(latlng));\n\n    return this.redraw();\n  },\n  update (pos) {\n\n    if (!this._latlngToMove && this._latlngs.length) {\n      this._latlngToMove = L.latLng(pos);\n      this._latlngs.push(this._latlngToMove);\n    }\n    if (this._latlngToMove) {\n      this._latlngToMove.lat = pos.lat;\n      this._latlngToMove.lng = pos.lng;\n\n      this.redraw();\n    }\n    return this;\n  },\n  _addLine (line, group, isLastMarker) {\n    if (!isLastMarker) {\n      line.addTo(group);\n    }\n  },\n  clear () {\n    this.setLatLngs([]);\n  }\n});\n","import MarkerGroup from '../../modes/edit/marker-group.js';\n\nexport default L.FeatureGroup.extend({\n  _selected: false,\n  _lastHole: undefined,\n  _lastHoleToDraw: undefined,\n  addHoleGroup () {\n    this._lastHole = new MarkerGroup();\n    this._lastHole._isHole = true;\n    this._lastHole.addTo(this);\n\n    this._lastHole.position = this.getLength() - 1;\n\n    this._lastHoleToDraw = this._lastHole;\n\n    return this._lastHole;\n  },\n  getLength () {\n    return this.getLayers().length;\n  },\n  resetLastHole () {\n    this._lastHole = undefined;\n  },\n  setLastHole (layer) {\n    this._lastHole = layer;\n  },\n  getLastHole () {\n    return this._lastHole;\n  },\n  remove () {\n    this.eachLayer((hole) => {\n      while (hole.getLayers().length) {\n        hole.removeMarkerAt(0);\n      }\n    });\n  },\n  repos (position) {\n    this.eachLayer((layer) => {\n      if (layer.position >= position) {\n        layer.position -= 1;\n      }\n    });\n  },\n  resetSelection () {\n    this.eachLayer((layer) => {\n      layer.getLayers()._each((marker) => {\n        marker.unSelectIconInGroup();\n      });\n    });\n    this._selected = false;\n  }\n});\n","import Map from './map.js';\n\nwindow.LeafletEditor = Map;\n"],"sourceRoot":""}