{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/event-names.js","webpack:///./src/js/marker-icons.js","webpack:///./src/js/modes/edit/marker-group.js","webpack:///./src/js/utils/mobile.js","webpack:///./src/js/options.js","webpack:///./src/js/map.js","webpack:///./src/js/base.js","webpack:///./src/js/modes/draw/events.js","webpack:///./src/js/utils/precision.js","webpack:///./src/js/extended/BaseMarkerGroup.js","webpack:///./src/js/modes/edit/marker.js","webpack:///./src/js/hooks/controls.js","webpack:///./src/js/extended/MsgHelper.js","webpack:///./src/js/utils/array.js","webpack:///./src/js/view/group.js","webpack:///./src/js/modes/draw/group.js","webpack:///./src/js/modes/edit/polygon.js","webpack:///./src/js/extended/Polygon.js","webpack:///./src/js/modes/draw/dashed-line.js","webpack:///./src/js/modes/edit/holesGroup.js","webpack:///./src/js/index.mapbox.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","start_add_new_polygon","start_add_new_hole","marker_group_clear","join_path","hole_created","polygon_created","polygon_selected","delete_marker","delete_polygon","map_cleared","last_marker_dblclick_mouseover","hole_deleted","polygon_deleted","first_marker_mouseover","selected_middle_marker_mouseover","selected_marker_mouseover","not_selected_marker_mouseover","marker_mouseout","drag_marker","dragend_marker","marker_dragstart","edit_polygon_mousemove","edit_polygon_mouseover","edit_polygon_mouseout","delete_hole","before_add_marker","add_marker","marker_group_select","view_polygon_mousemove","view_polygon_mouseout","_mobile","size","navigator","userAgent","toLowerCase","_mobile2","default","isMobileBrowser","firstIcon","L","divIcon","className","iconSize","icon","dragIcon","middleIcon","icons","MarkerGroup","_BaseMarkerGroup2","extend","_isHole","_position","options","mIcon","mHoverIcon","initialize","layers","LayerGroup","this","_markers","onAdd","map","_map","_updateDELine","latlng","deLine","getDELine","_firstMarker","update","dashedEditLineGroup","addTo","hasMinimalMarkersLength","getLayers","filter","item","_icon","classList","contains","length","setSelected","marker","hasFirstMarker","setSelectedMarker","getLast","_oldSelectedMarker","_selectedMarker","getFirst","_hasFirstIcon","restore","layer","setAll","_latlngs","setAllHoles","_holes","_add","position","_this","arguments","undefined","isMode","addMarker","addLatLng","on","e","clear","_mGroup","_lastMarker","fire","_eventNames2","setMiddleMarker","setMiddleMarkers","set","latlngs","_this2","forEach","holes","_this3","hole","lastHGroup","getEHMarkersGroup","addHoleGroup","_each","_bindLineEvents","window","a","vendor","opera","check","test","substr","forceToDraw","notifyClickMarkerDeletePolygon","translations","removePolygon","removePoint","style","view","opacity","fillOpacity","dashArray","clickable","fill","stroke","color","weight","draw","startDraw","drawLine","fillColor","markerIcon","markerHoverIcon","errorLineStyle","smoothFactor","previewErrorLineStyle","text","acceptDeletion","clickToEdit","clickToAddNewEdges","clickToDrawInnerEdges","clickToJoinEdges","clickToRemoveAllSelectedEdges","clickToSelectEdges","dblclickToJoinEdges","clickToStartDrawPolygonOnMap","deleteSelectedEdges","rejectChanges","jsonWasLoaded","checkJson","loadJson","forgetToSave","zoom","worldCopyJump","geoJSONArea","Map","setLayers","viewGroup","_group2","editGroup","_group4","editPolygon","_polygon2","editMarkersGroup","_markerGroup2","_dashedLine2","editHoleMarkersGroup","_holesGroup2","removeLayers","removeLayer","id","_extends","_options2","controls","zoomControl","whenReady","removeControl","msgHelper","getVGroup","getEGroup","getEPolygon","getEMarkersGroup","getSelectedMGroup","_selectedMGroup","getCurrentGeoJSON","coords","eachLayer","_getSelectedVLayer","push","toGeoJSON","geometry","coordinates","eCoordinates","GeoJSON","getFeature","type","include","_base2","addInitHook","_controls2","_precision","hasSelectedVLayer","_selectedVLayer","_modeType","_activeEditLayer","_errorTimeout","_setModeType","_clearEvents","_setMode","console","error","__mode_draw","_bindDrawEvents","_clearMap","setTimeout","saveState","isEmpty","_setEPolygon_To_VGroup","_addEPolygon_To_VGroup","geojson","geoJSON","areaFunc","turf","area","warn","sum","_props$precLatLng","precLatLng","vLayer","ePolygonLayer","selectedLayer","eArea","precisionGeoJSON","vArea","hArea","precision","getSelectedMarker","clearSelectedMarker","Error","polygon","clearLayers","createEditPolygon","json","geoJson","vGroup","_l","addLayer","_fitVBounds","_setSelectedVLayer","_clearSelectedVLayer","_hideSelectedVLayer","bringToBack","_showSelectedVLayer","_path","visibility","ePolygon","getHoles","getLatLngs","Array","isArray","concat","selectedVLayer","redraw","_convertToEdit","group","pointsArray","isMiddle","getLatLng","setLatLngs","setStyle","_container","remove","add","fitBounds","getBounds","padding","selectedMGroup","_unBindDrawEvents","_moveEPolygonOnTop","element","parentElement","insertAdjacentElement","_events2","_markerIcons","_eventNames","originalEvent","clientX","clientY","target","Marker","eMarkersGroup","_addMarker","startDrawStyle","firstMarker","ehMarkersGroup","lastHole","getLastHole","resetSelection","mGroup","resetLastHole","select","onClick","msg","layerPoint","_ref","off","_openPopup","number","prec","arrayStrings","split","rslt","_prec","toPrecision","Number","_json$geometry","JSON","parse","stringify","outlet","edge","Class","includes","Mixin","Events","_selected","_positionHash","_lastPosition","onRemove","move","removeMarker","splice","cb","markerAt","lastMarker","markers","b","prevMarker","_prev","nextMarker","_next","nextnextMarker","removeMarkerAt","_changePos","_marker","hasStartMarker","some","_recalcPositions","_getMiddleLatLng","_marker3","_recalcRelations","ids","_ids","_deleteEvents","_leaflet_events","viewreset_idx","zoomanim_idx","marker1","marker2","p1","project","p2","unproject","_divideBy","_this4","changePos","_this5","_layers","sort","setLastHole","dragging","enable","selectIconInGroup","isSelected","disable","unSelectIconInGroup","indexOf","_draggable","_oldLatLngState","draggable","_isFirst","next","prev","changePrevNextPos","prevLatLng","nextLatLng","setLatLng","_resetIcon","ic","setIcon","_addIconClass","DomUtil","addClass","_removeIconClass","removeClass","hasClass","_setDragIcon","isPlain","_onceClick","once","isAcceptedToDelete","isSelectedInGroup","needAcceptToDelete","_disallowToExecuteEvent","_bindEvents","_latlng","__dragging","__wasDragged","hide","_enabled","stopPropagation","selectedMarker","selectedMarkerDragging","_onDrag","_onDragEnd","resetStyle","resetIcon","_selectIconInGroup","touchZoom","doubleClickZoom","boxZoom","keyboard","_MsgHelper2","defaultMsg","data","addControl","Control","_onResizeEvent","_titleContainer","Util","setOptions","corner","container","_controlCorners","_controlContainer","appendChild","_setContainer","control","_unBindEvents","document","body","removeChild","_titlePosContainer","controlCorner","children","child","width","clientWidth","left","removeEventListener","addEventListener","innerHTML","getOffset","el","_x","_y","isFullscreen","isNaN","offsetLeft","offsetTop","offsetParent","y","x","point","offset","Point","layerPointToContainerPoint","latLngToContainerPoint","top","getBtnContainer","getBtnAt","pos","disableBtn","enableBtn","from","to","func","MultiPolygon","mViewStyle","FeatureGroup","EditPloygon","_Polygon2","_oldE","_k","Polygon","_update","_removeHole","holePosition","_leaflet_id","repos","Polyline","addHole","hasHoles","latLngs","clearHoles","_options","_latlngToMove","latLng","lat","lng","_addLine","line","isLastMarker","_markerGroup","_lastHole","_lastHoleToDraw","getLength","LeafletEditor","_map2"],"mappings":"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,8FClFe,CACbC,sBAAuB,+BACvBC,mBAAoB,4BACpBC,mBAAoB,4BACpBC,UAAW,qBACXC,aAAc,8BACdC,gBAAiB,yBACjBC,iBAAkB,0BAClBC,cAAe,uBACfC,eAAgB,wBAEhBC,YAAa,qBAEbC,+BAAgC,wCAEhCC,aAAc,8BACdC,gBAAiB,yBAEjBC,uBAAwB,gCAExBC,iCAAkC,0CAElCC,0BAA2B,mCAC3BC,8BAA+B,uCAE/BC,gBAAiB,yBAEjBC,YAAa,qBAEbC,eAAgB,wBAChBC,iBAAkB,0BAElBC,uBAAwB,gCACxBC,uBAAwB,gCACxBC,sBAAuB,+BAEvBC,YAAa,qBAEbC,kBAAmB,2BACnBC,WAAY,oBACZC,oBAAqB,6BAErBC,uBAAwB,gCAExBC,sBAAuB,iKC5CzB,MAAAC,EAAAlE,EAAA,uCAEA,IAAImE,EAAO,EACKC,UAAUC,UAAUC,cAEhCC,EAAAC,QAAEC,oBACJN,EAAO,GAGIO,YAAYC,EAAEC,QAAQ,CACjCC,UAAW,0BACXC,SAAU,CAAC,GAAKX,EAAM,GAAKA,KAGhBY,OAAOJ,EAAEC,QAAQ,CAC5BC,UAAW,oBACXC,SAAU,CAAC,GAAKX,EAAM,GAAKA,KAGhBa,WAAWL,EAAEC,QAAQ,CAChCC,UAAW,yBACXC,SAAU,CAAC,GAAKX,EAAO,EAAG,GAAKA,EAAO,KAG3Bc,aAAaN,EAAEC,QAAQ,CAClCC,UAAW,2BACXC,SAAU,CAAC,GAAKX,EAAM,GAAKA,oFC1B7B,QAAAnE,EAAA,QAEAA,EAAA,IAEYkF,0JAAZlF,EAAA,uDAEA2E,EAAEQ,YAAcC,EAAAZ,QAAWa,OAAO,CAChCC,SAAS,EACTC,UAAW,KACXC,QAAS,CACPC,MAAO,KACPC,WAAY,MAEdC,WAPgC,SAOpBC,GACVjB,EAAEkB,WAAW7D,UAAU2D,WAAWpF,KAAKuF,KAAMF,GAE7CE,KAAKC,SAAW,IAElBC,MAZgC,SAYzBC,GACLH,KAAKI,KAAOD,GAEdE,cAfgC,SAejBC,GACb,IAAMC,EAASP,KAAKQ,YAIpB,OAHIR,KAAKS,cACPF,EAAOG,OAAOJ,GAETC,GAETC,UAtBgC,WA0B9B,OAHKR,KAAKI,MACRJ,KAAKI,KAAKO,oBAAoBC,MAAMZ,KAAKI,MAEpCJ,KAAKI,KAAKO,qBAEnBE,wBA5BgC,WA6B9B,OAAOb,KAAKc,YAAYC,OAAO,SAACC,GAC9B,OAAOA,EAAKC,MAAMC,UAAUC,SAAS,uBAAyBH,EAAKC,MAAMC,UAAUC,SAAS,8BAC3FC,QAAU,GAEfC,YAjCgC,SAiCnBC,GACX,IAAInB,EAAMH,KAAKI,KAEf,GAAIJ,KAAKuB,iBAGP,OAFApB,EAAIqB,kBAAkBxB,KAAKyB,gBAC3BtB,EAAIuB,mBAAqBvB,EAAIwB,iBAI/BxB,EAAIuB,mBAAqBvB,EAAIwB,gBAC7BxB,EAAIqB,kBAAkBF,IAExBM,SA7CgC,WA8C9B,OAAO5B,KAAKS,cAEdgB,QAhDgC,WAiD9B,GAAIzB,KAAKuB,iBAAkB,CACzB,IAAIzB,EAASE,KAAKc,YAClB,OAAOhB,EAAOA,EAAOsB,OAAS,KAGlCG,eAtDgC,WAuD9B,SAAUvB,KAAK4B,aAAc5B,KAAK4B,WAAWC,kBAE/CC,QAzDgC,SAyDvBC,GACP/B,KAAKgC,OAAOD,EAAME,UAClBjC,KAAKkC,YAAYH,EAAMI,SAEzBC,KA7DgC,SA6D3B9B,EAAQ+B,GAAwB,IAAAC,EAAAtC,KAAdN,EAAc6C,UAAAnB,OAAA,QAAAoB,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAE3BvC,KAAKI,KAAKqC,OAAO,UACdzC,KAAKS,eACRf,EAAQT,KAAOG,EAAMR,YAIzB,IAAI0C,EAAStB,KAAK0C,UAAUpC,EAAQ+B,EAAU3C,GAkB9C,OAhBAM,KAAKQ,YAAYmC,UAAUrC,GAEvBN,KAAK4B,WAAWC,gBAClB7B,KAAKI,KAAKwC,GAAG,YAAa,SAACC,GACzBP,EAAKjC,cAAcwC,EAAEvC,UAGvBN,KAAKQ,YAAYsC,QAGfxB,EAAOyB,QAAQjC,YAAYM,OAAS,GAClCE,EAAOyB,QAAQtC,aAAaoB,iBAAmBP,IAAWA,EAAOyB,QAAQC,aAC3EhD,KAAKI,KAAK6C,KAAKC,EAAAxE,QAAO1B,+BAAgC,CAACsE,OAAQA,IAI5DA,GAET6B,gBAzFgC,SAyFfd,GACfrC,KAAK0C,UAAUL,EAAU,KAAM,CAACpD,KAAMG,EAAMD,cAE9CiE,iBA5FgC,SA4Fdf,GAChBrC,KAAKmD,gBAAgBd,GACrBrC,KAAKmD,gBAAgBd,EAAW,IAElCgB,IAhGgC,SAgG3B/C,EAAQ+B,EAAU3C,GACrB,OAAOM,KAAKoC,KAAK9B,EAAQ+B,EAAU3C,IAErCsC,OAnGgC,SAmGxBsB,GAAS,IAAAC,EAAAvD,KACfsD,EAAQE,QAAQ,SAAClD,EAAQ+B,GACvBkB,EAAKF,IAAI/C,EAAQ+B,KAGnBrC,KAAK4B,WAAWqB,KAAK,UAEvBf,YA1GgC,SA0GnBuB,GAAO,IAAAC,EAAA1D,KAClByD,EAAMD,QAAQ,SAACG,GACb,IAAIC,EAAaF,EAAKtD,KAAKyD,oBAAoBC,eAE/CH,EAAKI,MAAM,SAACzD,EAAQ+B,GAClBuB,EAAWP,IAAI/C,EAAQ+B,KAGzBuB,EAAWhC,WAAWqB,KAAK,YAG/Be,qBAAiBxB,IAGnB,IAAMnD,EAAcR,EAAEQ,sBACPA,2FC/HA,CACbV,gBADa,WACkC,IAA9BL,EAA8BiE,UAAAnB,OAAA,QAAAoB,IAAAD,UAAA,GAAAA,UAAA,GAAlB0B,OAAO3F,UAC5B4F,EAAI5F,EAAUC,WAAaD,EAAU6F,QAAUF,OAAOG,MACxDC,GAAQ,EAMZ,OAJI,sVAAsVC,KAAKJ,IAAM,0kDAA0kDI,KAAKJ,EAAEK,OAAO,EAAG,OAC97DF,GAAQ,GAGHA,6FCLI,CACbG,aAAa,EACbC,gCAAgC,EAChCC,aAAc,CACZC,cAAe,iBACfC,YAAa,gBAEfC,MAAO,CACLC,KAAM,CACJC,QAAS,GACTC,YAAa,GACbC,UAAW,KACXC,WAAW,EACXC,MAAM,EACNC,QAAQ,EACRC,MAnBY,UAoBZC,OAlBS,GAoBXC,KAAM,CACJR,QAAS,GACTC,YAAa,GACbC,UAAW,QACXC,WAAW,EACXC,MAAM,EACNC,QAAQ,EACRC,MA5BY,UA6BZC,OA5BS,GA8BXE,UAAW,GACXC,SAAU,CACRV,QAAS,GACTI,MAAM,EACNO,UAnCY,UAoCZL,MApCY,UAqCZC,OApCS,EAqCTL,UAAW,QACXG,QAAQ,EACRF,WAAW,IAGfS,gBAAYnD,EACZoD,qBAAiBpD,EACjBqD,eAAgB,CACdR,MAAO,MACPC,OAAQ,EACRP,QAAS,EACTe,aAAc,GAEhBC,sBAAuB,CACrBV,MAAO,MACPC,OAAQ,EACRP,QAAS,EACTe,aAAc,EACdb,UAAW,SAEbe,KAAM,CACJrB,cAAe,iBACfsB,eAAgB,gCAChBC,YAAa,gBACbC,mBAAoB,6HACpBC,sBAAuB,4BACvBC,iBAAkB,sBAClBC,8BAA+B,sOAC/BC,mBAAoB,kLACpBC,oBAAqB,6BACrBC,6BAA8B,qCAC9BC,oBAAqB,yBACrBC,cAAe,iBACfC,cAAe,kBACfC,UAAW,aACXC,SAAU,eACVC,aAAc,8CACdC,KAAM,QAERC,eAAe,EACfC,YAAa,iQC/EfhN,EAAA,QACAA,EAAA,SAEAA,EAAA,IAEAA,EAAA,IACA,QAAAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,QACAA,EAAA,SACAA,EAAA,wDAEA,IAAIiN,EAAMtI,EAAEsI,IAAI5H,OAAO,CACrB6H,UADqB,WAEnBpH,KAAKqH,UAAY,IAAAC,EAAA5I,QAAc,IAC/BsB,KAAKuH,UAAY,IAAAC,EAAA9I,QAAc,IAC/BsB,KAAKyH,YAAc,IAAAC,EAAAhJ,QAAgB,IACnCsB,KAAK2H,iBAAmB,IAAAC,EAAAlJ,QAAgB,IACxCsB,KAAKW,oBAAsB,IAAAkH,EAAAnJ,QAAwB,IACnDsB,KAAK8H,qBAAuB,IAAAC,EAAArJ,QAAe,IAE3CsB,KAAKqH,UAAUzG,MAAMZ,MACrBA,KAAKuH,UAAU3G,MAAMZ,MACrBA,KAAKyH,YAAY7G,MAAMZ,MACvBA,KAAK2H,iBAAiB/G,MAAMZ,MAC5BA,KAAKW,oBAAoBC,MAAMZ,MAC/BA,KAAK8H,qBAAqBlH,MAAMZ,OAGlCgI,aAjBqB,WAkBnBhI,KAAKiI,YAAYjI,KAAKqH,WACtBrH,KAAKiI,YAAYjI,KAAKuH,WACtBvH,KAAKiI,YAAYjI,KAAKyH,aACtBzH,KAAKiI,YAAYjI,KAAK2H,kBACtB3H,KAAKiI,YAAYjI,KAAKW,qBACtBX,KAAKiI,YAAYjI,KAAK8H,uBAGxBjI,WA1BqB,SA0BVqI,EAAIxI,GAAS,IAAA4C,EAAAtC,KACtBA,KAAKqH,UAAY,KAEjBrH,KAAKuH,UAAY,KAEjBvH,KAAKyH,YAAc,KAEnBzH,KAAK2H,iBAAmB,KAExB3H,KAAKW,oBAAsB,KAE3BX,KAAK8H,qBAAuB,KAExBpI,EAAQsG,OACVmC,EAAcC,EAAA1J,QAAKsH,KAAMtG,EAAQsG,aAC1BtG,EAAQsG,MAGjB,IAAIqC,EAAW3I,EAAQ2I,SACnBA,IACoB,IAAlBA,EAASrB,OACXtH,EAAQ4I,aAAc,GAItB5I,EAAQmF,QACNnF,EAAQmF,MAAMU,MAChB4C,EAAcC,EAAA1J,QAAKmG,MAAMU,KAAM7F,EAAQmF,MAAMU,MAE3C7F,EAAQmF,MAAMC,MAChBqD,EAAcC,EAAA1J,QAAKmG,MAAMC,KAAMpF,EAAQmF,MAAMC,MAE3CpF,EAAQmF,MAAMW,WAChB2C,EAAcC,EAAA1J,QAAKmG,MAAMW,UAAW9F,EAAQmF,MAAMW,WAEhD9F,EAAQmF,MAAMY,UAChB0C,EAAcC,EAAA1J,QAAKmG,MAAMY,SAAU/F,EAAQmF,MAAMY,iBAE5C/F,EAAQmF,OAGjBsD,EAAcnI,KAAKN,QAAnB0I,EAAA1J,QAAkCgB,GAElCb,EAAEsI,IAAIjL,UAAU2D,WAAWpF,KAAKuF,KAAMkI,EAAIxI,GAE1CM,KAAKuI,UAAU,WACbjG,EAAK8E,cAGHpH,KAAKN,QAAQ8E,aACfxE,KAAKvE,KAAK,QAGZuE,KAAK4C,GAAG,SAAU,WAChBN,EAAKkG,cAAclG,EAAKmG,WACxBnG,EAAK0F,kBAITU,UArFqB,WAsFnB,OAAO1I,KAAKqH,WAGdsB,UAzFqB,WA0FnB,OAAO3I,KAAKuH,WAGdqB,YA7FqB,WA8FnB,OAAO5I,KAAKyH,aAGdoB,iBAjGqB,WAkGnB,OAAO7I,KAAK2H,kBAGdnH,UArGqB,WAsGnB,OAAOR,KAAKW,qBAGdkD,kBAzGqB,WA0GnB,OAAO7D,KAAK8H,sBAGdgB,kBA7GqB,WA8GnB,OAAO9I,KAAK+I,iBAGdC,kBAjHqB,WAiHD,IAAAzF,EAAAvD,KACZiJ,EAAS,GAEfjJ,KAAK0I,YAAYQ,UAAU,SAAAnH,GACrBA,IAAUwB,EAAK4F,sBACjBF,EAAOG,KAAKrH,EAAMsH,YAAYC,SAASC,eAI3C,IAAMC,EAAexJ,KAAK4I,cAAcS,YAAYC,SAASC,YAM7D,OAJIC,EAAapI,QACf6H,EAAOG,KAAKI,GAGP3K,EAAE4K,QAAQC,WAAW1J,KAAM,CAChC2J,KAAM,eACNJ,YAAaN,OAKnB9B,EAAIyC,QAAJC,EAAAnL,SACAyI,EAAI2C,YAAJC,EAAArL,mBAEeyI,6PCvJfjN,EAAA,IAEA8P,EAAA9P,EAAA,OAKAA,EAAA,QAEAA,EAAA,iEAEeiO,EAAc,CAE3B8B,kBAF2B,WAGzB,YAAqCzH,IAA9BxC,KAAKmJ,sBAGdxH,qBAAiBa,EACjB0H,qBAAiB1H,EACjBd,wBAAoBc,EACpB2H,UAAW,OACXC,sBAAkB5H,EAClB6H,cAAe,KAEf5O,KAb2B,SAatBkO,GACC3J,KAAA,UAAe2J,IACjB3J,KAAKsK,aAAaX,GAElB3J,KAAKuK,eAGLZ,EAAO3J,KAAA,UAAe2J,MAAaA,EAEnC3J,KAAKwK,SAASb,IAEdc,QAAQC,MAAR,SAAuBf,EAAvB,qBAGJlH,OA3B2B,SA2BpBkH,GACL,OAAOA,IAAS3J,KAAKmK,WAEvBQ,YA9B2B,WA+BzB3K,KAAK4K,mBAEP9H,MAjC2B,WAiCnB,IAAAR,EAAAtC,KACNA,KAAKuK,eACLvK,KAAK6K,YACLC,WAAW,WACTxI,EAAKW,KAAKC,EAAAxE,QAAO3B,cAChB,IASLgO,UA/C2B,WAiDV/K,KAAK4I,cAENoC,YACRhL,KAAKmJ,qBACPnJ,KAAKiL,yBAELjL,KAAKkL,0BAITlL,KAAK8C,QACL9C,KAAKvE,KAAK,QAEV,IAAI0P,EAAUnL,KAAK0I,YAAYW,YAC/B,OAAI8B,EAAQ7B,SACH6B,EAAQ7B,SAEV,IAETpC,YApE2B,SAoEfkE,GACV,IAAIC,EAAWrL,KAAKN,QAAQwH,aAAejD,OAAOqH,MAAQrH,OAAOqH,KAAKC,KAMtE,OAJKF,GACHZ,QAAQe,KAAK,gEAGPH,EAAYA,EAASD,GAAW,GAO1CG,KAlF2B,WAkFV,IAOXE,EAPWC,GAAAnJ,UAAAnB,OAAA,QAAAoB,IAAAD,UAAA,GAAAA,UAAA,GAAJ,IAENoJ,kBAFUnJ,IAAAkJ,EAEG,EAFHA,EAGXE,EAAS5L,KAAK0I,YACdmD,EAAgB7L,KAAK4I,cACrBkD,EAAgB9L,KAAKmJ,qBAIrB4C,EAAUF,EAAcb,UAAyF,EAA5EhL,KAAKkH,aAAY,EAAA8C,EAAAgC,kBAAiBH,EAAcxC,YAAasC,IAClGM,EAAQjM,KAAKkH,aAAY,EAAA8C,EAAAgC,kBAAiBJ,EAAOvC,YAAasC,IAE9DO,EAASJ,EAAiB9L,KAAKkH,aAAY,EAAA8C,EAAAgC,kBAAiBF,EAAczC,YAAasC,IAAe,EAQ1G,OANI3L,KAAKiK,qBAAuB8B,EAAQ,IACtCE,GAASC,GAGXT,EAAOM,EAAQ,EAAME,EAAQF,EAASE,GAE/B,EAAAjC,EAAAmC,WAAUV,EAAKE,IAExBS,kBAxG2B,WAyGzB,OAAOpM,KAAK2B,iBAEd0K,oBA3G2B,WA4GzBrM,KAAK2B,gBAAkB,MAEzBH,kBA9G2B,SA8GTF,GAChB,IAAKA,IAAWA,EAAOL,MACrB,MAAM,IAAIqL,MAAM,8DAElBtM,KAAK2B,gBAAkBL,GAEzBqD,cApH2B,SAoHb4H,GACZvM,KAAK6I,mBAAmB2D,cACxBxM,KAAK6D,oBAAoB2I,cAEzBD,EAAQzJ,QAER9C,KAAKqM,sBACLrM,KAAKiL,0BAEPwB,kBA7H2B,SA6HTC,GAChB,IAAIC,EAAU9N,EAAE8N,QAAQD,GAGpB1M,KAAKmJ,qBACPnJ,KAAKiL,yBAELjL,KAAKkL,yBAGPlL,KAAK8C,QAEL,IAAIf,EAAQ4K,EAAQ7L,YAAY,GAEhC,GAAIiB,EAGF,IAFA,IAAIjC,EAASiC,EAAMjB,YACf8L,EAAS5M,KAAK0I,YACTpO,EAAI,EAAGA,EAAIwF,EAAOsB,OAAQ9G,IAAK,CACtC,IAAIuS,EAAK/M,EAAOxF,GAChBsS,EAAOE,SAASD,GAQpB,OAJA7M,KAAKvE,KAAK,QAEVuE,KAAK+M,cAEEJ,GAGTxD,mBA3J2B,WA4JzB,OAAOnJ,KAAKkK,iBAEd8C,mBA9J2B,SA8JRjL,GACjB/B,KAAKkK,gBAAkBnI,GAEzBkL,qBAjK2B,WAkKzBjN,KAAKkK,qBAAkB1H,GAEzB0K,oBApK2B,SAoKPnL,GAClBA,EAAMoL,cAEDpL,IAIL/B,KAAKoN,oBAAoBpN,KAAKmJ,sBAE9BnJ,KAAKgN,mBAAmBjL,GACxBA,EAAMsL,MAAMxI,MAAMyI,WAAa,WAEjCF,oBAhL2B,WAgLuB,IAA9BrL,EAA8BQ,UAAAnB,OAAA,QAAAoB,IAAAD,UAAA,GAAAA,UAAA,GAAtBvC,KAAKkK,gBAC1BnI,IAGLA,EAAMsL,MAAMxI,MAAMyI,WAAa,KAEjCpC,uBAtL2B,WAuLzB,IAAI0B,EAAS5M,KAAK0I,YACd6E,EAAWvN,KAAK4I,cAEhBnF,EAAQ8J,EAASC,WACjBlK,EAAUiK,EAASE,aAEnBnK,EAAQlC,QAAU,IAIlBsM,MAAMC,QAAQlK,IACZA,IACFH,EAAU,CAACA,GAASsK,OAAOnK,IAG/BmJ,EAAOE,SAASjO,EAAE0N,QAAQjJ,MAE5B2H,uBAxM2B,WAyMzB,IAAIsC,EAAWvN,KAAK4I,cAChBiF,EAAiB7N,KAAKmJ,qBAErB0E,IAILA,EAAe5L,SAAWsL,EAASE,aACnCI,EAAe1L,OAASoL,EAASC,WACjCK,EAAeC,WAGjBC,eArN2B,SAqNZC,GACb,GAAIA,uBAA8B,CAChC,IAAIT,EAAWvN,KAAK4I,cAChB9I,EAASkO,EAAMlN,YAEfmN,GADJnO,EAASA,EAAOiB,OAAO,SAACgB,GAAD,OAAYA,EAAMmM,cAChB/N,IAAI,SAAC4B,GAAD,OAAWA,EAAMoM,cAE1C1K,EAAQ8J,EAASC,WASrB,OAPI/J,IACFwK,EAAc,CAACA,GAAaL,OAAOnK,IAGrC8J,EAASa,WAAWH,GACpBV,EAASO,SAEFP,IAGX/C,SAxO2B,SAwOlBb,GACP,IAAIjK,EAAUM,KAAKN,QACnBM,KAAK4I,cAAcyF,SAAS3O,EAAQmF,MAAM8E,KAG5CW,aA7O2B,SA6OdX,GACX,IACE3J,KAAKsO,WAAWpN,UAAUqN,OAA1B,OAAwCvO,KAAKmK,WAC7CnK,KAAKsO,WAAWpN,UAAUsN,IAA1B,OAAqCxO,KAAKmK,WAE1CnK,KAAKmK,UAAYR,EACjB,MAAO9G,GACP4H,QAAQC,MAAM,0BAGlBqC,YAvP2B,WAwPmB,IAAxC/M,KAAK0I,YAAY5H,YAAYM,QAC/BpB,KAAKyO,UAAUzO,KAAK0I,YAAYgG,YAAa,CAACC,QAAS,CAAC,GAAI,OAGhE9D,UA5P2B,WA6PzB7K,KAAK2I,YAAY6D,cACjBxM,KAAK4I,cAAc9F,QACnB9C,KAAK6I,mBAAmB/F,QACxB,IAAI8L,EAAiB5O,KAAK8I,oBAEtB8F,GACFA,EAAepO,YAAYsC,QAG7B9C,KAAK6D,oBAAoB2I,cAEzBxM,KAAKoK,sBAAmB5H,EAExBxC,KAAKoN,sBACLpN,KAAKiN,uBACLjN,KAAKqM,uBAEP9B,aA9Q2B,WA+QzBvK,KAAK6O,qBAEPC,mBAjR2B,WAkRzB,IACMC,EADW/O,KAAK4I,cACG0F,WAErBS,GACFA,EAAQC,cAAcC,sBAAsB,YAAaF,KAtRhDG,EAAAxQ,wFCXf,MAAAyQ,EAAAjV,EAAA,GACAkV,EAAAlV,EAAA,iDAEe,CACb0Q,gBADa,WACM,IAAAtI,EAAAtC,KACjBA,KAAK6O,oBAGL7O,KAAK4C,GAAG,QAAS,SAACC,GAEhB,KAAIA,EAAEwM,eAA6C,IAA5BxM,EAAEwM,cAAcC,SAA6C,IAA5BzM,EAAEwM,cAAcE,SAIpE1M,EAAE2M,kBAAkB3Q,EAAE4Q,QAA1B,CAIA,IAAIC,EAAgB7M,EAAE2M,OAAO3G,mBAG7B,GAAI6G,EAAc1E,UAAW,CAC3B1I,EAAKqN,WAAW9M,GAEhBP,EAAKW,KAAKC,EAAAxE,QAAOpC,uBACjB,IAAIsT,EAAiBtN,EAAK5C,QAAQmF,MAAb,UASrB,OAPI+K,GACFtN,EAAKsG,cAAcyF,SAASuB,GAG9BtN,EAAK2K,uBAEL3K,EAAKyG,gBAAkB2G,GAChB,EAIT,IAAIG,EAAcH,EAAc9N,WAEhC,GAAIiO,GAAeA,EAAYhO,gBAI7B,OAHMgB,EAAE2M,kBAAkB3Q,EAAE4Q,QAC1BnN,EAAKqN,WAAW9M,IAEX,EAIT,IAAIiN,EAAiBxN,EAAKuB,oBACtBkM,EAAWD,EAAeE,cAC9B,GAAIH,IAAgBA,EAAYhO,mBACzBgB,EAAE2M,OAAO5G,cAAcyE,QAAUxK,EAAEwM,cAAcG,QAC/CO,GAAaA,EAASnO,YAAemO,EAASnO,WAAWC,iBAAiB,CAC7ES,EAAK+J,sBAEL,IAAIzI,EAAakM,EAAehM,eAShC,OARAF,EAAWP,IAAIR,EAAEvC,OAAQ,KAAM,CAAErB,mBAEjCqD,EAAKyG,gBAAkBnF,EACvBtB,EAAKW,KAAKC,EAAAxE,QAAOnC,oBAEjB+F,EAAKuB,oBAAoBoM,iBACzB3N,EAAKuG,mBAAmBoH,kBAEjB,EAMb,GAAIF,IAAaA,EAAS/E,WAAa+E,EAASxO,iBAG9C,OAFAuO,EAAeE,cAAc3M,IAAIR,EAAEvC,SAE5B,EAKLgC,EAAK6G,qBACP7G,EAAK2I,yBAEL3I,EAAK4I,yBAEP5I,EAAKQ,QACLR,EAAK7G,KAAK,QAEV6G,EAAKW,KAAKC,EAAAxE,QAAOlC,uBAGnBwD,KAAK4C,GAAGM,EAAAxE,QAAOjC,UAAW,SAACoG,GACzB,IAAI6M,EAAgB7M,EAAEqN,OAEtB,GAAKR,EAAL,CAIIA,EAAclQ,SAChB8C,EAAKuB,oBAAoBsM,gBAG3B,IAAIrQ,EAAS4P,EAAc5O,YAEvBuB,GAAY,EAChBvC,EAAO0D,QAAQ,WACb,IAAIlC,EAASoO,EAAchN,UAAUL,EAAU,KAAM,CAAEpD,oBACvDoD,EAAWf,EAAOe,SAAW,IAI/BqN,EAAclP,YAAYsC,QAE1B4M,EAAcU,SAGd9N,EAAKsG,cAAcyF,SAAS/L,EAAK5C,QAAQmF,MAAMU,MAG3CmK,EAAclQ,QAChB8C,EAAKW,KAAKC,EAAAxE,QAAOhC,cAEjB4F,EAAKW,KAAKC,EAAAxE,QAAO/B,oBAIrB,IAAMiQ,EAAS5M,KAAK0I,YAEpBkE,EAAOhK,GAAG,QAAS,SAACC,GAClB,IAAM+L,EAAiBtM,EAAKwG,oBAExB8F,IAAmBA,EAAerN,mBAEpCqL,EAAOyD,QAAQxN,GAEfP,EAAKmG,UAAU6H,IAAIhO,EAAK5C,QAAQsG,KAAKI,sBAAuB,KAAMvD,EAAE0N,YACpEjO,EAAKW,KAAKC,EAAAxE,QAAO9B,qBAIrBoD,KAAK4C,GAAGM,EAAAxE,QAAO7B,cAAe,WAC5ByF,EAAKyL,eAAezL,EAAKuG,sBAE3B7I,KAAK4C,GAAGM,EAAAxE,QAAO5B,eAAgB,WAC7BwF,EAAKuB,oBAAoB0K,YAG7BoB,WA9Ia,SAAAa,GA8IW,IAAVlQ,EAAUkQ,EAAVlQ,OAERoP,EAAgB1P,KAAK6I,mBAErBvH,EAASoO,EAAcrM,IAAI/C,GAM/B,OAJAN,KAAK+N,eAAe2B,GAEpB1P,KAAKiD,KAAKC,EAAAxE,QAAOV,WAAY,CAAEsD,WAExBA,GAETuN,kBA1Ja,WA2JX7O,KAAKyQ,IAAI,SACTzQ,KAAK0I,YAAY+H,IAAI,SAErBzQ,KAAKyQ,IAAI,YAETzQ,KAAKQ,YAAYsC,QAEjB9C,KAAKyQ,IAAIvN,EAAAxE,QAAOjC,WAEZuD,KAAK0Q,mBACA1Q,KAAK0Q,4FCxKX,IAAMvE,cAAY,SAASwE,EAAQC,GACxC,IAAIC,GAAe,GAAIF,GAAUG,MAAM,KAGvC,GAFAF,EAAOA,GAAQ,GAEVD,GAAkC,IAAxBE,EAAazP,OAC1B,OAAOuP,EAGT,IAEII,EAAO,EAEX,GAJcF,EAAa,GAAGzP,OAAS,EAI1B,CACX,IAAI4P,EAASH,EAAa,GAAGzP,OAASwP,EAAQC,EAAa,GAAGzP,OAASwP,EACvEG,EAAOJ,EAAOM,YAAYJ,EAAa,GAAGzP,OAAS4P,GAGrD,OAAOE,OAAOH,IAGH/E,mBAAmB,SAASZ,GAAmB,IACtDsB,EAD4CkE,EAAUrO,UAAAnB,OAAA,QAAAoB,IAAAD,UAAA,GAAAA,UAAA,GAAH,EAEvD,GAAI6I,QACF,MAAM,IAAIkB,MAAM,qDAHwC,IAAA6E,GAM1DzE,EAAO0E,KAAKC,MAAMD,KAAKE,UAAUlG,KAE3B9B,SAAYK,EARwCwH,EAQxCxH,KAAMJ,EARkC4H,EAQlC5H,YAExB,IAAKmE,MAAMC,QAAQpE,GACjB,MAAM,IAAI+C,MAAM,wDA4BlB,MAzBa,YAAT3C,GACEiH,EAAO,GACTrH,EAAY/F,QAAQ,SAAA+N,GAClBA,EAAO/N,QAAQ,SAAAgO,GACbA,EAAK,GAAKrF,EAAUqF,EAAK,GAAIZ,GAC7BY,EAAK,GAAKrF,EAAUqF,EAAK,GAAIZ,OAMxB,iBAATjH,GACEiH,EAAO,GACTrH,EAAY/F,QAAQ,SAAA+I,GAClBA,EAAQ/I,QAAQ,SAAA+N,GACdA,EAAO/N,QAAQ,SAAAgO,GACbA,EAAK,GAAKrF,EAAUqF,EAAK,GAAIZ,GAC7BY,EAAK,GAAKrF,EAAUqF,EAAK,GAAIZ,SAQhClE,kFC3DT,QAAAxS,EAAA,KACYkF,0JAAZlF,EAAA,QAEAA,EAAA,iEAEe2E,EAAE4S,MAAMlS,OAAO,CAC5BmS,SAAU7S,EAAE8S,MAAMC,OAElBC,WAAW,EACX7O,iBAAaR,EACb/B,kBAAc+B,EACdsP,mBAAetP,EACfuP,cAAe,EACf9R,SAAU,GACV+R,SAT4B,WAU1BhS,KAAKwM,eAEPA,YAZ4B,WAYb,IAAAlK,EAAAtC,KACbA,KAAKC,SAASuD,QAAQ,SAAClC,GACrBgB,EAAKlC,KAAK6H,YAAY3G,KAExBtB,KAAKC,SAAW,IAElBW,MAlB4B,SAkBrBT,GACLA,EAAI2M,SAAS9M,OAEf8M,SArB4B,SAqBlBxL,GACRtB,KAAKI,KAAK0M,SAASxL,GACnBtB,KAAKC,SAASmJ,KAAK9H,GACI,MAAnBA,EAAOe,UACTrC,KAAKC,SAASgS,KAAKjS,KAAKC,SAASmB,OAAS,EAAGE,EAAOe,UAEtDf,EAAOe,SAA+B,MAAnBf,EAAOe,SAAoBf,EAAOe,SAAWrC,KAAKC,SAASmB,OAAS,GAEzFmN,OA7B4B,WA6BlB,IAAAhL,EAAAvD,KACMA,KAAKc,YACXiD,MAAM,SAACzC,GACb,KAAOiC,EAAKzC,YAAYM,QACtBmC,EAAK2O,aAAa5Q,KAItB,IAAInB,EAAMH,KAAKI,KAEXJ,KAAKR,QACPW,EAAI8C,KAAKC,EAAAxE,QAAOzB,eAEhBkD,EAAIuI,YAAYT,YAAY9H,EAAIgJ,sBAChChJ,EAAI8C,KAAKC,EAAAxE,QAAOxB,mBAIpB+K,YA/C4B,SA+Cf3G,GACX,IAAIe,EAAWf,EAAOe,SACtBrC,KAAKI,KAAK6H,YAAY3G,GACtBtB,KAAKC,SAASkS,OAAO9P,EAAU,IAEjCvB,UApD4B,WAqD1B,OAAOd,KAAKC,UAEdiJ,UAvD4B,SAuDjBkJ,GACTpS,KAAKC,SAASuD,QAAQ4O,IAExBC,SA1D4B,SA0DlBhQ,GACR,IAAI0O,EAAO/Q,KAAKC,SAASoC,GAEzB,OAAIA,EAAW,EACNrC,KAAK6P,oBAGDrN,IAATuO,IACFA,EAAO/Q,KAAKsS,cAGPvB,IAETlB,YAvE4B,WAwE1B,OAAO7P,KAAKC,SAAS,IAEvBqS,WA1E4B,WA2E1B,IAAIC,EAAUvS,KAAKC,SACnB,OAAOsS,EAAQA,EAAQnR,OAAS,IAElC8Q,aA9E4B,SA8Ed5Q,GACZ,IAAIkR,GAAKlR,EAAO4M,WAEZuE,EAAanR,EAAOoR,MACpBC,EAAarR,EAAOsR,MACpBC,EAAiBvR,EAAOsR,MAAMA,MAClC5S,KAAK8S,eAAexR,EAAOe,UAC3BrC,KAAK8S,eAAeL,EAAWpQ,UAC/BrC,KAAK8S,eAAeH,EAAWtQ,UAE/B,IAAIlC,EAAMH,KAAKI,KAEXJ,KAAKc,YAAYM,OAAS,GAC5BpB,KAAKmD,gBAAgB0P,EAAexQ,UAEhCmQ,GACFrS,EAAI8C,KAAKC,EAAAxE,QAAO7B,cAAe,CAAEyE,OAAQA,MAGvCtB,KAAKR,SACPW,EAAI8H,YAAYjI,MAChBG,EAAI8C,KAAKC,EAAAxE,QAAOZ,YAAa,CAAEwD,OAAQA,MAEvCnB,EAAI8C,KAAKC,EAAAxE,QAAO5B,gBAEhBqD,EAAIwE,cAAcxE,EAAIyI,gBAExBzI,EAAI8C,KAAKC,EAAAxE,QAAOlC,sBAGpBsW,eA5G4B,SA4GZzQ,GAKd,IAAIf,EAJJ,GAAgC,IAA5BtB,KAAKc,YAAYM,QAKG,iBAAbiB,EAAX,CACEf,EAAStB,KAAKqS,SAAShQ,GAKzB,IAAI0Q,GAAa,EACbR,EAAUvS,KAAKC,SAcnB,GAbAsS,EAAQ/O,QAAQ,SAACwP,GACXD,IACFC,EAAQ3Q,SAAiC,IAArB2Q,EAAQ3Q,SAAkB,EAAI2Q,EAAQ3Q,SAAW,GAEnE2Q,IAAY1R,IACdA,EAAOoR,MAAME,MAAQtR,EAAOsR,MAC5BtR,EAAOsR,MAAMF,MAAQpR,EAAOoR,MAC5BK,GAAa,KAIjB/S,KAAKiI,YAAY3G,GAEbiR,EAAQnR,OAAS,IACnBpB,KAAK8C,SACA9C,KAAKR,SAAS,CACjB,IAAIW,EAAMH,KAAKI,KACfD,EAAIyI,cAAc9F,QAClB3C,EAAIuI,YAAYT,YAAY9H,EAAIgJ,yBAItC8J,eAhJ4B,WAiJ1B,QAASjT,KAAKc,YAAYoS,KAAK,SAAA5R,GAAA,OAAUA,EAAOL,MAAMC,UAAUC,SAAS/B,EAAMR,UAAUc,QAAQX,cAEnG2D,UAnJ4B,SAmJjBpC,EAAQ+B,EAAU3C,GAE3B,GAAsB,iBAAXY,EAAqB,CAC9B+B,EAAWrC,KAAKqS,SAAS/R,GAAQ+B,SACjCrC,KAAKmT,iBAAiB9Q,GAEtB,IAAIoQ,EAAcpQ,EAAW,EAAK,EAAIrC,KAAKsS,aAAetS,KAAKqS,SAAShQ,EAAW,GAC/EsQ,EAAa3S,KAAKqS,UAAuB,GAAbhQ,EAAkB,EAAIA,GACtD/B,EAASN,KAAKoT,iBAAiBX,EAAYE,GAG7C,IAAIrR,EAAS,IAAA+R,EAAA3U,QAAWsB,KAAMM,EAAQZ,GAmCtC,OAlCKM,KAAKS,eACRT,KAAKS,aAAea,EACpBtB,KAAKgD,YAAc1B,QAGJkB,IAAbH,IACFf,EAAOe,SAAWA,GAGpBrC,KAAK8M,SAASxL,GAGZA,EAAOe,cAAgCG,IAApBlB,EAAOe,SAA2Bf,EAAOe,SAAWrC,KAAK+R,gBAC5EzQ,EAAOoR,MAAQ1S,KAAKgD,YACpBhD,KAAKS,aAAaiS,MAAQpR,EACtBA,EAAOoR,QACT1S,KAAKgD,YAAY4P,MAAQtR,EACzBA,EAAOsR,MAAQ5S,KAAKS,mBAIP+B,IAAbH,IACFrC,KAAKgD,YAAc1B,QAIJkB,IAAbH,GACFrC,KAAKsT,iBAAiBhS,GAGnBA,EAAO4M,YACVlO,KAAKI,KAAK6C,KAAKC,EAAAxE,QAAOX,kBAAmB,CAAEuD,OAAQA,IAG9CA,GAETwB,MAnM4B,WAmMnB,IAAAY,EAAA1D,KACHuT,EAAMvT,KAAKwT,OAEfxT,KAAKwM,cAEL+G,EAAI/P,QAAQ,SAAC0E,GACXxE,EAAK+P,cAAcvL,KAGrBlI,KAAK+R,cAAgB,EAErB/R,KAAKS,kBAAe+B,GAEtBiR,cAhN4B,SAgNbvL,UACNlI,KAAKI,KAAKsT,gBAAgBC,cAAczL,UACxClI,KAAKI,KAAKsT,gBAAgBE,aAAa1L,IAEhDkL,iBApN4B,SAoNVS,EAASC,GACzB,IAAI3T,EAAMH,KAAKI,KACb2T,EAAK5T,EAAI6T,QAAQH,EAAQ1F,aACzB8F,EAAK9T,EAAI6T,QAAQF,EAAQ3F,aAE3B,OAAOhO,EAAI+T,UAAUH,EAAG3R,KAAK6R,GAAIE,UAAU,KAE7ChB,iBA3N4B,SA2NV9Q,GAAU,IAAA+R,EAAApU,KACtBuS,EAAUvS,KAAKC,SAEfoU,GAAY,EAChB9B,EAAQ/O,QAAQ,SAAClC,EAAQ7B,GACnB4C,IAAa5C,IACf4U,GAAY,GAEVA,IACFD,EAAKnU,SAASR,GAAW4C,UAAY,MAI3CiR,iBAxO4B,WAwOR,IAAAgB,EAAAtU,KACduS,EAAUvS,KAAKC,SAEnBsS,EAAQ/O,QAAQ,SAAClC,EAAQe,GAEvBf,EAAOoR,MAAQ4B,EAAKjC,SAAShQ,EAAW,GACxCf,EAAOsR,MAAQ0B,EAAKjC,SAAShQ,EAAW,GAGvB,IAAbA,IACFf,EAAOoR,MAAQ4B,EAAKhC,aACpBhR,EAAOsR,MAAQ0B,EAAKjC,SAAS,IAI3BhQ,IAAakQ,EAAQnR,OAAS,IAChCE,EAAOoR,MAAQ4B,EAAKjC,SAAShQ,EAAW,GACxCf,EAAOsR,MAAQ0B,EAAKjC,SAAS,OAInCmB,KA7P4B,WA8P1B,IAAIzC,EAAO,GAEX,IAAK,IAAI7I,KAAMlI,KAAKuU,QAClBxD,EAAK3H,KAAKlB,GAKZ,OAFA6I,EAAKyD,KAAK,SAACtQ,EAAGsO,GAAJ,OAAUtO,EAAIsO,IAEjBzB,GAETX,OAxQ4B,WAyQ1B,GAAIpQ,KAAKgL,UACPhL,KAAKI,KAAK2I,gBAAkB,SACvB,CACL,IAAM5I,EAAMH,KAAKI,KAEbJ,KAAKR,SACPW,EAAI0D,oBAAoBoM,iBACxB9P,EAAI0I,mBAAmBoH,iBACvB9P,EAAI0D,oBAAoB4Q,YAAYzU,QAEpCG,EAAI0D,oBAAoBoM,iBACxB9P,EAAI0D,oBAAoBsM,iBAG1BnQ,KAAKc,YAAYiD,MAAM,SAACzC,GACtBA,EAAOoT,SAASC,SAChBrT,EAAOsT,sBAET5U,KAAK6R,WAAY,EAEjB7R,KAAKI,KAAK2I,gBAAkB/I,KAC5BA,KAAKI,KAAK6C,KAAKC,EAAAxE,QAAOT,uBAG1B4W,WAjS4B,WAkS1B,OAAO7U,KAAK6R,WAEd7G,QApS4B,WAqS1B,OAAmC,IAA5BhL,KAAKc,YAAYM,QAE1B6O,eAvS4B,WAwS1BjQ,KAAKc,YAAYiD,MAAM,SAACzC,GACtBA,EAAOoT,SAASI,UAChBxT,EAAOyT,wBAET/U,KAAK6R,WAAY,8PCjTrB1C,EAAAjV,EAAA,GAEAkV,EAAAlV,EAAA,uCAEA,IACIqE,EAAYD,UAAUC,UAAUC,eAED,IAA/BD,EAAUyW,QAAQ,SAAkBzW,EAAUyW,QAAQ,oBAI3CnW,EAAE4Q,OAAOlQ,OAAO,CAC7B0V,gBAAYzS,EACZ0S,qBAAiB1S,EACjB3C,WAH6B,SAGlBmO,EAAO1N,GAAsB,IAAdZ,EAAc6C,UAAAnB,OAAA,QAAAoB,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAElC7C,EAAUyI,EAAc,CACtBlJ,YACAkW,WAAW,GACVzV,GAEHb,EAAE4Q,OAAOvT,UAAU2D,WAAWpF,KAAKuF,KAAMM,EAAQZ,GAEjDM,KAAK+C,QAAUiL,EAEfhO,KAAKoV,SAAwC,IAA7BpH,EAAMlN,YAAYM,QAGpC4M,MAjB6B,WAkB3B,OAAOhO,KAAK+C,SAGdsS,KArB6B,WAsB3B,IAAIA,EAAOrV,KAAK4S,MAAMA,MAItB,OAHK5S,KAAK4S,MAAM1E,aACdmH,EAAOrV,KAAK4S,OAEPyC,GAETC,KA5B6B,WA6B3B,IAAIA,EAAOtV,KAAK0S,MAAMA,MAItB,OAHK1S,KAAK0S,MAAMxE,aACdoH,EAAOtV,KAAK0S,OAEP4C,GAETC,kBAnC6B,WAoC3B,GAAIvV,KAAK0S,MAAMxE,WAAY,CAEzB,IAAIsH,EAAaxV,KAAKgO,QAAQoF,iBAAiBpT,KAAKsV,OAAQtV,MACxDyV,EAAazV,KAAKgO,QAAQoF,iBAAiBpT,KAAMA,KAAKqV,QAE1DrV,KAAK0S,MAAMgD,UAAUF,GACrBxV,KAAK4S,MAAM8C,UAAUD,KAGzBE,WA7C6B,SA6ClB1U,GACT,IAAIjB,KAAK6B,gBAAT,CAGA,IAAI+T,EAAK3U,UAETjB,KAAK6V,QAAQD,GACb5V,KAAKsV,OAAOO,QAAQD,GACpB5V,KAAKqV,OAAOQ,QAAQD,KAGtBE,cAxD6B,SAwDf/W,GACZF,EAAEkX,QAAQC,SAAShW,KAAKiB,MAAOlC,IAEjCkX,iBA3D6B,SA2DZlX,GACfF,EAAEkX,QAAQG,YAAYlW,KAAKiB,MAAOlC,IAEpC8C,cA9D6B,WA+D3B,OAAO7B,KAAKiB,OAASpC,EAAEkX,QAAQI,SAASnW,KAAKiB,MAAO,4BAEtDiN,SAjE6B,WAkE3B,OAAOlO,KAAKiB,OAASpC,EAAEkX,QAAQI,SAASnW,KAAKiB,MAAO,8BAC9CpC,EAAEkX,QAAQI,SAASnW,KAAKiB,MAAO,wBAEvCmV,aArE6B,WAsE3BpW,KAAKiW,iBAAiB,qBACtBjW,KAAK6V,QAAL1G,EAAAjQ,WAEFmX,QAzE6B,WA0E3B,OAAOxX,EAAEkX,QAAQI,SAASnW,KAAKiB,MAAO,sBAExCqV,WA5E6B,WA4EhB,IAAAhU,EAAAtC,KACPA,KAAKoV,UACPpV,KAAKuW,KAAK,QAAS,SAAC1T,GAClB,GAAKP,EAAKT,gBAAV,CAGA,IAAM1B,EAAMmC,EAAKlC,KACX8P,EAAS5N,EAAK0L,QAEhBkC,EAAOjQ,SAASmB,OAAS,EAC3BkB,EAAKgU,cAIPhU,EAAK8S,UAAW,EAChB9S,EAAKuT,QAAL1G,EAAAlQ,MACAkB,EAAI8C,KAAKC,EAAAxE,QAAOjC,UAAW,CAACyT,OAAQA,SAI1CsG,mBAhG6B,WAiG3B,OAAOxW,KAAKI,KAAKV,QAAQ+E,iCACtBzE,KAAKkO,YACNlO,KAAKyW,qBACLzW,KAAKI,KAAKgM,sBAAwBpM,MAClCA,KAAKgO,QAAQnN,2BAEjB6V,mBAvG6B,WAwG3B,OAAO1W,KAAKI,KAAKV,QAAQ+E,iCACtBzE,KAAKkO,YACNlO,KAAKyW,qBACLzW,KAAKI,KAAKgM,sBAAwBpM,MAClCA,KAAKgO,QAAQnN,2BAEjB8V,wBA9G6B,WA+G3B,IACM/H,EADM5O,KAAKI,KACU0I,oBAE3B,OAAO8F,GAAkBA,EAAerN,kBAAoBqN,IAAmB5O,KAAKgO,SAEtF4I,YApH6B,WAoHf,IAAArT,EAAAvD,KAEZA,KAAK4C,GAAG,YAAa,SAAAC,GACnBU,EAAKyK,QAAQ3M,YAAbkC,GACAA,EAAK2R,gBAAkBrS,EAAE2M,OAAOqH,QAE5BtT,EAAKmP,MAAM2D,WACb9S,EAAKyK,QAAQ5K,iBAAiBG,EAAKlB,UAGrCkB,EAAKnD,KAAK6C,KAAKC,EAAAxE,QAAOhB,kBAEtB6F,EAAKuT,YAAa,IAGpB9W,KAAK4C,GAAG,QAAS,WACf,IAAMsN,EAAS3M,EAAKyK,QACd7N,EAAMoD,EAAKnD,KAEjB,IAAImD,EAAKoT,0BAAT,CAIA,GAAIpT,EAAKmT,qBAGP,OAFAxG,EAAO7O,YAAPkC,QACApD,EAAIsI,UAAU6H,IAAInQ,EAAIT,QAAQsG,KAAKC,eAAgB,QAAnD1C,GAIF,KAAI2M,EAAO3O,kBAAoBgC,IAAS2M,EAAOtO,YAI3C2B,EAAK1B,kBAITqO,EAAO7O,YAAPkC,GACIA,EAAK1B,iBAILqO,EAAOtO,WAAWC,kBAAtB,CAIA,IAAK0B,EAAKkT,oBAaR,OAZAvG,EAAOE,SAEH7M,EAAK2K,WACP/N,EAAIsI,UAAU6H,IAAInQ,EAAIT,QAAQsG,KAAKG,mBAAoB,KAAvD5C,GAEApD,EAAIsI,UAAU6H,IAAInQ,EAAIT,QAAQsG,KAAKM,8BAA+B,KAAlE/C,QAGEA,EAAKiT,sBACPrW,EAAIsI,UAAU6H,IAAInQ,EAAIT,QAAQsG,KAAKC,eAAgB,QAAnD1C,IAMAA,EAAK2K,YACPgC,EAAO9M,iBAAiBG,EAAKlB,UAC7BkB,EAAKoS,WAALxG,EAAAlQ,MACAiR,EAAOE,SACPjQ,EAAIsI,UAAU6H,IAAInQ,EAAIT,QAAQsG,KAAKM,8BAA+B,KAAlE/C,GAEApD,EAAIkM,uBAGC6D,EAAOtO,WAAWC,iBAAoB0B,EAAKwT,eAC9C5W,EAAIsI,UAAUuO,OAEd9G,EAAOgC,aAAP3O,GAEI2M,EAAOlF,YACLkF,EAAO1Q,QACTW,EAAI8C,KAAKC,EAAAxE,QAAOzB,cAEhBkD,EAAI8C,KAAKC,EAAAxE,QAAOxB,iBAElBiD,EAAIsI,UAAUuO,QAEhB9G,EAAOE,UAIX7M,EAAKwT,cAAe,MAGtB/W,KAAK4C,GAAG,YAAa,WACnB,IAAKW,EAAKmR,SAASuC,SACjB,OAAO,IAIXjX,KAAK4C,GAAG,YAAa,SAACC,GACpBA,EAAEwM,cAAc6H,kBAEhB,IAAMC,EAAiB5T,EAAKnD,KAAKgM,oBAC3BgL,KAA4BD,IAAkBA,EAAeL,YAEnE,IAAIvT,EAAKoT,4BAA6BS,EAAtC,CAIA,IAAMjX,EAAMoD,EAAKnD,KACbmD,EAAKyK,QAAQpM,WAAWC,gBACtB0B,EAAKyK,QAAQlN,YAAYM,OAAS,IAChCmC,EAAK1B,gBACP1B,EAAI8C,KAAKC,EAAAxE,QAAOvB,uBAAwB,CAACmE,WAChCiC,IAASA,EAAKyK,QAAQhL,aAC/B7C,EAAI8C,KAAKC,EAAAxE,QAAO1B,+BAAgC,CAACsE,YAIjDiC,EAAKkT,oBACHlT,EAAK2K,WACP/N,EAAI8C,KAAKC,EAAAxE,QAAOtB,iCAAkC,CAACkE,WAEnDnB,EAAI8C,KAAKC,EAAAxE,QAAOrB,0BAA2B,CAACiE,WAG9CnB,EAAI8C,KAAKC,EAAAxE,QAAOpB,8BAA+B,CAACgE,WAGhDiC,EAAKiT,sBACPrW,EAAIsI,UAAU6H,IAAInQ,EAAIT,QAAQsG,KAAKC,eAAgB,QAAnD1C,MAGJvD,KAAK4C,GAAG,WAAY,SAACC,GACnBA,EAAEwM,cAAc6H,kBAEhB,IAAMC,EAAiB5T,EAAKnD,KAAKgM,oBAC3BgL,KAA4BD,IAAkBA,EAAeL,YAE/DvT,EAAKoT,2BAA6BS,GAItC7T,EAAKnD,KAAK6C,KAAKC,EAAAxE,QAAOnB,mBAGxByC,KAAKsW,aAELtW,KAAK4C,GAAG,WAAY,WAClB,IAAIW,EAAKoT,0BAAT,CAIA,IAAIzG,EAAS3M,EAAKyK,QACdkC,GAAUA,EAAOtO,YAAcsO,EAAOtO,WAAWC,iBAC/C0B,IAAS2M,EAAOlN,aAClBkN,EAAOtO,WAAWqB,KAAK,YAK7BjD,KAAK4C,GAAG,OAAQ,SAACC,GACfU,EAAK8T,QAAQxU,KAGf7C,KAAK4C,GAAG,UAAW,SAACC,GAElBU,EAAKwT,cAAe,EACpBxT,EAAKuT,YAAa,EAClBvT,EAAK+T,WAAWzU,MAIpB3C,MA/R6B,SA+RvBC,GACJtB,EAAE4Q,OAAOvT,UAAUgE,MAAMzF,KAAKuF,KAAMG,GAEpCH,KAAK4W,YAAYzW,IAEnBkX,QApS6B,SAoSrBxU,GACOA,EAAE2M,OAER+F,oBAEP,IAAIpV,EAAMH,KAAKI,KACfD,EAAI4N,eAAe5N,EAAI0I,oBAEvB7I,KAAKoW,eAELjW,EAAI8C,KAAKC,EAAAxE,QAAOlB,YAAa,CAAC8D,OAAQtB,QAExCsX,WAhT6B,WAkT3BtX,KAAKgO,QAAQoC,SACbpQ,KAAKI,KAAK6C,KAAKC,EAAAxE,QAAOjB,eAAgB,CAAC6D,OAAQtB,OAE/CA,KAAKI,KAAK6C,KAAKC,EAAAxE,QAAOrB,0BAA2B,CAACiE,OAAQtB,OAE1DA,KAAKuX,cAEPC,UAzT6B,WA0T3BxX,KAAKiW,iBAAiB,2BAExBlB,oBA5T6B,WA6T3B/U,KAAKiW,iBAAiB,mBAExBwB,mBA/T6B,WAgUtBzX,KAAKkO,YACRlO,KAAK8V,cAAc,qBAErB9V,KAAK8V,cAAc,mBAErBlB,kBArU6B,WAsUvB5U,KAAK0S,OACP1S,KAAK0S,MAAM+E,qBAEbzX,KAAKyX,qBACDzX,KAAK4S,OACP5S,KAAK4S,MAAM6E,sBAGfhB,kBA9U6B,WA+U3B,OAAO5X,EAAEkX,QAAQI,SAASnW,KAAKiB,MAAO,mBAExC+Q,SAjV6B,SAiVpB7R,GACPH,KAAKyQ,IAAI,YAET5R,EAAE4Q,OAAOvT,UAAU8V,SAASvX,KAAKuF,KAAMG,IAGzCoX,WAvV6B,WAwV3BvX,KAAKwX,YACLxX,KAAK4U,gHC/VM,WAAY,IAAAtS,EAAAtC,KAEzBA,KAAK0X,UAAU5C,UACf9U,KAAK2X,gBAAgB7C,UAErB9U,KAAK4X,QAAQ9C,UACb9U,KAAK6X,SAAS/C,UAEd,IAAIrM,EAAYzI,KAAKyI,UAAY,IAAAqP,EAAApZ,QAAc,CAC7CqZ,WAAY/X,KAAKN,QAAQsG,KAAKS,+BAGhCzG,KAAK4C,GAAG,iBAAkB,WACxB,IAAIoD,EAAO1D,EAAK5C,QAAQsG,KAExB1D,EAAKM,GAAGM,EAAAxE,QAAOT,oBAAqB,WAElCqE,EAAKmO,IAAIvN,EAAAxE,QAAOpB,+BAChBgF,EAAKM,GAAGM,EAAAxE,QAAOpB,8BAA+B,SAAC0a,GAC7CvP,EAAU6H,IAAItK,EAAKO,mBAAoB,KAAMyR,EAAK1W,UAGpDgB,EAAKmO,IAAIvN,EAAAxE,QAAOrB,2BAChBiF,EAAKM,GAAGM,EAAAxE,QAAOrB,0BAA2B,SAAC2a,GACzCvP,EAAU6H,IAAItK,EAAKM,8BAA+B,KAAM0R,EAAK1W,UAG/DgB,EAAKmO,IAAIvN,EAAAxE,QAAOtB,kCAChBkF,EAAKM,GAAGM,EAAAxE,QAAOtB,iCAAkC,SAAC4a,GAChDvP,EAAU6H,IAAItK,EAAKG,mBAAoB,KAAM6R,EAAK1W,UAIpDgB,EAAKmO,IAAIvN,EAAAxE,QAAOf,wBAChB2E,EAAKM,GAAGM,EAAAxE,QAAOf,uBAAwB,SAACqa,GACtCvP,EAAU6H,IAAItK,EAAKI,sBAAuB,KAAM4R,EAAKzH,cAGvDjO,EAAKmO,IAAIvN,EAAAxE,QAAOb,uBAChByE,EAAKM,GAAGM,EAAAxE,QAAOb,sBAAuB,WACpC4K,EAAUuO,SAIZ1U,EAAKmO,IAAIvN,EAAAxE,QAAOR,wBAChBoE,EAAKM,GAAGM,EAAAxE,QAAOR,uBAAwB,SAAC8Z,GACtCvP,EAAU6H,IAAItK,EAAKE,YAAa,KAAM8R,EAAKzH,cAG7CjO,EAAKmO,IAAIvN,EAAAxE,QAAOP,uBAChBmE,EAAKM,GAAGM,EAAAxE,QAAOP,sBAAuB,WACpCsK,EAAUuO,WAKd1U,EAAKmO,IAAIvN,EAAAxE,QAAOnB,iBAChB+E,EAAKM,GAAGM,EAAAxE,QAAOnB,gBAAiB,WAC9BkL,EAAUuO,SAGZ1U,EAAKM,GAAGM,EAAAxE,QAAOhB,iBAAkB,WAC/B+K,EAAUuO,SAIZ1U,EAAKmO,IAAIvN,EAAAxE,QAAOvB,wBAChBmF,EAAKM,GAAGM,EAAAxE,QAAOvB,uBAAwB,SAAC6a,GACtCvP,EAAU6H,IAAItK,EAAKK,iBAAkB,KAAM2R,EAAK1W,UAIlDgB,EAAKmO,IAAIvN,EAAAxE,QAAO1B,gCAChBsF,EAAKM,GAAGM,EAAAxE,QAAO1B,+BAAgC,SAACgb,GAC9CvP,EAAU6H,IAAItK,EAAKQ,oBAAqB,KAAMwR,EAAK1W,UAGrDgB,EAAKM,GAAGM,EAAAxE,QAAOjC,UAAW,SAACub,GACrBA,EAAK1W,QACPmH,EAAU6H,IAAIhO,EAAK5C,QAAQsG,KAAKM,8BAA+B,KAAM0R,EAAK1W,YAK3E7C,EAAAC,QAAEC,mBACLqB,KAAKiY,WAAWxP,IA1FpB,QAAAvO,EAAA,SACAA,EAAA,QAEAA,EAAA,iJCHe2E,EAAEqZ,QAAQ3Y,OAAO,CAC9BG,QAAS,CACP2C,SAAU,YACV0V,WAAY,MAEdI,eAAgB,KAChBC,gBAAiB,KAEjBvY,WAR8B,SAQlBH,GACVb,EAAEwZ,KAAKC,WAAWtY,KAAMN,IAG1BQ,MAZ8B,SAYvBC,GACL,IAAIoY,EAAS1Z,EAAEkX,QAAQna,OAAO,MAAO,kBACjC4c,EAAY3Z,EAAEkX,QAAQna,OAAO,MAAO,sBAYxC,OAVAuE,EAAIsY,gBAAJ,UAAmCF,EACnCpY,EAAIuY,kBAAkBC,YAAYJ,GAElCvY,KAAK4Y,cAAcJ,EAAWrY,GAC9BA,EAAI8C,KAAK,iBAAkB,CAAE4V,QAAS7Y,OAEtCA,KAAK+S,aAEL/S,KAAK4W,YAAYzW,GAEVqY,GAETxG,SA5B8B,WA6B5BhS,KAAK8Y,cAAc3Y,KACnB4Y,SAASC,KAAKC,YAAYjZ,KAAKkZ,qBAEjCnG,WAhC8B,WAiC5B,IAAIoG,EAAgBnZ,KAAKI,KAAKqY,gBAAV,UACpB,GAAIU,GAAiBA,EAAcC,SAAShY,OAAQ,CAClD,IAAIiY,EAAQF,EAAcC,SAAS,GAAGA,SAAS,GAE/C,IAAKC,EACH,OAGF,IAAIC,EAAQD,EAAME,YACdD,IACFH,EAActU,MAAM2U,MAAQxZ,KAAKI,KAAKkO,WAAWiL,YAAcD,GAAS,EAAI,QAIlFR,cA/C8B,WAgD5B7U,OAAOwV,oBAAoB,SAAUzZ,KAAKmY,iBAE5CvB,YAlD8B,WAmD5B5W,KAAKmY,eAAiBnY,KAAK+S,WAAWjX,KAAKkE,MAC3CiE,OAAOyV,iBAAiB,SAAU1Z,KAAKmY,gBACvCnY,KAAKmY,eAAiB,MAExBS,cAvD8B,SAuDfJ,GACbxY,KAAKoY,gBAAkBvZ,EAAEkX,QAAQna,OAAO,MAAO,sCAC/CoE,KAAKkZ,mBAAqBra,EAAEkX,QAAQna,OAAO,MAAO,sCAClD4c,EAAUG,YAAY3Y,KAAKoY,iBAC3BW,SAASC,KAAKL,YAAY3Y,KAAKkZ,oBAEC,OAA5BlZ,KAAKN,QAAQqY,aACflZ,EAAEkX,QAAQG,YAAYlW,KAAKoY,gBAAiB,gBAC5CpY,KAAKoY,gBAAgBuB,UAAY3Z,KAAKN,QAAQqY,aAGlD6B,UAlE8B,SAkEnBC,GACT,IAAIC,EAAK,EACLC,EAAK,EACT,IAAK/Z,KAAKI,KAAK4Z,eAAiBha,KAAKI,KAAK4Z,eACxC,KAAOH,IAAOI,MAAMJ,EAAGK,cAAgBD,MAAMJ,EAAGM,YAC9CL,GAAMD,EAAGK,WACTH,GAAMF,EAAGM,UACTN,EAAKA,EAAGO,aAGZ,MAAO,CAAEC,EAAGN,EAAIO,EAAGR,IAErBxJ,IA9E8B,SA8EzBtK,EAAM2D,EAAM3N,GACf,GAAKgK,GAAShG,KAAKkZ,mBAInB,GAAIld,EAAQ,CAOV,IAAIue,EANJ1b,EAAEkX,QAAQG,YAAYlW,KAAKkZ,mBAAoB,gBAC/Cra,EAAEkX,QAAQG,YAAYlW,KAAKkZ,mBAAoB,eAC/Cra,EAAEkX,QAAQG,YAAYlW,KAAKkZ,mBAAoB,iBAE/ClZ,KAAKkZ,mBAAmBS,UAAY3T,EAIpC,IAAIwU,EAASxa,KAAK4Z,UAAU5Z,KAAKI,KAAKkO,YAElCtS,aAAkB6C,EAAE4b,OACtBF,EAAQve,EACRue,EAAQva,KAAKI,KAAKsa,2BAA2BH,IAE7CA,EAAQva,KAAKI,KAAKua,uBAAuB3e,EAAOmS,aAGlDoM,EAAMD,GAAKE,EAAOF,EAClBC,EAAMF,GAAKG,EAAOH,EAElBra,KAAKkZ,mBAAmBrU,MAAM+V,IAAOL,EAAMF,EAAI,EAAK,KACpDra,KAAKkZ,mBAAmBrU,MAAM2U,KAAQe,EAAMD,EAAI,GAAM,KAElD3Q,GACF9K,EAAEkX,QAAQC,SAAShW,KAAKkZ,mBAAoB,SAAWvP,QAGzD9K,EAAEkX,QAAQG,YAAYlW,KAAKoY,gBAAiB,gBAC5CvZ,EAAEkX,QAAQG,YAAYlW,KAAKoY,gBAAiB,eAC5CvZ,EAAEkX,QAAQG,YAAYlW,KAAKoY,gBAAiB,iBAE5CpY,KAAKoY,gBAAgBuB,UAAY3T,EAE7B2D,GACF9K,EAAEkX,QAAQC,SAAShW,KAAKoY,gBAAiB,SAAWzO,GAEtD3J,KAAK+S,cAGTiE,KA3H8B,WA4HxBhX,KAAKoY,iBACPvZ,EAAEkX,QAAQC,SAAShW,KAAKoY,gBAAiB,gBAGvCpY,KAAKkZ,oBACPra,EAAEkX,QAAQC,SAAShW,KAAKkZ,mBAAoB,iBAGhD2B,gBApI8B,WAqI5B,OAAO7a,KAAKI,KAAKqY,gBAAV,WAETqC,SAvI8B,SAuIpBC,GACR,OAAO/a,KAAK6a,kBAAkBxB,MAAM0B,IAEtCC,WA1I8B,SA0IlBD,GACVlc,EAAEkX,QAAQC,SAAShW,KAAK8a,SAASC,GAAM,aAEzCE,UA7I8B,SA6InBF,GACTlc,EAAEkX,QAAQG,YAAYlW,KAAK8a,SAASC,GAAM,8FC9I9CrN,MAAMxR,UAAU+V,KAAO,SAASiJ,EAAMC,GACpCnb,KAAKmS,OAAOgJ,EAAI,EAAGnb,KAAKmS,OAAO+I,EAAM,GAAG,KAE1CxN,MAAMxR,UAAU6H,MAAQ,SAASqX,GAG/B,IAFA,IAAIha,EAASpB,KAAKoB,OACd9G,EAAI,EACDA,EAAI8G,EAAQ9G,IACjB8gB,EAAK3gB,KAAKuF,KAAMA,KAAK1F,GAAIA,cAGdoT,+PCVf0B,EAAAlV,EAAA,iDAEe2E,EAAEwc,aAAa9b,OAAO,CACnCM,WADmC,SACvByD,EAAS5D,GAAS,IAAA4C,EAAAtC,KAC5BnB,EAAEwc,aAAanf,UAAU2D,WAAWpF,KAAKuF,KAAMsD,EAAS5D,GAExDM,KAAK4C,GAAG,WAAY,SAACC,GACnB,IAAIyY,EAAahZ,EAAKlC,KAAKV,QAAQmF,MAAMC,KACzCjC,EAAE2M,OAAOnB,SAASlG,EAAc,CAC9BpD,QAAS,GACTC,YAAa,IACbK,MAAO,WACNiW,IAEHhZ,EAAKlC,KAAK0O,wBAGd9D,QAfmC,WAgBjC,OAAmC,IAA5BhL,KAAKc,YAAYM,QAE1BlB,MAlBmC,SAkB5BC,GACLtB,EAAEwc,aAAanf,UAAUgE,MAAMzF,KAAKuF,KAAMG,GAE1CH,KAAK4C,GAAG,YAAa,SAACC,GACpB1C,EAAI8C,KAAKC,EAAAxE,QAAOR,uBAAwB,CAAEqS,WAAY1N,EAAE0N,eAE1DvQ,KAAK4C,GAAG,WAAY,WAClBzC,EAAI8C,KAAKC,EAAAxE,QAAOP,0BAGpBkS,QA5BmC,SA4B1BxN,GACP,IAAM1C,EAAMH,KAAKI,KACXwO,EAAiBzO,EAAI2I,oBACrB4G,EAAgBvP,EAAI0I,mBAC1B,GAAK+F,GAAkBA,EAAehN,YAAcgN,EAAehN,WAAWC,kBAAoB+M,EAAe5D,UAAY,CAC3H,IAAM0E,EAAgBvP,EAAI0I,mBAC1B6G,EAAcrM,IAAIR,EAAEvC,QACpBH,EAAI4N,eAAe2B,QAGfvP,EAAIgJ,qBACNhJ,EAAI8K,yBAEJ9K,EAAI+K,yBAEN/K,EAAI2C,QACJ3C,EAAI1E,KAAK,QAET0E,EAAI+M,oBAAoBrK,EAAEd,OAE1B2N,EAAc5N,QAAQe,EAAEd,OACxB5B,EAAI4N,eAAe2B,GAEnBA,EAAcU,UAGlB4B,SAtDmC,SAsDzB7R,GACRH,KAAKyQ,IAAI,aACTzQ,KAAKyQ,IAAI,YAETtQ,EAAIsQ,IAAIvN,EAAAxE,QAAOR,wBACfiC,EAAIsQ,IAAIvN,EAAAxE,QAAOP,mHC7DJU,EAAE0c,aAAahc,OAAO,mFCArC,QAAArF,EAAA,SAEAA,EAAA,iEAEe2E,EAAE2c,YAAcC,EAAA/c,QAAgBa,OAAO,CACpDmc,WAAOlZ,EACPmZ,GAAI,EACJxZ,OAAQ,GACRtC,WAJoD,SAIxCyD,EAAS5D,GACnBb,EAAE+c,QAAQ1f,UAAU2D,WAAWpF,KAAKuF,KAAMsD,EAAS5D,GAEnDM,KAAKN,QAAQX,UAAY,sCAE3B8c,QAToD,SAS3ChZ,GACP,IAAIvB,EAASuB,EAAEvB,OAEf,GAAIA,EAAOyB,QAAQvD,QAAS,CAC1B,IAAI+S,EAAUjR,EAAOyB,QAAQ9C,SAC7BsS,EAAUA,EAAQxR,OAAO,SAACO,GAAD,OAAaA,EAAO4M,aAC7ClO,KAAKmC,OAAOb,EAAOyB,QAAQV,UAAYkQ,EAAQpS,IAAI,SAACmB,GAAD,OAAYA,EAAO6M,cAGxEnO,KAAK8N,UAEPgO,YApBoD,SAoBvCjZ,GACX,IAAIkZ,EAAelZ,EAAEvB,OAAOyB,QAAQV,SACpCrC,KAAKmC,OAAOgQ,OAAO4J,EAAc,GAEjC/b,KAAKI,KAAKyD,oBAAoBoE,YAAYpF,EAAEvB,OAAOyB,QAAQiZ,aAC3Dhc,KAAKI,KAAKyD,oBAAoBoY,MAAMpZ,EAAEvB,OAAOyB,QAAQV,UAErDrC,KAAK8N,UAEP5N,MA7BoD,SA6B7CC,GAAK,IAAAmC,EAAAtC,KACVnB,EAAEqd,SAAShgB,UAAUgE,MAAMzF,KAAKuF,KAAMG,GAEtCA,EAAIsQ,IAAIvN,EAAAxE,QAAOX,mBACfoC,EAAIyC,GAAGM,EAAAxE,QAAOX,kBAAmB,SAAC8E,GAAD,OAAOP,EAAKuZ,QAAQhZ,KACrD1C,EAAIsQ,IAAIvN,EAAAxE,QAAOlB,aACf2C,EAAIyC,GAAGM,EAAAxE,QAAOlB,YAAa,SAACqF,GAAD,OAAOP,EAAKuZ,QAAQhZ,KAC/C1C,EAAIsQ,IAAIvN,EAAAxE,QAAO7B,eACfsD,EAAIyC,GAAGM,EAAAxE,QAAO7B,cAAe,SAACgG,GAAD,OAAOP,EAAKuZ,QAAQhZ,KACjD1C,EAAIsQ,IAAIvN,EAAAxE,QAAOZ,aACfqC,EAAIyC,GAAGM,EAAAxE,QAAOZ,YAAa,SAAC+E,GAAD,OAAOP,EAAKwZ,YAAYjZ,KAEnD7C,KAAK4C,GAAG,YAAa,SAACC,GACpB1C,EAAI8C,KAAKC,EAAAxE,QAAOf,uBAAwB,CAAE4S,WAAY1N,EAAE0N,eAG1DvQ,KAAK4C,GAAG,WAAY,kBAAMzC,EAAI8C,KAAKC,EAAAxE,QAAOb,0BAE5CmU,SA/CoD,SA+C1C7R,GACRH,KAAKyQ,IAAI,aACTzQ,KAAKyQ,IAAI,YAETtQ,EAAIsQ,IAAIvN,EAAAxE,QAAOd,wBACfuC,EAAIsQ,IAAIvN,EAAAxE,QAAOb,uBAEfgB,EAAEqd,SAAShgB,UAAU8V,SAASvX,KAAKuF,KAAMG,IAE3Cgc,QAxDoD,SAwD3CxY,GACP3D,KAAKmC,OAASnC,KAAKmC,QAAU,GAC7BnC,KAAKmC,OAAOiH,KAAKzF,GAEjB3D,KAAK8N,UAEPsO,SA9DoD,WA+DlD,OAAOpc,KAAKmC,OAAOf,OAAS,8FCnEjBvC,EAAE+c,QAAQrc,OAAO,CAC9ByL,QAD8B,WAE5B,IAAIqR,EAAUrc,KAAKyN,aACnB,OAAO4O,SAA8CA,GAA8B,IAAnBA,EAAQjb,QAE1EoM,SAL8B,WAM5B,OAAOxN,KAAKmC,QAEdma,WAR8B,WAS5Btc,KAAKmC,OAAS,GACdnC,KAAK8N,UAEPhL,MAZ8B,WAa5B9C,KAAKsc,aAED5O,MAAMC,QAAQ3N,KAAKiC,gBAAkCO,IAArBxC,KAAKiC,SAAS,IAChDjC,KAAKoO,WAAW,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,iQChBhCmO,EAAAriB,EAAA,iDAEe2E,EAAEqd,SAAS3c,OAAO,CAC/BG,QAASyI,EAAcC,EAAA1J,QAAKmG,MAAMY,SAAU,CAC1C1G,UAAW,cAEbyd,mBAAeha,EACftC,MAAO,SAAUC,GACftB,EAAEqd,SAAShgB,UAAUgE,MAAMzF,KAAKuF,KAAMG,GACtCH,KAAKqO,SAASlO,EAAIT,QAAQmF,MAAMY,WAElC9C,UAT+B,SASpBrC,GAWT,OAVIN,KAAKwc,gBACPxc,KAAKwc,mBAAgBha,GAGnBxC,KAAKiC,SAASb,OAAS,GACzBpB,KAAKiC,SAASkQ,QAAQ,GAGxBnS,KAAKiC,SAASmH,KAAKvK,EAAE4d,OAAOnc,IAErBN,KAAK8N,UAEdpN,OAtB+B,SAsBvBqa,GAYN,OAVK/a,KAAKwc,eAAiBxc,KAAKiC,SAASb,SACvCpB,KAAKwc,cAAgB3d,EAAE4d,OAAO1B,GAC9B/a,KAAKiC,SAASmH,KAAKpJ,KAAKwc,gBAEtBxc,KAAKwc,gBACPxc,KAAKwc,cAAcE,IAAM3B,EAAI2B,IAC7B1c,KAAKwc,cAAcG,IAAM5B,EAAI4B,IAE7B3c,KAAK8N,UAEA9N,MAET4c,SApC+B,SAoCrBC,EAAM7O,EAAO8O,GAChBA,GACHD,EAAKjc,MAAMoN,IAGflL,MAzC+B,WA0C7B9C,KAAKoO,WAAW,sFC5CpB,MAAA2O,EAAA7iB,EAAA,iDAEe2E,EAAE0c,aAAahc,OAAO,CACnCsS,WAAW,EACXmL,eAAWxa,EACXya,qBAAiBza,EACjBsB,aAJmC,WAajC,OARA9D,KAAKgd,UAAY,IAAApV,EAAAlJ,QACjBsB,KAAKgd,UAAUxd,SAAU,EACzBQ,KAAKgd,UAAUpc,MAAMZ,MAErBA,KAAKgd,UAAU3a,SAAWrC,KAAKkd,YAAc,EAE7Cld,KAAKid,gBAAkBjd,KAAKgd,UAErBhd,KAAKgd,WAEdE,UAfmC,WAgBjC,OAAOld,KAAKc,YAAYM,QAE1B+O,cAlBmC,WAmBjCnQ,KAAKgd,eAAYxa,GAEnBiS,YArBmC,SAqBtB1S,GACX/B,KAAKgd,UAAYjb,GAEnBiO,YAxBmC,WAyBjC,OAAOhQ,KAAKgd,WAEdzO,OA3BmC,WA4BjCvO,KAAKkJ,UAAU,SAACvF,GACd,KAAOA,EAAK7C,YAAYM,QACtBuC,EAAKmP,eAAe,MAI1BmJ,MAlCmC,SAkC5B5Z,GACLrC,KAAKkJ,UAAU,SAACnH,GACVA,EAAMM,UAAYA,IACpBN,EAAMM,UAAY,MAIxB4N,eAzCmC,WA0CjCjQ,KAAKkJ,UAAU,SAACnH,GACdA,EAAMkO,mBAERjQ,KAAK6R,WAAY,oCC/CrB,MAAAzR,EAAAlG,EAAA,uCAEA+J,OAAOkZ,cAAPC,EAAA1e","file":"dist/js/index.mapbox.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","export default {\n  start_add_new_polygon: 'editor:start_add_new_polygon',\n  start_add_new_hole: 'editor:start_add_new_hole',\n  marker_group_clear: 'editor:marker_group_clear',\n  join_path: 'editor:__join_path',\n  hole_created: 'editor:polygon:hole_created',\n  polygon_created: 'editor:polygon:created',\n  polygon_selected: 'editor:polygon:selected',\n  delete_marker: 'editor:delete_marker',\n  delete_polygon: 'editor:delete_polygon',\n\n  map_cleared: 'editor:map_cleared',\n\n  last_marker_dblclick_mouseover: 'editor:last_marker_dblclick_mouseover',\n\n  hole_deleted: 'editor:polygon:hole_deleted',\n  polygon_deleted: 'editor:polygon:deleted',\n\n  first_marker_mouseover: 'editor:first_marker_mouseover',\n\n  selected_middle_marker_mouseover: 'editor:selected_middle_marker_mouseover',\n\n  selected_marker_mouseover: 'editor:selected_marker_mouseover',\n  not_selected_marker_mouseover: 'editor:not_selected_marker_mouseover',\n\n  marker_mouseout: 'editor:marker_mouseout',\n\n  drag_marker: 'editor:drag_marker',\n\n  dragend_marker: 'editor:dragend_marker',\n  marker_dragstart: 'editor:marker_dragstart',\n\n  edit_polygon_mousemove: 'editor:edit_polygon_mousemove',\n  edit_polygon_mouseover: 'editor:edit_polygon_mouseover',\n  edit_polygon_mouseout: 'editor:edit_polygon_mouseout',\n\n  delete_hole: 'editor:delete_hole',\n\n  before_add_marker: 'editor:before_add_marker',\n  add_marker: 'editor:add_marker',\n  marker_group_select: 'editor:marker_group_select',\n\n  view_polygon_mousemove: 'editor:view_polygon_mousemove',\n\n  view_polygon_mouseout: 'editor:view_polygon_mouseout'\n}\n","import m from './utils/mobile.js';\n\nvar size = 1;\nvar userAgent = navigator.userAgent.toLowerCase();\n\nif (m.isMobileBrowser()) {\n  size = 2;\n}\n\nexport const firstIcon = L.divIcon({\n  className: \"m-editor-div-icon-first\",\n  iconSize: [10 * size, 10 * size]\n});\n\nexport const icon = L.divIcon({\n  className: \"m-editor-div-icon\",\n  iconSize: [10 * size, 10 * size]\n});\n\nexport const dragIcon = L.divIcon({\n  className: \"m-editor-div-icon-drag\",\n  iconSize: [10 * size * 3, 10 * size * 3]\n});\n\nexport const middleIcon = L.divIcon({\n  className: \"m-editor-middle-div-icon\",\n  iconSize: [10 * size, 10 * size]\n});\n","import BaseMGroup from '../../extended/BaseMarkerGroup.js';\n\nimport EVENTS from '../../event-names.js';\n\nimport * as icons from '../../marker-icons.js';\n\nL.MarkerGroup = BaseMGroup.extend({\n  _isHole: false,\n  _position: null,\n  options: {\n    mIcon: null,\n    mHoverIcon: null\n  },\n  initialize (layers) {\n    L.LayerGroup.prototype.initialize.call(this, layers);\n\n    this._markers = [];\n  },\n  onAdd (map) {\n    this._map = map;\n  },\n  _updateDELine (latlng) {\n    const deLine = this.getDELine();\n    if (this._firstMarker) {\n      deLine.update(latlng);\n    }\n    return deLine;\n  },\n  getDELine () {\n    if (!this._map) {\n      this._map.dashedEditLineGroup.addTo(this._map);\n    }\n    return this._map.dashedEditLineGroup;\n  },\n  hasMinimalMarkersLength() {\n    return this.getLayers().filter((item) => {\n      return item._icon.classList.contains('m-editor-div-icon') && !item._icon.classList.contains('m-editor-middle-div-icon');\n    }).length <= 3;\n  },\n  setSelected (marker) {\n    var map = this._map;\n\n    if (this.hasFirstMarker()) {\n      map.setSelectedMarker(this.getLast());\n      map._oldSelectedMarker = map._selectedMarker;\n      return;\n    }\n\n    map._oldSelectedMarker = map._selectedMarker;\n    map.setSelectedMarker(marker);\n  },\n  getFirst () {\n    return this._firstMarker;\n  },\n  getLast () {\n    if (this.hasFirstMarker()) {\n      var layers = this.getLayers();\n      return layers[layers.length - 1];\n    }\n  },\n  hasFirstMarker () {\n    return !!(this.getFirst() && this.getFirst()._hasFirstIcon());\n  },\n  restore (layer) {\n    this.setAll(layer._latlngs);\n    this.setAllHoles(layer._holes);\n  },\n  _add(latlng, position, options = {}) {\n\n    if (this._map.isMode('draw')) {\n      if (!this._firstMarker) {\n        options.icon = icons.firstIcon;\n      }\n    }\n\n    var marker = this.addMarker(latlng, position, options);\n\n    this.getDELine().addLatLng(latlng);\n\n    if (this.getFirst()._hasFirstIcon()) {\n      this._map.on('mousemove', (e) => {\n        this._updateDELine(e.latlng);\n      });\n    } else {\n      this.getDELine().clear();\n    }\n\n    if (marker._mGroup.getLayers().length > 2) {\n      if (marker._mGroup._firstMarker._hasFirstIcon() && marker === marker._mGroup._lastMarker) {\n        this._map.fire(EVENTS.last_marker_dblclick_mouseover, {marker: marker});\n      }\n    }\n\n    return marker;\n  },\n  setMiddleMarker (position) {\n    this.addMarker(position, null, {icon: icons.middleIcon});\n  },\n  setMiddleMarkers (position) {\n    this.setMiddleMarker(position);\n    this.setMiddleMarker(position + 2);\n  },\n  set (latlng, position, options) {\n    return this._add(latlng, position, options);\n  },\n  setAll (latlngs) {\n    latlngs.forEach((latlng, position) => {\n      this.set(latlng, position);\n    });\n\n    this.getFirst().fire('click');\n  },\n  setAllHoles (holes) {\n    holes.forEach((hole) => {\n      var lastHGroup = this._map.getEHMarkersGroup().addHoleGroup();\n\n      hole._each((latlng, position) => {\n        lastHGroup.set(latlng, position);\n      });\n\n      lastHGroup.getFirst().fire('click');\n    });\n  },\n  _bindLineEvents: undefined\n});\n\nconst MarkerGroup = L.MarkerGroup;\nexport default MarkerGroup;\n","export default {\n  isMobileBrowser (navigator = window.navigator) {\n    const a = navigator.userAgent || navigator.vendor || window.opera;\n    var check = false;\n\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) {\n      check = true;\n    }\n\n    return check;\n  }\n};\n","const viewColor = '#0aaec9';\nconst drawColor = '#00cd00';\nconst weight = 3;\n\nexport default {\n  forceToDraw: true,\n  notifyClickMarkerDeletePolygon: false,\n  translations: {\n    removePolygon: 'remove polygon',\n    removePoint: 'remove point'\n  },\n  style: {\n    view: {\n      opacity: 0.5,\n      fillOpacity: 0.2,\n      dashArray: null,\n      clickable: false,\n      fill: true,\n      stroke: true,\n      color: viewColor,\n      weight: weight\n    },\n    draw: {\n      opacity: 0.5,\n      fillOpacity: 0.2,\n      dashArray: '5, 10',\n      clickable: true,\n      fill: true,\n      stroke: true,\n      color: drawColor,\n      weight: weight\n    },\n    startDraw: {},\n    drawLine: {\n      opacity: 0.7,\n      fill: false,\n      fillColor: drawColor,\n      color: drawColor,\n      weight: weight,\n      dashArray: '5, 10',\n      stroke: true,\n      clickable: false\n    }\n  },\n  markerIcon: undefined,\n  markerHoverIcon: undefined,\n  errorLineStyle: {\n    color: 'red',\n    weight: 3,\n    opacity: 1,\n    smoothFactor: 1\n  },\n  previewErrorLineStyle: {\n    color: 'red',\n    weight: 3,\n    opacity: 1,\n    smoothFactor: 1,\n    dashArray: '5, 10'\n  },\n  text: {\n    removePolygon: 'Remove polygon',\n    acceptDeletion: 'Click again to remove polygon',\n    clickToEdit: 'click to edit',\n    clickToAddNewEdges: '<div>click&nbsp;&nbsp;<div class=\\'m-editor-middle-div-icon static group-selected\\'></div>&nbsp;&nbsp;to add new edges</div>',\n    clickToDrawInnerEdges: 'click to draw inner edges',\n    clickToJoinEdges: 'click to join edges',\n    clickToRemoveAllSelectedEdges: '<div>click&nbsp;&nbsp;&nbsp;&nbsp;<div class=\\'m-editor-div-icon static group-selected\\'></div>&nbsp;&nbsp;to remove edge&nbsp;&nbsp;or<br>click&nbsp;&nbsp;<i class=\\'fa fa-trash\\'></i>&nbsp;&nbsp;to remove all selected edges</div>',\n    clickToSelectEdges: '<div>click&nbsp;&nbsp;&nbsp;&nbsp;<div class=\\'m-editor-div-icon static\\'></div>&nbsp;/&nbsp;<div class=\\'m-editor-middle-div-icon static\\'></div>&nbsp;&nbsp;to select edges</div>',\n    dblclickToJoinEdges: 'double click to join edges',\n    clickToStartDrawPolygonOnMap: 'click to start draw polygon on map',\n    deleteSelectedEdges: 'deleted selected edges',\n    rejectChanges: 'reject changes',\n    jsonWasLoaded: 'JSON was loaded',\n    checkJson: 'check JSON',\n    loadJson: 'load GeoJSON',\n    forgetToSave: 'Save changes by pressing outside of polygon',\n    zoom: 'Zoom'\n  },\n  worldCopyJump: true,\n  geoJSONArea: null\n};\n","import BaseMap from './base.js';\nimport ControlsHook from './hooks/controls.js';\n\nimport opts from './options.js';\n\nimport './utils/array.js';\nimport ViewGroup from './view/group.js';\nimport DrawGroup from './modes/draw/group.js';\nimport EditPolygon from './modes/edit/polygon.js';\nimport MarkerGroup from './modes/edit/marker-group.js';\nimport DashedEditLineGroup from './modes/draw/dashed-line.js';\nimport HolesGroup from './modes/edit/holesGroup.js';\n\nlet Map = L.Map.extend({\n  setLayers() {\n    this.viewGroup = new ViewGroup([]);\n    this.editGroup = new DrawGroup([]);\n    this.editPolygon = new EditPolygon([]);\n    this.editMarkersGroup = new MarkerGroup([]);\n    this.dashedEditLineGroup = new DashedEditLineGroup([]);\n    this.editHoleMarkersGroup = new HolesGroup([]);\n\n    this.viewGroup.addTo(this);\n    this.editGroup.addTo(this);\n    this.editPolygon.addTo(this);\n    this.editMarkersGroup.addTo(this);\n    this.dashedEditLineGroup.addTo(this);\n    this.editHoleMarkersGroup.addTo(this);\n  },\n\n  removeLayers() {\n    this.removeLayer(this.viewGroup);\n    this.removeLayer(this.editGroup);\n    this.removeLayer(this.editPolygon);\n    this.removeLayer(this.editMarkersGroup);\n    this.removeLayer(this.dashedEditLineGroup);\n    this.removeLayer(this.editHoleMarkersGroup);\n  },\n\n  initialize(id, options) {\n    this.viewGroup = null;\n\n    this.editGroup = null;\n\n    this.editPolygon = null;\n\n    this.editMarkersGroup = null;\n\n    this.dashedEditLineGroup = null;\n\n    this.editHoleMarkersGroup = null;\n\n    if (options.text) {\n      Object.assign(opts.text, options.text);\n      delete options.text;\n    }\n\n    let controls = options.controls;\n    if (controls) {\n      if (controls.zoom === false) {\n        options.zoomControl = false;\n      }\n    }\n\n    if (options.style) {\n      if (options.style.draw) {\n        Object.assign(opts.style.draw, options.style.draw);\n      }\n      if (options.style.view) {\n        Object.assign(opts.style.view, options.style.view);\n      }\n      if (options.style.startDraw) {\n        Object.assign(opts.style.startDraw, options.style.startDraw);\n      }\n      if (options.style.drawLine) {\n        Object.assign(opts.style.drawLine, options.style.drawLine);\n      }\n      delete options.style;\n    }\n\n    Object.assign(this.options, opts, options);\n\n    L.Map.prototype.initialize.call(this, id, options);\n\n    this.whenReady(() => {\n      this.setLayers();\n    });\n\n    if (this.options.forceToDraw) {\n      this.mode('draw');\n    }\n\n    this.on('unload', () => {\n      this.removeControl(this.msgHelper);\n      this.removeLayers();\n    });\n  },\n\n  getVGroup() {\n    return this.viewGroup;\n  },\n\n  getEGroup() {\n    return this.editGroup;\n  },\n\n  getEPolygon() {\n    return this.editPolygon;\n  },\n\n  getEMarkersGroup() {\n    return this.editMarkersGroup;\n  },\n\n  getDELine() {\n    return this.dashedEditLineGroup;\n  },\n\n  getEHMarkersGroup() {\n    return this.editHoleMarkersGroup;\n  },\n\n  getSelectedMGroup() {\n    return this._selectedMGroup;\n  },\n\n  getCurrentGeoJSON() {\n    const coords = [];\n\n    this.getVGroup().eachLayer(layer => {\n      if (layer !== this._getSelectedVLayer()) {\n        coords.push(layer.toGeoJSON().geometry.coordinates);\n      }\n    });\n\n    const eCoordinates = this.getEPolygon().toGeoJSON().geometry.coordinates;\n\n    if (eCoordinates.length) {\n      coords.push(eCoordinates);\n    }\n\n    return L.GeoJSON.getFeature(this, {\n      type: 'MultiPolygon',\n      coordinates: coords\n    });\n  }\n});\n\nMap.include(BaseMap);\nMap.addInitHook(ControlsHook);\n\nexport default Map;\n\n","import DrawEvents from './modes/draw/events.js';\n\nimport {\n  precision,\n  precisionGeoJSON\n} from './utils/precision.js';\n\nimport EVENTS from './event-names.js';\n\nimport MarkerGroup from './modes/edit/marker-group.js';\n\nexport default Object.assign({\n\n  hasSelectedVLayer() {\n    return this._getSelectedVLayer() !== undefined;\n  },\n\n  _selectedMarker: undefined,\n  _selectedVLayer: undefined,\n  _oldSelectedMarker: undefined,\n  _modeType: 'draw',\n  _activeEditLayer: undefined,\n  _errorTimeout: null,\n\n  mode(type) {\n    if (this[`__mode_${type}`]) {\n      this._setModeType(type);\n\n      this._clearEvents();\n\n\n      type = this[`__mode_${type}`]() || type;\n\n      this._setMode(type);\n    } else {\n      console.error(`Mode \"${type}\" is not defined`);\n    }\n  },\n  isMode(type) {\n    return type === this._modeType;\n  },\n  __mode_draw() {\n    this._bindDrawEvents();\n  },\n  clear() {\n    this._clearEvents();\n    this._clearMap();\n    setTimeout(() => {\n      this.fire(EVENTS.map_cleared);\n    }, 0);\n  },\n  /**\n   *\n   * The main idea is to save EPolygon to VGroup when:\n   * 1) user add new polygon\n   * 2) when user edit polygon\n   *\n   * */\n  saveState() {\n\n    let ePolygon = this.getEPolygon();\n\n    if (!ePolygon.isEmpty()) {\n      if (this._getSelectedVLayer()) {\n        this._setEPolygon_To_VGroup();\n      } else {\n        this._addEPolygon_To_VGroup();\n      }\n    }\n\n    this.clear();\n    this.mode('draw');\n\n    let geojson = this.getVGroup().toGeoJSON();\n    if (geojson.geometry) {\n      return geojson.geometry;\n    }\n    return {};\n  },\n  geoJSONArea(geoJSON) {\n    let areaFunc = this.options.geoJSONArea || window.turf && window.turf.area;\n\n    if (!areaFunc) {\n      console.warn('Warning: Implement \"geoJSONArea\" function ( leaflet-editor )');\n    }\n\n    return (areaFunc) ? areaFunc(geoJSON) : 0;\n  },\n  /**\n   * Get editable area with precision of lat, lng\n   * Default precision is 6 (precLatLng)\n   *\n   * */\n  area(props = {}) {\n\n    let {precLatLng = 6} = props;\n    let vLayer = this.getVGroup();\n    let ePolygonLayer = this.getEPolygon();\n    let selectedLayer = this._getSelectedVLayer();\n\n    let sum = 0;\n\n    let eArea = (!ePolygonLayer.isEmpty()) ? this.geoJSONArea(precisionGeoJSON(ePolygonLayer.toGeoJSON(), precLatLng)) : 0;\n    let vArea = this.geoJSONArea(precisionGeoJSON(vLayer.toGeoJSON(), precLatLng));\n\n    let hArea = (selectedLayer) ? this.geoJSONArea(precisionGeoJSON(selectedLayer.toGeoJSON(), precLatLng)) : 0;\n\n    if (this.hasSelectedVLayer() && eArea > 0) {\n      vArea -= hArea;\n    }\n\n    sum = (eArea > 0) ? (vArea + eArea) : vArea;\n\n    return precision(sum, precLatLng);\n  },\n  getSelectedMarker() {\n    return this._selectedMarker;\n  },\n  clearSelectedMarker() {\n    this._selectedMarker = null;\n  },\n  setSelectedMarker(marker) {\n    if (!marker || !marker._icon) {\n      throw new Error('Error in method \"setSelectedMarker\". Check marker instance');\n    }\n    this._selectedMarker = marker;\n  },\n  removePolygon(polygon) {\n    this.getEMarkersGroup().clearLayers();\n    this.getEHMarkersGroup().clearLayers();\n\n    polygon.clear();\n\n    this.clearSelectedMarker();\n    this._setEPolygon_To_VGroup();\n  },\n  createEditPolygon(json) {\n    let geoJson = L.geoJson(json);\n\n    //avoid to lose changes\n    if (this._getSelectedVLayer()) {\n      this._setEPolygon_To_VGroup();\n    } else {\n      this._addEPolygon_To_VGroup();\n    }\n\n    this.clear();\n\n    let layer = geoJson.getLayers()[0];\n\n    if (layer) {\n      let layers = layer.getLayers();\n      let vGroup = this.getVGroup();\n      for (let i = 0; i < layers.length; i++) {\n        let _l = layers[i];\n        vGroup.addLayer(_l);\n      }\n    }\n\n    this.mode('draw');\n\n    this._fitVBounds();\n\n    return geoJson;\n  },\n\n  _getSelectedVLayer() {\n    return this._selectedVLayer;\n  },\n  _setSelectedVLayer(layer) {\n    this._selectedVLayer = layer;\n  },\n  _clearSelectedVLayer() {\n    this._selectedVLayer = undefined;\n  },\n  _hideSelectedVLayer(layer) {\n    layer.bringToBack();\n\n    if (!layer) {\n      return;\n    }\n    //show last layer\n    this._showSelectedVLayer(this._getSelectedVLayer());\n    //hide\n    this._setSelectedVLayer(layer);\n    layer._path.style.visibility = 'hidden';\n  },\n  _showSelectedVLayer(layer = this._selectedVLayer) {\n    if (!layer) {\n      return;\n    }\n    layer._path.style.visibility = '';\n  },\n  _addEPolygon_To_VGroup() {\n    let vGroup = this.getVGroup();\n    let ePolygon = this.getEPolygon();\n\n    let holes = ePolygon.getHoles();\n    let latlngs = ePolygon.getLatLngs();\n\n    if (latlngs.length <= 2) {\n      return;\n    }\n\n    if (Array.isArray(holes)) {\n      if (holes) {\n        latlngs = [latlngs].concat(holes);\n      }\n    }\n    vGroup.addLayer(L.polygon(latlngs));\n  },\n  _setEPolygon_To_VGroup() {\n    let ePolygon = this.getEPolygon();\n    let selectedVLayer = this._getSelectedVLayer();\n\n    if (!selectedVLayer) {\n      return;\n    }\n\n    selectedVLayer._latlngs = ePolygon.getLatLngs();\n    selectedVLayer._holes = ePolygon.getHoles();\n    selectedVLayer.redraw();\n  },\n\n  _convertToEdit(group) {\n    if (group instanceof MarkerGroup) {\n      let ePolygon = this.getEPolygon();\n      let layers = group.getLayers();\n      layers = layers.filter((layer) => !layer.isMiddle());\n      let pointsArray = layers.map((layer) => layer.getLatLng());\n\n      let holes = ePolygon.getHoles();\n\n      if (holes) {\n        pointsArray = [pointsArray].concat(holes);\n      }\n\n      ePolygon.setLatLngs(pointsArray);\n      ePolygon.redraw();\n\n      return ePolygon;\n    }\n  },\n  _setMode(type) {\n    let options = this.options;\n    this.getEPolygon().setStyle(options.style[type]);\n  },\n\n  _setModeType(type) {\n    try {\n      this._container.classList.remove(`map-${this._modeType}`);\n      this._container.classList.add(`map-${this._modeType}`);\n\n      this._modeType = type;\n    } catch (e) {\n      console.error('Check \"_setModeType\"');\n    }\n  },\n  _fitVBounds() {\n    if (this.getVGroup().getLayers().length !== 0) {\n      this.fitBounds(this.getVGroup().getBounds(), {padding: [30, 30]});\n    }\n  },\n  _clearMap() {\n    this.getEGroup().clearLayers();\n    this.getEPolygon().clear();\n    this.getEMarkersGroup().clear();\n    let selectedMGroup = this.getSelectedMGroup();\n\n    if (selectedMGroup) {\n      selectedMGroup.getDELine().clear();\n    }\n\n    this.getEHMarkersGroup().clearLayers();\n\n    this._activeEditLayer = undefined;\n\n    this._showSelectedVLayer();\n    this._clearSelectedVLayer();\n    this.clearSelectedMarker();\n  },\n  _clearEvents() {\n    this._unBindDrawEvents();\n  },\n  _moveEPolygonOnTop() {\n    const ePolygon = this.getEPolygon();\n    const element = ePolygon._container;\n\n    if (element) {\n      element.parentElement.insertAdjacentElement('beforeend', element);\n    }\n  }\n}, DrawEvents);\n","import { firstIcon, middleIcon } from '../../marker-icons.js';\nimport EVENTS from '../../event-names.js';\n\nexport default {\n  _bindDrawEvents () {\n    this._unBindDrawEvents();\n\n    // click on map\n    this.on('click', (e) => {\n      // bug fix\n      if (e.originalEvent && e.originalEvent.clientX === 0 && e.originalEvent.clientY === 0) {\n        return;\n      }\n\n      if (e.target instanceof L.Marker) {\n        return;\n      }\n\n      var eMarkersGroup = e.target.getEMarkersGroup();\n\n      // start add new polygon\n      if (eMarkersGroup.isEmpty()) {\n        this._addMarker(e);\n\n        this.fire(EVENTS.start_add_new_polygon);\n        var startDrawStyle = this.options.style['startDraw'];\n\n        if (startDrawStyle) {\n          this.getEPolygon().setStyle(startDrawStyle);\n        }\n\n        this._clearSelectedVLayer();\n\n        this._selectedMGroup = eMarkersGroup;\n        return false;\n      }\n\n      // continue with new polygon\n      var firstMarker = eMarkersGroup.getFirst();\n\n      if (firstMarker && firstMarker._hasFirstIcon()) {\n        if (!(e.target instanceof L.Marker)) {\n          this._addMarker(e);\n        }\n        return false;\n      }\n\n      // start draw new hole polygon\n      var ehMarkersGroup = this.getEHMarkersGroup();\n      var lastHole = ehMarkersGroup.getLastHole();\n      if (firstMarker && !firstMarker._hasFirstIcon()) {\n        if ((e.target.getEPolygon()._path === e.originalEvent.target)) {\n          if (!lastHole || !lastHole.getFirst() || !lastHole.getFirst()._hasFirstIcon()) {\n            this.clearSelectedMarker();\n\n            var lastHGroup = ehMarkersGroup.addHoleGroup();\n            lastHGroup.set(e.latlng, null, { icon: firstIcon });\n\n            this._selectedMGroup = lastHGroup;\n            this.fire(EVENTS.start_add_new_hole);\n\n            this.getEHMarkersGroup().resetSelection();\n            this.getEMarkersGroup().resetSelection();\n\n            return false;\n          }\n        }\n      }\n\n      // continue with new hole polygon\n      if (lastHole && !lastHole.isEmpty() && lastHole.hasFirstMarker()) {\n        ehMarkersGroup.getLastHole().set(e.latlng);\n\n        return false;\n      }\n\n      // reset\n\n      if (this._getSelectedVLayer()) {\n        this._setEPolygon_To_VGroup();\n      } else {\n        this._addEPolygon_To_VGroup();\n      }\n      this.clear();\n      this.mode('draw');\n\n      this.fire(EVENTS.marker_group_clear);\n    });\n\n    this.on(EVENTS.join_path, (e) => {\n      var eMarkersGroup = e.mGroup;\n\n      if (!eMarkersGroup) {\n        return;\n      }\n\n      if (eMarkersGroup._isHole) {\n        this.getEHMarkersGroup().resetLastHole();\n      }\n      //1. set middle markers\n      var layers = eMarkersGroup.getLayers();\n\n      var position = -1;\n      layers.forEach(() => {\n        var marker = eMarkersGroup.addMarker(position, null, { icon: middleIcon });\n        position = marker.position + 2;\n      });\n\n      //2. clear line\n      eMarkersGroup.getDELine().clear();\n\n      eMarkersGroup.select();\n\n      //reset style if 'startDraw' was used\n      this.getEPolygon().setStyle(this.options.style.draw);\n\n\n      if (eMarkersGroup._isHole) {\n        this.fire(EVENTS.hole_created);\n      } else {\n        this.fire(EVENTS.polygon_created);\n      }\n    });\n\n    const vGroup = this.getVGroup();\n\n    vGroup.on('click', (e) => {\n      const selectedMGroup = this.getSelectedMGroup();\n\n      if (selectedMGroup && !selectedMGroup.hasFirstMarker()) {\n\n        vGroup.onClick(e);\n\n        this.msgHelper.msg(this.options.text.clickToDrawInnerEdges, null, e.layerPoint);\n        this.fire(EVENTS.polygon_selected);\n      }\n    });\n\n    this.on(EVENTS.delete_marker, () => {\n      this._convertToEdit(this.getEMarkersGroup());\n    });\n    this.on(EVENTS.delete_polygon, () => {\n      this.getEHMarkersGroup().remove();\n    });\n  },\n  _addMarker ({ latlng }) {\n\n    var eMarkersGroup = this.getEMarkersGroup();\n\n    var marker = eMarkersGroup.set(latlng);\n\n    this._convertToEdit(eMarkersGroup);\n\n    this.fire(EVENTS.add_marker, { marker });\n\n    return marker;\n  },\n  _unBindDrawEvents () {\n    this.off('click');\n    this.getVGroup().off('click');\n\n    this.off('dblclick');\n\n    this.getDELine().clear();\n\n    this.off(EVENTS.join_path);\n\n    if (this._openPopup) {\n      delete this._openPopup;\n    }\n  }\n}\n","export const precision = function(number, prec) {\n  let arrayStrings = (`${number}`).split('.');\n  prec = prec || 0;\n\n  if (!number || arrayStrings.length === 1) {\n    return number;\n  }\n\n  let isFloat = arrayStrings[1].length > 0;\n\n  let rslt = 0;\n\n  if (isFloat) {\n    let _prec = (arrayStrings[1].length < prec) ? arrayStrings[1].length : prec;\n    rslt = number.toPrecision(arrayStrings[0].length + _prec);\n  }\n\n  return Number(rslt);\n};\n\nexport const precisionGeoJSON = function(geoJSON, prec = 0) {\n  let json;\n  if (geoJSON === null || geoJSON === undefined) {\n    throw new Error('Please, make sure that first arguments is geoJSON');\n  }\n\n  json = JSON.parse(JSON.stringify(geoJSON));\n\n  let { geometry: { type, coordinates } } = json;\n\n  if (!Array.isArray(coordinates)) {\n    throw new Error('Please, make sure that geoJSON has correct structure');\n  }\n\n  if (type === 'Polygon') {\n    if (prec > 0) {\n      coordinates.forEach(outlet => {\n        outlet.forEach(edge => {\n          edge[0] = precision(edge[0], prec);\n          edge[1] = precision(edge[1], prec);\n        });\n      });\n    }\n  }\n\n  if (type === 'MultiPolygon') {\n    if (prec > 0) {\n      coordinates.forEach(polygon => {\n        polygon.forEach(outlet => {\n          outlet.forEach(edge => {\n            edge[0] = precision(edge[0], prec);\n            edge[1] = precision(edge[1], prec);\n          });\n        });\n      });\n    }\n  }\n\n\n  return json;\n};","import Marker from '../modes/edit/marker.js';\nimport * as icons from '../marker-icons.js';\n\nimport EVENTS from '../event-names.js';\n\nexport default L.Class.extend({\n  includes: L.Mixin.Events,\n\n  _selected: false,\n  _lastMarker: undefined,\n  _firstMarker: undefined,\n  _positionHash: undefined,\n  _lastPosition: 0,\n  _markers: [],\n  onRemove () {\n    this.clearLayers();\n  },\n  clearLayers () {\n    this._markers.forEach((marker) => {\n      this._map.removeLayer(marker);\n    });\n    this._markers = [];\n  },\n  addTo (map) {\n    map.addLayer(this);\n  },\n  addLayer (marker) {\n    this._map.addLayer(marker);\n    this._markers.push(marker);\n    if (marker.position != null) {\n      this._markers.move(this._markers.length - 1, marker.position);\n    }\n    marker.position = (marker.position != null) ? marker.position : this._markers.length - 1;\n  },\n  remove () {\n    var markers = this.getLayers();\n    markers._each((marker) => {\n      while (this.getLayers().length) {\n        this.removeMarker(marker);\n      }\n    });\n\n    var map = this._map;\n\n    if (this._isHole) {\n      map.fire(EVENTS.hole_deleted);\n    } else {\n      map.getVGroup().removeLayer(map._getSelectedVLayer());\n      map.fire(EVENTS.polygon_deleted);\n\n    }\n  },\n  removeLayer (marker) {\n    var position = marker.position;\n    this._map.removeLayer(marker);\n    this._markers.splice(position, 1);\n  },\n  getLayers () {\n    return this._markers;\n  },\n  eachLayer (cb) {\n    this._markers.forEach(cb);\n  },\n  markerAt (position) {\n    var rslt = this._markers[position];\n\n    if (position < 0) {\n      return this.firstMarker();\n    }\n\n    if (rslt === undefined) {\n      rslt = this.lastMarker();\n    }\n\n    return rslt;\n  },\n  firstMarker () {\n    return this._markers[0];\n  },\n  lastMarker () {\n    var markers = this._markers;\n    return markers[markers.length - 1];\n  },\n  removeMarker (marker) {\n    var b = !marker.isMiddle();\n\n    var prevMarker = marker._prev;\n    var nextMarker = marker._next;\n    var nextnextMarker = marker._next._next;\n    this.removeMarkerAt(marker.position);\n    this.removeMarkerAt(prevMarker.position);\n    this.removeMarkerAt(nextMarker.position);\n\n    var map = this._map;\n\n    if (this.getLayers().length > 0) {\n      this.setMiddleMarker(nextnextMarker.position);\n\n      if (b) {\n        map.fire(EVENTS.delete_marker, { marker: marker });\n      }\n    } else {\n      if (this._isHole) {\n        map.removeLayer(this);\n        map.fire(EVENTS.delete_hole, { marker: marker });\n      } else {\n        map.fire(EVENTS.delete_polygon);\n\n        map.removePolygon(map.getEPolygon());\n      }\n      map.fire(EVENTS.marker_group_clear);\n    }\n  },\n  removeMarkerAt (position) {\n    if (this.getLayers().length === 0) {\n      return;\n    }\n\n    var marker;\n    if (typeof position === 'number') {\n      marker = this.markerAt(position);\n    } else {\n      return;\n    }\n\n    var _changePos = false;\n    var markers = this._markers;\n    markers.forEach((_marker) => {\n      if (_changePos) {\n        _marker.position = (_marker.position === 0) ? 0 : _marker.position - 1;\n      }\n      if (_marker === marker) {\n        marker._prev._next = marker._next;\n        marker._next._prev = marker._prev;\n        _changePos = true;\n      }\n    });\n\n    this.removeLayer(marker);\n\n    if (markers.length < 5) {\n      this.clear();\n      if (!this._isHole) {\n        var map = this._map;\n        map.getEPolygon().clear();\n        map.getVGroup().removeLayer(map._getSelectedVLayer());\n      }\n    }\n  },\n  hasStartMarker() {\n    return !!this.getLayers().some(marker => marker._icon.classList.contains(icons.firstIcon.options.className));\n  },\n  addMarker (latlng, position, options) {\n    // 1. recalculate positions\n    if (typeof latlng === 'number') {\n      position = this.markerAt(latlng).position;\n      this._recalcPositions(position);\n\n      var prevMarker = (position - 1) < 0 ? this.lastMarker() : this.markerAt(position - 1);\n      var nextMarker = this.markerAt((position == -1) ? 1 : position);\n      latlng = this._getMiddleLatLng(prevMarker, nextMarker);\n    }\n\n    var marker = new Marker(this, latlng, options);\n    if (!this._firstMarker) {\n      this._firstMarker = marker;\n      this._lastMarker = marker;\n    }\n\n    if (position !== undefined) {\n      marker.position = position;\n    }\n\n    this.addLayer(marker);\n\n    {\n      marker.position = (marker.position !== undefined ) ? marker.position : this._lastPosition++;\n      marker._prev = this._lastMarker;\n      this._firstMarker._prev = marker;\n      if (marker._prev) {\n        this._lastMarker._next = marker;\n        marker._next = this._firstMarker;\n      }\n    }\n\n    if (position === undefined) {\n      this._lastMarker = marker;\n    }\n\n    // 2. recalculate relations\n    if (position !== undefined) {\n      this._recalcRelations(marker);\n    }\n    // 3. trigger event\n    if (!marker.isMiddle()) {\n      this._map.fire(EVENTS.before_add_marker, { marker: marker });\n    }\n\n    return marker;\n  },\n  clear () {\n    var ids = this._ids();\n\n    this.clearLayers();\n\n    ids.forEach((id) => {\n      this._deleteEvents(id);\n    });\n\n    this._lastPosition = 0;\n\n    this._firstMarker = undefined;\n  },\n  _deleteEvents (id) {\n    delete this._map._leaflet_events.viewreset_idx[id];\n    delete this._map._leaflet_events.zoomanim_idx[id];\n  },\n  _getMiddleLatLng (marker1, marker2) {\n    var map = this._map,\n      p1 = map.project(marker1.getLatLng()),\n      p2 = map.project(marker2.getLatLng());\n\n    return map.unproject(p1._add(p2)._divideBy(2));\n  },\n  _recalcPositions (position) {\n    var markers = this._markers;\n\n    var changePos = false;\n    markers.forEach((marker, _position) => {\n      if (position === _position) {\n        changePos = true;\n      }\n      if (changePos) {\n        this._markers[_position].position += 1;\n      }\n    });\n  },\n  _recalcRelations () {\n    var markers = this._markers;\n\n    markers.forEach((marker, position) => {\n\n      marker._prev = this.markerAt(position - 1);\n      marker._next = this.markerAt(position + 1);\n\n      // first\n      if (position === 0) {\n        marker._prev = this.lastMarker();\n        marker._next = this.markerAt(1);\n      }\n\n      // last\n      if (position === markers.length - 1) {\n        marker._prev = this.markerAt(position - 1);\n        marker._next = this.markerAt(0);\n      }\n    });\n  },\n  _ids () {\n    var rslt = [];\n\n    for (let id in this._layers) {\n      rslt.push(id);\n    }\n\n    rslt.sort((a, b) => a - b);\n\n    return rslt;\n  },\n  select () {\n    if (this.isEmpty()) {\n      this._map._selectedMGroup = null;\n    } else {\n      const map = this._map;\n\n      if (this._isHole) {\n        map.getEHMarkersGroup().resetSelection();\n        map.getEMarkersGroup().resetSelection();\n        map.getEHMarkersGroup().setLastHole(this);\n      } else {\n        map.getEHMarkersGroup().resetSelection();\n        map.getEHMarkersGroup().resetLastHole();\n      }\n\n      this.getLayers()._each((marker) => {\n        marker.dragging.enable();\n        marker.selectIconInGroup();\n      });\n      this._selected = true;\n\n      this._map._selectedMGroup = this;\n      this._map.fire(EVENTS.marker_group_select);\n    }\n  },\n  isSelected() {\n    return this._selected;\n  },\n  isEmpty () {\n    return this.getLayers().length === 0;\n  },\n  resetSelection () {\n    this.getLayers()._each((marker) => {\n      marker.dragging.disable();\n      marker.unSelectIconInGroup();\n    });\n    this._selected = false;\n  }\n})\n","import {firstIcon, icon, dragIcon, middleIcon} from '../../marker-icons.js';\n\nimport EVENTS from '../../event-names.js';\n\nvar size = 1;\nvar userAgent = navigator.userAgent.toLowerCase();\n\nif (userAgent.indexOf('ipad') !== -1 || userAgent.indexOf('iphone') !== -1) {\n  size = 2;\n}\n\nexport default L.Marker.extend({\n  _draggable: undefined, // an instance of L.Draggable\n  _oldLatLngState: undefined,\n  initialize(group, latlng, options = {}) {\n\n    options = Object.assign({\n      icon: icon,\n      draggable: false\n    }, options);\n\n    L.Marker.prototype.initialize.call(this, latlng, options);\n\n    this._mGroup = group;\n\n    this._isFirst = group.getLayers().length === 0;\n  },\n\n  group() {\n    return this._mGroup;\n  },\n\n  next() {\n    var next = this._next._next;\n    if (!this._next.isMiddle()) {\n      next = this._next;\n    }\n    return next;\n  },\n  prev() {\n    var prev = this._prev._prev;\n    if (!this._prev.isMiddle()) {\n      prev = this._prev;\n    }\n    return prev;\n  },\n  changePrevNextPos() {\n    if (this._prev.isMiddle()) {\n\n      var prevLatLng = this.group()._getMiddleLatLng(this.prev(), this);\n      var nextLatLng = this.group()._getMiddleLatLng(this, this.next());\n\n      this._prev.setLatLng(prevLatLng);\n      this._next.setLatLng(nextLatLng);\n    }\n  },\n  _resetIcon(_icon) {\n    if (this._hasFirstIcon()) {\n      return;\n    }\n    var ic = _icon || icon;\n\n    this.setIcon(ic);\n    this.prev().setIcon(ic);\n    this.next().setIcon(ic);\n  },\n\n  _addIconClass(className) {\n    L.DomUtil.addClass(this._icon, className);\n  },\n  _removeIconClass(className) {\n    L.DomUtil.removeClass(this._icon, className);\n  },\n  _hasFirstIcon() {\n    return this._icon && L.DomUtil.hasClass(this._icon, 'm-editor-div-icon-first');\n  },\n  isMiddle() {\n    return this._icon && L.DomUtil.hasClass(this._icon, 'm-editor-middle-div-icon')\n      && !L.DomUtil.hasClass(this._icon, 'leaflet-drag-target');\n  },\n  _setDragIcon() {\n    this._removeIconClass('m-editor-div-icon');\n    this.setIcon(dragIcon);\n  },\n  isPlain() {\n    return L.DomUtil.hasClass(this._icon, 'm-editor-div-icon');\n  },\n  _onceClick() {\n    if (this._isFirst) {\n      this.once('click', (e) => {\n        if (!this._hasFirstIcon()) {\n          return;\n        }\n        const map = this._map;\n        const mGroup = this.group();\n\n        if (mGroup._markers.length < 3) {\n          this._onceClick();\n          return;\n        }\n\n        this._isFirst = false;\n        this.setIcon(icon);\n        map.fire(EVENTS.join_path, {mGroup: mGroup});\n      });\n    }\n  },\n  isAcceptedToDelete() {\n    return this._map.options.notifyClickMarkerDeletePolygon &&\n      !this.isMiddle() &&\n      this.isSelectedInGroup() &&\n      this._map.getSelectedMarker() === this &&\n      this.group().hasMinimalMarkersLength();\n  },\n  needAcceptToDelete() {\n    return this._map.options.notifyClickMarkerDeletePolygon &&\n      !this.isMiddle() &&\n      this.isSelectedInGroup() &&\n      this._map.getSelectedMarker() !== this &&\n      this.group().hasMinimalMarkersLength();\n  },\n  _disallowToExecuteEvent() {\n    const map = this._map;\n    const selectedMGroup = map.getSelectedMGroup();\n\n    return selectedMGroup && selectedMGroup.hasFirstMarker() && selectedMGroup !== this.group();\n  },\n  _bindEvents() {\n\n    this.on('dragstart', e => {\n      this.group().setSelected(this);\n      this._oldLatLngState = e.target._latlng;\n\n      if (this._prev.isPlain()) {\n        this.group().setMiddleMarkers(this.position);\n      }\n\n      this._map.fire(EVENTS.marker_dragstart);\n\n      this.__dragging = true;\n    });\n\n    this.on('click', () => {\n      const mGroup = this.group();\n      const map = this._map;\n\n      if (this._disallowToExecuteEvent()) {\n        return;\n      }\n\n      if (this.needAcceptToDelete()) {\n        mGroup.setSelected(this);\n        map.msgHelper.msg(map.options.text.acceptDeletion, 'error', this);\n        return;\n      }\n\n      if (mGroup.hasFirstMarker() && this !== mGroup.getFirst()) {\n        return;\n      }\n\n      if (this._hasFirstIcon()) {\n        return;\n      }\n\n      mGroup.setSelected(this);\n      if (this._hasFirstIcon()) {\n        return;\n      }\n\n      if (mGroup.getFirst()._hasFirstIcon()) {\n        return;\n      }\n\n      if (!this.isSelectedInGroup()) {\n        mGroup.select();\n\n        if (this.isMiddle()) {\n          map.msgHelper.msg(map.options.text.clickToAddNewEdges, null, this);\n        } else {\n          map.msgHelper.msg(map.options.text.clickToRemoveAllSelectedEdges, null, this);\n        }\n\n        if (this.isAcceptedToDelete()) {\n          map.msgHelper.msg(map.options.text.acceptDeletion, 'error', this);\n        }\n\n        return;\n      }\n\n      if (this.isMiddle()) { //add vertex\n        mGroup.setMiddleMarkers(this.position);\n        this._resetIcon(icon);\n        mGroup.select();\n        map.msgHelper.msg(map.options.text.clickToRemoveAllSelectedEdges, null, this);\n\n        map.clearSelectedMarker();\n\n      } else { //remove vertex\n        if (!mGroup.getFirst()._hasFirstIcon() && !this.__wasDragged) {\n          map.msgHelper.hide();\n\n          mGroup.removeMarker(this);\n\n          if (mGroup.isEmpty()) {\n            if (mGroup._isHole) {\n              map.fire(EVENTS.hole_deleted);\n            } else {\n              map.fire(EVENTS.polygon_deleted);\n            }\n            map.msgHelper.hide();\n          }\n          mGroup.select();\n        }\n      }\n\n      this.__wasDragged = false;\n    });\n\n    this.on('mousedown', () => {\n      if (!this.dragging._enabled) {\n        return false;\n      }\n    });\n\n    this.on('mouseover', (e) => {\n      e.originalEvent.stopPropagation();\n\n      const selectedMarker = this._map.getSelectedMarker();\n      const selectedMarkerDragging = !!(selectedMarker && selectedMarker.__dragging);\n\n      if (this._disallowToExecuteEvent() || selectedMarkerDragging) {\n        return;\n      }\n\n      const map = this._map;\n      if (this.group().getFirst()._hasFirstIcon()) {\n        if (this.group().getLayers().length > 2) {\n          if (this._hasFirstIcon()) {\n            map.fire(EVENTS.first_marker_mouseover, {marker: this});\n          } else if (this === this.group()._lastMarker) {\n            map.fire(EVENTS.last_marker_dblclick_mouseover, {marker: this});\n          }\n        }\n      } else {\n        if (this.isSelectedInGroup()) {\n          if (this.isMiddle()) {\n            map.fire(EVENTS.selected_middle_marker_mouseover, {marker: this});\n          } else {\n            map.fire(EVENTS.selected_marker_mouseover, {marker: this});\n          }\n        } else {\n          map.fire(EVENTS.not_selected_marker_mouseover, {marker: this});\n        }\n      }\n      if (this.isAcceptedToDelete()) {\n        map.msgHelper.msg(map.options.text.acceptDeletion, 'error', this);\n      }\n    });\n    this.on('mouseout', (e) => {\n      e.originalEvent.stopPropagation();\n\n      const selectedMarker = this._map.getSelectedMarker();\n      const selectedMarkerDragging = !!(selectedMarker && selectedMarker.__dragging);\n\n      if (this._disallowToExecuteEvent() || selectedMarkerDragging) {\n        return;\n      }\n\n      this._map.fire(EVENTS.marker_mouseout);\n    });\n\n    this._onceClick();\n\n    this.on('dblclick', () => {\n      if (this._disallowToExecuteEvent()) {\n        return;\n      }\n\n      var mGroup = this.group();\n      if (mGroup && mGroup.getFirst() && mGroup.getFirst()._hasFirstIcon()) {\n        if (this === mGroup._lastMarker) {\n          mGroup.getFirst().fire('click');\n        }\n      }\n    });\n\n    this.on('drag', (e) => {\n      this._onDrag(e);\n    });\n\n    this.on('dragend', (e) => {\n\n      this.__wasDragged = true;\n      this.__dragging = false;\n      this._onDragEnd(e);\n    });\n  },\n\n  onAdd(map) {\n    L.Marker.prototype.onAdd.call(this, map);\n\n    this._bindEvents(map);\n  },\n  _onDrag(e) {\n    var marker = e.target;\n\n    marker.changePrevNextPos();\n\n    var map = this._map;\n    map._convertToEdit(map.getEMarkersGroup());\n\n    this._setDragIcon();\n\n    map.fire(EVENTS.drag_marker, {marker: this});\n  },\n  _onDragEnd() {\n\n    this.group().select();\n    this._map.fire(EVENTS.dragend_marker, {marker: this});\n\n    this._map.fire(EVENTS.selected_marker_mouseover, {marker: this});\n\n    this.resetStyle();\n  },\n  resetIcon() {\n    this._removeIconClass('m-editor-div-icon-drag');\n  },\n  unSelectIconInGroup() {\n    this._removeIconClass('group-selected');\n  },\n  _selectIconInGroup() {\n    if (!this.isMiddle()) {\n      this._addIconClass('m-editor-div-icon');\n    }\n    this._addIconClass('group-selected');\n  },\n  selectIconInGroup() {\n    if (this._prev) {\n      this._prev._selectIconInGroup();\n    }\n    this._selectIconInGroup();\n    if (this._next) {\n      this._next._selectIconInGroup();\n    }\n  },\n  isSelectedInGroup() {\n    return L.DomUtil.hasClass(this._icon, 'group-selected');\n  },\n  onRemove(map) {\n    this.off('mouseout');\n\n    L.Marker.prototype.onRemove.call(this, map);\n  },\n\n  resetStyle() {\n    this.resetIcon();\n    this.selectIconInGroup();\n  }\n});\n","import MsgHelper from '../extended/MsgHelper.js';\nimport m from '../utils/mobile.js';\n\nimport EVENTS from '../event-names.js';\n\nexport default function () {\n\n  this.touchZoom.disable();\n  this.doubleClickZoom.disable();\n\n  this.boxZoom.disable();\n  this.keyboard.disable();\n\n  var msgHelper = this.msgHelper = new MsgHelper({\n    defaultMsg: this.options.text.clickToStartDrawPolygonOnMap,\n  });\n\n  this.on('msgHelperAdded', () => {\n    var text = this.options.text;\n\n    this.on(EVENTS.marker_group_select, () => {\n\n      this.off(EVENTS.not_selected_marker_mouseover);\n      this.on(EVENTS.not_selected_marker_mouseover, (data) => {\n        msgHelper.msg(text.clickToSelectEdges, null, data.marker);\n      });\n\n      this.off(EVENTS.selected_marker_mouseover);\n      this.on(EVENTS.selected_marker_mouseover, (data) => {\n        msgHelper.msg(text.clickToRemoveAllSelectedEdges, null, data.marker);\n      });\n\n      this.off(EVENTS.selected_middle_marker_mouseover);\n      this.on(EVENTS.selected_middle_marker_mouseover, (data) => {\n        msgHelper.msg(text.clickToAddNewEdges, null, data.marker);\n      });\n\n      // on edit polygon\n      this.off(EVENTS.edit_polygon_mousemove);\n      this.on(EVENTS.edit_polygon_mousemove, (data) => {\n        msgHelper.msg(text.clickToDrawInnerEdges, null, data.layerPoint);\n      });\n\n      this.off(EVENTS.edit_polygon_mouseout);\n      this.on(EVENTS.edit_polygon_mouseout, () => {\n        msgHelper.hide();\n      });\n\n      // on view polygon\n      this.off(EVENTS.view_polygon_mousemove);\n      this.on(EVENTS.view_polygon_mousemove, (data) => {\n        msgHelper.msg(text.clickToEdit, null, data.layerPoint);\n      });\n\n      this.off(EVENTS.view_polygon_mouseout);\n      this.on(EVENTS.view_polygon_mouseout, () => {\n        msgHelper.hide();\n      });\n    });\n\n    // hide msg\n    this.off(EVENTS.marker_mouseout);\n    this.on(EVENTS.marker_mouseout, () => {\n      msgHelper.hide();\n    });\n\n    this.on(EVENTS.marker_dragstart, () => {\n      msgHelper.hide();\n    });\n\n    // on start draw polygon\n    this.off(EVENTS.first_marker_mouseover);\n    this.on(EVENTS.first_marker_mouseover, (data) => {\n      msgHelper.msg(text.clickToJoinEdges, null, data.marker);\n    });\n\n    // dblclick to join\n    this.off(EVENTS.last_marker_dblclick_mouseover);\n    this.on(EVENTS.last_marker_dblclick_mouseover, (data) => {\n      msgHelper.msg(text.dblclickToJoinEdges, null, data.marker);\n    });\n\n    this.on(EVENTS.join_path, (data) => {\n      if (data.marker) {\n        msgHelper.msg(this.options.text.clickToRemoveAllSelectedEdges, null, data.marker);\n      }\n    });\n  });\n\n  if (!m.isMobileBrowser()) {\n    this.addControl(msgHelper);\n  }\n}\n","export default L.Control.extend({\n  options: {\n    position: 'msgcenter',\n    defaultMsg: null\n  },\n  _onResizeEvent: null,\n  _titleContainer: null,\n\n  initialize (options) {\n    L.Util.setOptions(this, options);\n  },\n\n  onAdd (map) {\n    var corner = L.DomUtil.create('div', 'leaflet-bottom');\n    var container = L.DomUtil.create('div', 'leaflet-msg-editor');\n\n    map._controlCorners['msgcenter'] = corner;\n    map._controlContainer.appendChild(corner);\n\n    this._setContainer(container, map);\n    map.fire('msgHelperAdded', { control: this });\n\n    this._changePos();\n\n    this._bindEvents(map);\n\n    return container;\n  },\n  onRemove() {\n    this._unBindEvents(map);\n    document.body.removeChild(this._titlePosContainer);\n  },\n  _changePos () {\n    let controlCorner = this._map._controlCorners['msgcenter'];\n    if (controlCorner && controlCorner.children.length) {\n      let child = controlCorner.children[0].children[0];\n\n      if (!child) {\n        return;\n      }\n\n      let width = child.clientWidth;\n      if (width) {\n        controlCorner.style.left = (this._map._container.clientWidth - width) / 2 + 'px';\n      }\n    }\n  },\n  _unBindEvents() {\n    window.removeEventListener('resize', this._onResizeEvent);\n  },\n  _bindEvents () {\n    this._onResizeEvent = this._changePos.bind(this);\n    window.addEventListener('resize', this._onResizeEvent);\n    this._onResizeEvent = null;\n  },\n  _setContainer (container) {\n    this._titleContainer = L.DomUtil.create('div', 'leaflet-msg-container title-hidden');\n    this._titlePosContainer = L.DomUtil.create('div', 'leaflet-msg-container title-hidden');\n    container.appendChild(this._titleContainer);\n    document.body.appendChild(this._titlePosContainer);\n\n    if (this.options.defaultMsg !== null) {\n      L.DomUtil.removeClass(this._titleContainer, 'title-hidden');\n      this._titleContainer.innerHTML = this.options.defaultMsg;\n    }\n  },\n  getOffset (el) {\n    var _x = 0;\n    var _y = 0;\n    if (!this._map.isFullscreen || !this._map.isFullscreen()) {\n      while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\n        _x += el.offsetLeft;\n        _y += el.offsetTop;\n        el = el.offsetParent;\n      }\n    }\n    return { y: _y, x: _x };\n  },\n  msg (text, type, object) {\n    if (!text || !this._titlePosContainer) {\n      return;\n    }\n\n    if (object) {\n      L.DomUtil.removeClass(this._titlePosContainer, 'title-hidden');\n      L.DomUtil.removeClass(this._titlePosContainer, 'title-error');\n      L.DomUtil.removeClass(this._titlePosContainer, 'title-success');\n\n      this._titlePosContainer.innerHTML = text;\n\n      var point;\n\n      var offset = this.getOffset(this._map._container);\n\n      if (object instanceof L.Point) {\n        point = object;\n        point = this._map.layerPointToContainerPoint(point);\n      } else {\n        point = this._map.latLngToContainerPoint(object.getLatLng());\n      }\n\n      point.x += offset.x;\n      point.y += offset.y;\n\n      this._titlePosContainer.style.top = (point.y - 8) + \"px\";\n      this._titlePosContainer.style.left = (point.x + 10) + \"px\";\n\n      if (type) {\n        L.DomUtil.addClass(this._titlePosContainer, 'title-' + type);\n      }\n    } else {\n      L.DomUtil.removeClass(this._titleContainer, 'title-hidden');\n      L.DomUtil.removeClass(this._titleContainer, 'title-error');\n      L.DomUtil.removeClass(this._titleContainer, 'title-success');\n\n      this._titleContainer.innerHTML = text;\n\n      if (type) {\n        L.DomUtil.addClass(this._titleContainer, 'title-' + type);\n      }\n      this._changePos();\n    }\n  },\n  hide () {\n    if (this._titleContainer) {\n      L.DomUtil.addClass(this._titleContainer, 'title-hidden');\n    }\n\n    if (this._titlePosContainer) {\n      L.DomUtil.addClass(this._titlePosContainer, 'title-hidden');\n    }\n  },\n  getBtnContainer () {\n    return this._map._controlCorners['msgcenter'];\n  },\n  getBtnAt (pos) {\n    return this.getBtnContainer().child[pos];\n  },\n  disableBtn (pos) {\n    L.DomUtil.addClass(this.getBtnAt(pos), 'disabled');\n  },\n  enableBtn (pos) {\n    L.DomUtil.removeClass(this.getBtnAt(pos), 'disabled');\n  }\n});\n","Array.prototype.move = function(from, to) {\n  this.splice(to, 0, this.splice(from, 1)[0]);\n};\nArray.prototype._each = function(func) {\n  var length = this.length;\n  var i = 0;\n  for (; i < length; i++) {\n    func.call(this, this[i], i);\n  }\n};\nexport default Array;\n","import EVENTS from '../event-names.js';\n\nexport default L.MultiPolygon.extend({\n  initialize (latlngs, options) {\n    L.MultiPolygon.prototype.initialize.call(this, latlngs, options);\n\n    this.on('layeradd', (e) => {\n      var mViewStyle = this._map.options.style.view;\n      e.target.setStyle(Object.assign({\n        opacity: 0.7,\n        fillOpacity: 0.35,\n        color: '#00ABFF'\n      }, mViewStyle));\n\n      this._map._moveEPolygonOnTop();\n    });\n  },\n  isEmpty() {\n    return this.getLayers().length === 0;\n  },\n  onAdd (map) {\n    L.MultiPolygon.prototype.onAdd.call(this, map);\n\n    this.on('mousemove', (e) => {\n      map.fire(EVENTS.view_polygon_mousemove, { layerPoint: e.layerPoint });\n    });\n    this.on('mouseout', () => {\n      map.fire(EVENTS.view_polygon_mouseout);\n    });\n  },\n  onClick (e) {\n    const map = this._map;\n    const selectedMGroup = map.getSelectedMGroup();\n    const eMarkersGroup = map.getEMarkersGroup();\n    if ((selectedMGroup && selectedMGroup.getFirst() && selectedMGroup.getFirst()._hasFirstIcon() && !selectedMGroup.isEmpty())) {\n      const eMarkersGroup = map.getEMarkersGroup();\n      eMarkersGroup.set(e.latlng);\n      map._convertToEdit(eMarkersGroup);\n    } else {\n      // reset\n      if (map._getSelectedVLayer()) {\n        map._setEPolygon_To_VGroup();\n      } else {\n        map._addEPolygon_To_VGroup();\n      }\n      map.clear();\n      map.mode('draw');\n\n      map._hideSelectedVLayer(e.layer);\n\n      eMarkersGroup.restore(e.layer);\n      map._convertToEdit(eMarkersGroup);\n\n      eMarkersGroup.select();\n    }\n  },\n  onRemove (map) {\n    this.off('mouseover');\n    this.off('mouseout');\n\n    map.off(EVENTS.view_polygon_mousemove);\n    map.off(EVENTS.view_polygon_mouseout);\n  }\n});\n","export default L.FeatureGroup.extend({});\n","import ExtendedPolygon from '../../extended/Polygon.js';\n\nimport EVENTS from '../../event-names.js';\n\nexport default L.EditPloygon = ExtendedPolygon.extend({\n  _oldE: undefined, // to reuse event object after \"bad hole\" removing to build new hole\n  _k: 1, // to decrease 'diff' value which helps build a hole\n  _holes: [],\n  initialize (latlngs, options) {\n    L.Polygon.prototype.initialize.call(this, latlngs, options);\n\n    this.options.className = \"leaflet-clickable editable-polygon\";\n  },\n  _update (e) {\n    var marker = e.marker;\n\n    if (marker._mGroup._isHole) {\n      var markers = marker._mGroup._markers;\n      markers = markers.filter((marker) => !marker.isMiddle());\n      this._holes[marker._mGroup.position] = markers.map((marker) => marker.getLatLng());\n\n    }\n    this.redraw();\n  },\n  _removeHole (e) {\n    var holePosition = e.marker._mGroup.position;\n    this._holes.splice(holePosition, 1);\n\n    this._map.getEHMarkersGroup().removeLayer(e.marker._mGroup._leaflet_id);\n    this._map.getEHMarkersGroup().repos(e.marker._mGroup.position);\n\n    this.redraw();\n  },\n  onAdd (map) {\n    L.Polyline.prototype.onAdd.call(this, map);\n\n    map.off(EVENTS.before_add_marker);\n    map.on(EVENTS.before_add_marker, (e) => this._update(e));\n    map.off(EVENTS.drag_marker);\n    map.on(EVENTS.drag_marker, (e) => this._update(e));\n    map.off(EVENTS.delete_marker);\n    map.on(EVENTS.delete_marker, (e) => this._update(e));\n    map.off(EVENTS.delete_hole);\n    map.on(EVENTS.delete_hole, (e) => this._removeHole(e));\n\n    this.on('mousemove', (e) => {\n      map.fire(EVENTS.edit_polygon_mousemove, { layerPoint: e.layerPoint });\n    });\n\n    this.on('mouseout', () => map.fire(EVENTS.edit_polygon_mouseout));\n  },\n  onRemove (map) {\n    this.off('mousemove');\n    this.off('mouseout');\n\n    map.off(EVENTS.edit_polygon_mouseover);\n    map.off(EVENTS.edit_polygon_mouseout);\n\n    L.Polyline.prototype.onRemove.call(this, map);\n  },\n  addHole (hole) {\n    this._holes = this._holes || [];\n    this._holes.push(hole);\n\n    this.redraw();\n  },\n  hasHoles() {\n    return this._holes.length > 0;\n  }\n});\n","export default L.Polygon.extend({\n  isEmpty () {\n    var latLngs = this.getLatLngs();\n    return latLngs === null || latLngs === undefined || (latLngs && latLngs.length === 0);\n  },\n  getHoles () {\n    return this._holes;\n  },\n  clearHoles () {\n    this._holes = [];\n    this.redraw();\n  },\n  clear () {\n    this.clearHoles();\n\n    if (Array.isArray(this._latlngs) && this._latlngs[0] !== undefined) {\n      this.setLatLngs([[0,0],[0,0]]);\n    }\n  }\n})\n","import opts from '../../options.js';\n\nexport default L.Polyline.extend({\n  options: Object.assign(opts.style.drawLine, {\n    className: 'dash-line'\n  }),\n  _latlngToMove: undefined,\n  onAdd: function (map) {\n    L.Polyline.prototype.onAdd.call(this, map);\n    this.setStyle(map.options.style.drawLine);\n  },\n  addLatLng (latlng) {\n    if (this._latlngToMove) {\n      this._latlngToMove = undefined;\n    }\n\n    if (this._latlngs.length > 1) {\n      this._latlngs.splice(-1);\n    }\n\n    this._latlngs.push(L.latLng(latlng));\n\n    return this.redraw();\n  },\n  update (pos) {\n\n    if (!this._latlngToMove && this._latlngs.length) {\n      this._latlngToMove = L.latLng(pos);\n      this._latlngs.push(this._latlngToMove);\n    }\n    if (this._latlngToMove) {\n      this._latlngToMove.lat = pos.lat;\n      this._latlngToMove.lng = pos.lng;\n\n      this.redraw();\n    }\n    return this;\n  },\n  _addLine (line, group, isLastMarker) {\n    if (!isLastMarker) {\n      line.addTo(group);\n    }\n  },\n  clear () {\n    this.setLatLngs([]);\n  }\n});\n","import MarkerGroup from '../../modes/edit/marker-group.js';\n\nexport default L.FeatureGroup.extend({\n  _selected: false,\n  _lastHole: undefined,\n  _lastHoleToDraw: undefined,\n  addHoleGroup () {\n    this._lastHole = new MarkerGroup();\n    this._lastHole._isHole = true;\n    this._lastHole.addTo(this);\n\n    this._lastHole.position = this.getLength() - 1;\n\n    this._lastHoleToDraw = this._lastHole;\n\n    return this._lastHole;\n  },\n  getLength () {\n    return this.getLayers().length;\n  },\n  resetLastHole () {\n    this._lastHole = undefined;\n  },\n  setLastHole (layer) {\n    this._lastHole = layer;\n  },\n  getLastHole () {\n    return this._lastHole;\n  },\n  remove () {\n    this.eachLayer((hole) => {\n      while (hole.getLayers().length) {\n        hole.removeMarkerAt(0);\n      }\n    });\n  },\n  repos (position) {\n    this.eachLayer((layer) => {\n      if (layer.position >= position) {\n        layer.position -= 1;\n      }\n    });\n  },\n  resetSelection () {\n    this.eachLayer((layer) => {\n      layer.resetSelection();\n    });\n    this._selected = false;\n  }\n});\n","import Map from './map.js';\n\nwindow.LeafletEditor = Map;\n"],"sourceRoot":""}